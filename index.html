<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <!-- CSP with reCAPTCHA and ESRI support -->
    <meta http-equiv="Content-Security-Policy" content="
      default-src 'self';
      connect-src 'self' https://*.arcgis.com https://*.esri.com https://www.google.com https://www.gstatic.com https://api.ignatius.io https://cdn.jsdelivr.net;
      script-src 'self' 'unsafe-inline' 'unsafe-eval' https://*.arcgis.com https://*.esri.com https://www.google.com https://www.gstatic.com https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://code.jquery.com;
      worker-src 'self' blob: data:;
      child-src 'self' blob: data:;
      frame-src 'self' https://www.google.com;
      style-src 'self' 'unsafe-inline' https://*.arcgis.com https://*.esri.com https://cdn.jsdelivr.net https://fonts.googleapis.com;
      font-src 'self' https://*.arcgis.com https://*.esri.com https://cdn.jsdelivr.net https://fonts.gstatic.com;
      img-src 'self' data: blob: https://*.arcgis.com https://*.esri.com https://www.cityoffrederickmd.gov;
    " />
    <title>Submit 311 Service Request - City of Frederick</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- ESRI ArcGIS API CSS -->
    <link rel="stylesheet" href="https://js.arcgis.com/4.28/esri/themes/light/main.css">
    <!-- Google reCAPTCHA v2 (like working example) -->
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <style>
      /* Frederick, MD Theme Variables */
      :root {
        --fred-primary: #004785;
        --fred-secondary: #003766;
        --fred-accent: #FFD700;
        --fred-bg: #f0f4f8;
        --fred-text: #1f2d3d;
        --emerald-deep: var(--fred-secondary);
        --emerald-primary: var(--fred-primary);
        --teal-water: var(--fred-primary);
        --aqua-clear: var(--fred-primary);
        --ocean-blue: var(--fred-primary);
        --seafoam-light: var(--fred-bg);
        --pearl-white: #f8fdfc;
        --sand-beige: var(--fred-bg);
        --coral-accent: var(--fred-accent);
        --sea-glass: var(--fred-bg);
        --deep-navy: var(--fred-secondary);
        --mist-gray: var(--fred-bg);
        --text-dark: var(--fred-text);
        --text-light: #6b7280;
        --card-bg: #fff;
        --border-color: #e5e7eb;
        --light-bg-lighter: var(--fred-bg);
        --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        --success-green: #10b981;
        --warning-yellow: #f59e0b;
        --error-red: #ef4444;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family:
          "Inter",
          -apple-system,
          BlinkMacSystemFont,
          "Segoe UI",
          sans-serif;
        background-color: var(--light-bg-lighter);
        color: var(--text-dark);
        line-height: 1.6;
      }

      /* Header */
      .header {
        background: linear-gradient(
          135deg,
          var(--emerald-deep),
          var(--emerald-primary)
        );
        color: white;
        padding: 0.5rem 0;
        box-shadow: var(--shadow-md);
      }

      .header-content {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .logo-section {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .logo-icon {
        width: 50px;
        height: 50px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
      }

      .logo-text h1 {
        margin: 0;
        font-size: 1.5rem;
        font-weight: 700;
      }

      .logo-text p {
        margin: 0;
        font-size: 0.9rem;
        opacity: 0.9;
      }

      .back-button {
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: white;
        text-decoration: none;
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        transition: all 0.3s ease;
        font-weight: 500;
      }

      .back-button:hover {
        background: rgba(255, 255, 255, 0.3);
        color: white;
        text-decoration: none;
        transform: translateX(-2px);
      }

      /* Hero Section */
      #hero {
        background-image: 
          linear-gradient(rgba(0, 71, 133, 0.35), rgba(0, 55, 102, 0.35)),
          url('https://www.cityoffrederickmd.gov/ImageRepository/Document?documentID=13988');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        padding: 1.25rem 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        color: white;
        box-shadow: var(--shadow-md);
        position: relative;
      }
      
      #hero .hero-content {
        text-align: center;
        padding: 0 1rem;
        max-width: 800px;
        margin: 0 auto;
      }
      
      #hero .hero-logo {
        height: 4rem;
        width: auto;
        margin-bottom: 0.75rem;
        filter: brightness(1.1);
      }
      
      #hero .hero-text {
        font-size: 1.25rem;
        opacity: 0.95;
        margin: 0;
        font-weight: 400;
        line-height: 1.5;
      }
      
      @media (min-width: 640px) {
        #hero {
          padding: 1.75rem 0;
        }
        
        #hero .hero-logo {
          height: 4.5rem;
        }
        
        #hero .hero-text {
          font-size: 1.25rem;
        }
      }

      /* Page Header */
      .page-header {
        background: var(--card-bg);
        border-bottom: 1px solid var(--border-color);
        padding: 1rem 0;
      }

      .page-header-content {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
        text-align: center;
      }

      .page-header h2 {
        color: var(--emerald-deep);
        font-size: 2.25rem;
        margin-bottom: 0.75rem;
        font-weight: 700;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
      }

      .page-icon {
        width: 60px;
        height: 60px;
        background: linear-gradient(
          135deg,
          var(--seafoam-light),
          var(--mist-gray)
        );
        border-radius: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.75rem;
        color: var(--emerald-deep);
      }

      .page-header p {
        font-size: 1.1rem;
        color: var(--text-light);
        max-width: 600px;
        margin: 0 auto;
      }

      /* Main Content */
      .main-content {
        max-width: 700px;
        margin: 0 auto;
        padding: 3rem 1rem;
      }

      /* Step indicator */
      .step-indicator {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 2rem;
        gap: 1rem;
      }

      .step {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .step-number {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 1rem;
      }

      .step.active .step-number {
        background: var(--emerald-primary);
        color: white;
      }

      .step.inactive .step-number {
        background: var(--border-color);
        color: var(--text-light);
      }

      .step.completed .step-number {
        background: var(--success-green);
        color: white;
      }

      .step-connector {
        width: 40px;
        height: 2px;
        background: var(--border-color);
      }

      .step-connector.completed {
        background: var(--success-green);
      }

      /* Service List Styles */
      .service-categories-list {
        background: white;
        border: 1px solid var(--border-color);
        border-radius: 0.5rem;
        overflow: hidden;
      }

      .service-list {
        list-style: none;
        margin: 0;
        padding: 0;
      }

      .service-list li.category-header {
        background: linear-gradient(
          135deg,
          var(--fred-primary),
          var(--fred-secondary)
        );
        padding: 0.75rem 1rem;
        font-weight: 600;
        color: white;
        border-bottom: 1px solid var(--border-color);
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.9rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .service-list-btn {
        width: 100%;
        padding: 0.6rem 1rem;
        border: none;
        background: white;
        text-align: left;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--text-dark);
        font-size: 0.875rem;
        border-bottom: 1px solid var(--border-color);
        transition: all 0.2s ease;
        cursor: pointer;
      }

      .service-list-btn:hover {
        background: rgba(0, 71, 133, 0.05);
        color: var(--fred-primary);
      }

      .service-list-btn.selected {
        background: var(--success-green);
        color: white;
      }

      .service-list-btn.selected:hover {
        background: #059669;
        color: white;
      }

      .service-list-btn i {
        font-size: 0.9rem;
        flex-shrink: 0;
        width: 16px;
      }

      .service-list-btn.selected i {
        color: white;
      }

      /* Continue Button */
      .continue-button, .submit-button {
        background: linear-gradient(
          135deg,
          var(--emerald-primary),
          var(--teal-water)
        );
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 0.75rem;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 166, 147, 0.2);
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 1rem;
      }

      .continue-button:hover, .submit-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 166, 147, 0.3);
      }

      .continue-button:disabled, .submit-button:disabled {
        background: var(--text-light);
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }

      /* Step 2 Header Layout */
      .step2-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 2rem;
        padding: 1rem;
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 0.5rem;
      }

      .back-button {
        background: var(--border-color);
        color: var(--text-dark);
        border: none;
        padding: 0.5rem 1rem;
        border-radius: 0.375rem;
        font-size: 0.875rem;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .back-button:hover {
        background: var(--text-light);
        color: white;
      }

      .selected-request-type {
        font-weight: 600;
        color: var(--fred-primary);
        font-size: 1.1rem;
      }

      /* Mobile responsiveness for step 2 header */
      @media (max-width: 768px) {
        .step2-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 1rem;
        }

        .submit-button, .continue-button {
          width: 100%;
          justify-content: center;
        }
      }

      /* Hidden class */
      .hidden {
        display: none !important;
      }

      /* Info Cards */
      .info-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 1rem;
        margin-bottom: 2rem;
      }

      .info-card {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 0.75rem;
        padding: 1.5rem;
        text-align: center;
      }

      .info-card-icon {
        width: 50px;
        height: 50px;
        background: linear-gradient(
          135deg,
          var(--ocean-blue),
          var(--aqua-clear)
        );
        color: white;
        border-radius: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1rem;
        font-size: 1.25rem;
      }

      .info-card h4 {
        margin-bottom: 0.5rem;
        color: var(--text-dark);
        font-weight: 600;
      }

      .info-card p {
        margin: 0;
        font-size: 0.9rem;
        color: var(--text-light);
      }

      /* Form Styles */
      .service-request-form {
        background: var(--card-bg);
        border-radius: 1.25rem;
        box-shadow: var(--shadow-lg);
        border: 1px solid var(--border-color);
        overflow: hidden;
      }

      .form-section {
        padding: 2rem;
        border-bottom: 1px solid var(--border-color);
      }

      .form-section:last-child {
        border-bottom: none;
      }

      .section-header {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 1.5rem;
      }

      .section-icon {
        width: 40px;
        height: 40px;
        background: linear-gradient(
          135deg,
          var(--emerald-primary),
          var(--teal-water)
        );
        color: white;
        border-radius: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.1rem;
      }

      .section-header h3 {
        margin: 0;
        color: var(--text-dark);
        font-size: 1.4rem;
        font-weight: 600;
      }

      .form-group {
        margin-bottom: 1.5rem;
      }

      .form-group:last-child {
        margin-bottom: 0;
      }

      .form-label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: var(--text-dark);
        font-size: 0.95rem;
      }

      .required {
        color: var(--error-red);
      }

      .form-control {
        width: 100%;
        padding: 0.75rem 1rem;
        border: 2px solid var(--border-color);
        border-radius: 0.5rem;
        font-size: 1rem;
        transition: all 0.3s ease;
        background: white;
      }

      .form-control:focus {
        outline: none;
        border-color: var(--emerald-primary);
        box-shadow: 0 0 0 3px rgba(0, 166, 147, 0.1);
      }

      .form-control:invalid {
        border-color: var(--error-red);
      }

      .form-select {
        appearance: none;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
        background-position: right 0.5rem center;
        background-repeat: no-repeat;
        background-size: 1.5em 1.5em;
        padding-right: 2.5rem;
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
      }

      .form-help {
        font-size: 0.875rem;
        color: var(--text-light);
        margin-top: 0.5rem;
        display: flex;
        align-items: flex-start;
        gap: 0.5rem;
      }

      .form-help i {
        color: var(--emerald-primary);
        font-size: 1rem;
        margin-top: 0.125rem;
        flex-shrink: 0;
      }

      /* Location Section */
      .location-input {
        background: var(--mist-gray);
        border: 2px dashed var(--border-color);
        border-radius: 0.75rem;
        padding: 2rem;
        text-align: center;
        transition: all 0.3s ease;
      }

      .location-icon {
        width: 60px;
        height: 60px;
        background: var(--emerald-primary);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1rem;
        font-size: 1.5rem;
      }

      .location-coordinates {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin-top: 1rem;
      }

      /* Submit Section */
      .submit-section {
        background: var(--mist-gray);
        padding: 2rem;
        text-align: center;
      }

      .submit-button {
        background: linear-gradient(
          135deg,
          var(--emerald-primary),
          var(--teal-water)
        );
        color: white;
        border: none;
        padding: 1rem 3rem;
        border-radius: 0.75rem;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 1rem;
      }

      .submit-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 166, 147, 0.3);
      }

      .submit-button:disabled {
        background: var(--text-light);
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
        opacity: 0.6;
      }
      
      .submit-button.disabled {
        background: var(--text-light) !important;
        cursor: not-allowed !important;
        transform: none !important;
        box-shadow: none !important;
        opacity: 0.6 !important;
      }

      .submit-help {
        font-size: 0.9rem;
        color: var(--text-light);
        max-width: 500px;
        margin: 0 auto;
      }

      /* Success Modal */
      .success-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.7);
        backdrop-filter: blur(5px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .success-modal.show {
        opacity: 1;
        visibility: visible;
      }

      .success-modal-content {
        background: white;
        border-radius: 1.5rem;
        max-width: 600px;
        width: 90%;
        box-shadow: 0 20px 80px rgba(0,0,0,0.4);
        transform: scale(0.8) translateY(20px);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        border: 2px solid var(--success-green);
      }

      .success-modal.show .success-modal-content {
        transform: scale(1) translateY(0);
      }

      .success-modal-header {
        text-align: center;
        padding: 1.25rem;
        background: var(--fred-primary);
        color: white;
        border-radius: 1.5rem 1.5rem 0 0;
        position: relative;
      }

      .close-btn {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: rgba(255,255,255,0.2);
        border: none;
        color: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1.2rem;
        transition: all 0.3s ease;
      }

      .close-btn:hover {
        background: rgba(255,255,255,0.3);
        transform: scale(1.1);
      }

      .success-icon {
        font-size: 3rem;
        margin-bottom: 0.75rem;
      }

      .success-modal-header h3 {
        margin: 0 0 0.25rem 0;
        font-size: 1.5rem;
        font-weight: 700;
      }

      .success-modal-header p {
        margin: 0;
        opacity: 0.9;
        font-size: 1rem;
      }

      .modal-body {
        padding: 1rem;
      }

      .request-details {
        background: var(--mist-gray);
        border-radius: 1rem;
        padding: 1rem;
        margin-bottom: 1rem;
      }

      .detail-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 0;
        border-bottom: 1px solid var(--border-color);
      }

      .detail-row:last-child {
        border-bottom: none;
      }

      .detail-label {
        font-weight: 600;
        color: var(--text-dark);
      }

      .detail-value {
        color: var(--text-light);
        font-weight: 500;
        word-wrap: break-word;
        max-width: 300px;
      }

      .detail-value.description {
        font-style: italic;
        line-height: 1.4;
        max-width: 350px;
      }

      .next-steps {
        background: var(--pearl-white);
        border-radius: 1rem;
        padding: 1rem;
        margin-bottom: 0.75rem;
      }

      .next-steps h4 {
        color: var(--emerald-deep);
        margin-bottom: 0.75rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 1.1rem;
      }

      .next-steps ul {
        margin: 0;
        padding-left: 1.5rem;
      }

      .next-steps li {
        margin-bottom: 0.5rem;
        color: var(--text-dark);
        line-height: 1.4;
        font-size: 0.95rem;
      }

      .next-steps li:last-child {
        margin-bottom: 0;
      }

      .modal-actions {
        padding: 0 1rem 1rem 1rem;
        text-align: center;
      }

      .action-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        background: linear-gradient(135deg, var(--emerald-primary), var(--teal-water));
        color: white;
        text-decoration: none;
        padding: 1rem 2rem;
        border-radius: 0.75rem;
        font-weight: 600;
        font-size: 1.1rem;
        transition: all 0.3s ease;
      }

      .action-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 166, 147, 0.3);
        color: white;
        text-decoration: none;
      }

      /* Photo Upload Styles */
      .photo-upload {
        border: 2px dashed var(--border-color);
        border-radius: 0.75rem;
        padding: 2rem;
        text-align: center;
        transition: all 0.3s ease;
        cursor: pointer;
        background: var(--pearl-white);
      }

      .photo-upload:hover {
        border-color: var(--emerald-primary);
        background: var(--mist-gray);
      }

      .photo-upload.dragover {
        border-color: var(--emerald-primary);
        background: var(--seafoam-light);
      }

      .upload-icon {
        width: 60px;
        height: 60px;
        background: var(--emerald-primary);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1rem;
        font-size: 1.5rem;
      }

      .photo-preview {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 1rem;
        margin-top: 1rem;
      }

      .preview-item {
        position: relative;
        border-radius: 0.75rem;
        overflow: hidden;
        background: var(--mist-gray);
        border: 2px solid var(--border-color);
        width: 200px;
        height: 200px;
        flex-shrink: 0;
        box-shadow: var(--shadow-md);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .preview-item:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      .preview-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .preview-item .file-preview {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        text-align: center;
      }

      .preview-item .file-icon {
        font-size: 3rem;
        color: var(--fred-primary);
        margin-bottom: 0.75rem;
      }

      .preview-item .file-name {
        font-size: 0.875rem;
        font-weight: 500;
        color: var(--text-dark);
        word-break: break-all;
        line-height: 1.3;
        max-height: 3.5rem;
        overflow: hidden;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        line-clamp: 3;
        -webkit-box-orient: vertical;
      }

      .remove-photo {
        position: absolute;
        top: 0.75rem;
        right: 0.75rem;
        background: var(--fred-accent);
        color: var(--fred-secondary);
        border: none;
        border-radius: 50%;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: all 0.2s ease;
      }

      .remove-photo:hover {
        background: var(--fred-secondary);
        color: var(--fred-accent);
        transform: scale(1.1);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      }
      #esriMapView {
        border-radius: 0.75rem;
        overflow: hidden;
      }

      /* Override ESRI default styles to match our theme */
      .esri-ui-corner .esri-component {
        border-radius: 0.5rem;
        box-shadow: var(--shadow-md);
      }

      .esri-zoom .esri-widget--button {
        background-color: var(--emerald-primary);
        color: white;
      }

      .esri-zoom .esri-widget--button:hover {
        background-color: var(--emerald-deep);
      }

      /* Map loading indicator */
      .map-loading {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: white;
        padding: 2rem;
        border-radius: 1rem;
        box-shadow: var(--shadow-lg);
        text-align: center;
        z-index: 1000;
      }

      .map-loading .loading-spinner {
        width: 40px;
        height: 40px;
        border: 4px solid var(--mist-gray);
        border-top: 4px solid var(--emerald-primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 0 auto 1rem;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      @keyframes bounce {
        0%, 20%, 50%, 80%, 100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-15px);
        }
        60% {
          transform: translateY(-8px);
        }
      }

      /* Map Styles */
      .map-container {
        margin: 1rem 0;
        border-radius: 0.75rem;
        overflow: hidden;
        position: relative;
      }

      .map-controls {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        margin-top: 1rem;
        justify-content: center;
      }

      .map-control-btn {
        background: var(--emerald-primary);
        color: white;
        border: none;
        padding: 0.6rem 1.2rem;
        border-radius: 0.5rem;
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .map-control-btn:hover {
        background: var(--emerald-deep);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 166, 147, 0.3);
      }

      .map-control-btn:active {
        transform: translateY(0);
      }

      .coordinates-display {
        background: var(--seafoam-light);
        border: 1px solid var(--emerald-primary);
        border-radius: 0.5rem;
        padding: 0.75rem;
        margin-top: 1rem;
        text-align: center;
        font-weight: 500;
        color: var(--emerald-deep);
        display: none;
      }

      .coordinates-display.show {
        display: block;
      }

      /* Map Legend Styles */
      .map-legend {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 0.5rem;
        padding: 1rem;
        margin-top: 1rem;
        box-shadow: var(--shadow-sm);
      }

      .map-legend h5 {
        margin: 0 0 0.75rem 0;
        color: var(--emerald-deep);
        font-size: 1rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .legend-items {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 0.5rem;
      }

      .legend-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.85rem;
        color: var(--text-dark);
      }

      .legend-marker {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        border: 2px solid white;
        box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        flex-shrink: 0;
      }
      
      /* Override border for status markers */
      .legend-marker[style*="border"] {
        border: 1px solid rgb(0, 55, 102) !important;
      }

      /* Make coordinate inputs readonly style */
      .form-control[readonly] {
        background-color: var(--mist-gray);
        cursor: default;
      }

      /* Form submitting state */
      .service-request-form.submitting {
        opacity: 0.8;
        pointer-events: none;
        position: relative;
      }

      .service-request-form.submitting::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255, 255, 255, 0.7);
        backdrop-filter: blur(2px);
        z-index: 10;
        border-radius: 1.25rem;
      }

      /* Simple completion message overlay */
      .completion-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .completion-overlay.show {
        opacity: 1;
        visibility: visible;
      }

      .completion-message {
        text-align: center;
        background: white;
        padding: 3rem;
        border-radius: 1.5rem;
        box-shadow: 0 20px 80px rgba(0,0,0,0.15);
        border: 3px solid var(--success-green);
        max-width: 500px;
        width: 90%;
      }

      .completion-message .success-icon {
        font-size: 4rem;
        color: var(--success-green);
        margin-bottom: 1rem;
      }

      .completion-message h3 {
        color: var(--text-dark);
        font-size: 1.75rem;
        margin-bottom: 1rem;
        font-weight: 700;
      }

      .completion-message p {
        color: var(--text-light);
        font-size: 1.1rem;
        margin: 0;
        line-height: 1.5;
      }

      .error-message {
        background: var(--error-red);
        color: white;
        padding: 1rem;
        border-radius: 0.5rem;
        text-align: center;
        margin-bottom: 1rem;
        display: none;
      }

      /* Checkbox Styling */
      .form-check {
        display: flex;
        align-items: center;
        padding: 1rem;
        background: var(--pearl-white);
        border: 2px solid var(--border-color);
        border-radius: 0.75rem;
        transition: all 0.3s ease;
      }

      .form-check:hover {
        border-color: var(--emerald-primary);
        background: var(--mist-gray);
      }

      .form-check-input {
        margin: 0 !important;
        width: 1.2rem !important;
        height: 1.2rem !important;
        margin-right: 0.75rem !important;
        accent-color: var(--emerald-primary);
        cursor: pointer;
      }

      .form-check-label {
        margin: 0;
        cursor: pointer;
        user-select: none;
      }

      /* Radio Button Styling */
      .contact-method-options {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        margin-top: 0.5rem;
      }

      .form-check-radio {
        display: flex;
        align-items: center;
        padding: 1rem;
        background: var(--pearl-white);
        border: 2px solid var(--border-color);
        border-radius: 0.75rem;
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
      }

      .form-check-radio:hover {
        border-color: var(--emerald-primary);
        background: var(--mist-gray);
        transform: translateY(-1px);
      }

      .form-check-radio:has(.form-check-input-radio:checked) {
        border-color: var(--emerald-primary);
        background: var(--seafoam-light);
        box-shadow: 0 0 0 3px rgba(0, 166, 147, 0.1);
      }

      .form-check-input-radio {
        margin: 0 !important;
        width: 1.2rem !important;
        height: 1.2rem !important;
        margin-right: 0.75rem !important;
        accent-color: var(--emerald-primary);
        cursor: pointer;
      }

      .form-check-label-radio {
        margin: 0;
        cursor: pointer;
        user-select: none;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 500;
        color: var(--text-dark);
        width: 100%;
      }

      .form-check-label-radio i {
        font-size: 1.1rem;
        color: var(--emerald-primary);
      }

      /* Custom Modal Alert */
      .custom-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .custom-modal-overlay.show {
        opacity: 1;
        visibility: visible;
      }

      .custom-modal {
        background: white;
        border-radius: 1rem;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        max-width: 400px;
        width: 90%;
        max-height: 90vh;
        overflow: hidden;
        transform: scale(0.9) translateY(20px);
        transition: all 0.3s ease;
      }

      .custom-modal-overlay.show .custom-modal {
        transform: scale(1) translateY(0);
      }

      .custom-modal-header {
        padding: 1.5rem 1.5rem 1rem;
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }

      .custom-modal-icon {
        width: 3rem;
        height: 3rem;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
        flex-shrink: 0;
      }

      .custom-modal-icon.warning {
        background: #fef3c7;
        color: #d97706;
      }

      .custom-modal-icon.error {
        background: #fee2e2;
        color: #dc2626;
      }

      .custom-modal-icon.info {
        background: #dbeafe;
        color: #2563eb;
      }

      .custom-modal-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--text-dark);
        margin: 0;
      }

      .custom-modal-body {
        padding: 0 1.5rem 1.5rem;
      }

      .custom-modal-message {
        color: var(--text-light);
        line-height: 1.5;
        margin: 0;
      }

      .custom-modal-footer {
        padding: 1rem 1.5rem;
        background: var(--fred-bg);
        display: flex;
        justify-content: flex-end;
        gap: 0.75rem;
      }

      .custom-modal-button {
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        border: none;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .custom-modal-button.primary {
        background: var(--fred-primary);
        color: white;
      }

      .custom-modal-button.primary:hover {
        background: var(--fred-secondary);
        transform: translateY(-1px);
      }

      .custom-modal-button.secondary {
        background: white;
        color: var(--text-dark);
        border: 1px solid var(--border-color);
      }

      .custom-modal-button.secondary:hover {
        background: var(--fred-bg);
      }

      /* File Processing Indicators */
      .file-processing-indicator {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        padding: 1rem;
        background: #f3f4f6;
        border-radius: 0.5rem;
        margin-top: 1rem;
        color: var(--fred-primary);
        font-weight: 500;
      }

      .processing-spinner {
        width: 20px;
        height: 20px;
        border: 2px solid #e5e7eb;
        border-top: 2px solid var(--fred-primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      .file-processing {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        background: #f9fafb;
        border-radius: 0.5rem;
        min-height: 100px;
        position: relative;
      }

      .file-processing .processing-spinner {
        margin-bottom: 0.5rem;
      }

      .file-processing .processing-text {
        font-size: 0.8rem;
        color: var(--text-light);
      }

      .file-status {
        position: absolute;
        top: 5px;
        right: 30px;
        background: white;
        border-radius: 50%;
        padding: 2px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .file-status.success {
        color: var(--success-green);
      }

      .preview-item {
        position: relative;
      }

      .compression-note {
        position: absolute;
        bottom: 5px;
        left: 5px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        font-size: 0.7rem;
        padding: 2px 6px;
        border-radius: 3px;
        display: flex;
        align-items: center;
        gap: 3px;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .header-content {
          flex-direction: column;
          gap: 1rem;
          text-align: center;
        }

        .page-header h2 {
          font-size: 1.75rem;
          flex-direction: column;
          gap: 0.75rem;
        }

        .main-content {
          padding: 2rem 1rem;
        }

        .form-section {
          padding: 1.5rem;
        }

        .form-row {
          grid-template-columns: 1fr;
        }

        .location-coordinates {
          grid-template-columns: 1fr;
        }

        .submit-button {
          width: 100%;
          justify-content: center;
        }

        .detail-row {
          flex-direction: column;
          align-items: flex-start;
          gap: 0.25rem;
        }

        .map-controls {
          flex-direction: column;
          gap: 0.5rem;
        }

        .map-control-btn {
          font-size: 0.8rem;
          padding: 0.5rem 1rem;
        }

        .legend-items {
          grid-template-columns: 1fr;
          gap: 0.25rem;
        }

        .legend-item {
          font-size: 0.75rem;
        }

        #esriMapView {
          height: 450px !important;
        }

        .contact-method-options {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 480px) {
        #esriMapView {
          height: 500px !important;
        }
        
        #addressBar {
          display: none !important;
        }
        
        .boundary-legend {
          display: none !important;
        }
        
        .form-help {
          display: none !important;
        }
        
        .map-container {
          margin: 0.5rem 0 !important;
        }
        
        .location-input {
          padding: 0.5rem 0 !important;
        }
        
        .location-input h4 {
          font-size: 1.1rem !important;
          margin-bottom: 0.25rem !important;
        }
        
        .location-input p {
          font-size: 0.9rem !important;
          margin-bottom: 0.5rem !important;
        }
      }
      
      @media (max-width: 375px) {
        #esriMapView {
          height: 450px !important;
        }
        
        #esriMapView {
          border-width: 1px !important;
        }
      }
    </style>
  </head>
  <body>
    <!-- Hero -->
    <section id="hero">
      <div class="hero-content">
        <!-- Frederick logo -->
        <img src="https://www.cityoffrederickmd.gov/ImageRepository/Document?documentID=17591"
             alt="City of Frederick Logo"
             class="hero-logo"/>
        <p class="hero-text">
          Your city. Your voice. Report issues and help keep Frederick beautiful.
        </p>
      </div>
    </section>

    <!-- Submit 311 Service Request Header -->
    <section class="page-header">
      <div class="page-header-content">
        <h2 style="color: var(--emerald-deep); font-size:1.75rem; font-weight:600; display: flex; align-items: center; justify-content: center; gap:.75rem; margin-bottom: 0.5rem;">
          <span style="width:48px; height:48px; background-color: var(--fred-primary); border-radius:.75rem; font-size:1.25rem; color:white; display: inline-flex; align-items: center; justify-content: center;">
            <i class="bi bi-megaphone"></i>
          </span>
          Submit 311 Service Request
        </h2>
        <p style="color: var(--text-light); font-size:1rem; margin-bottom: 0;">
          Report community issues like graffiti or potholes. Help us keep our community clean and safe.
        </p>
      </div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Step Indicator -->
      <div class="step-indicator">
        <div class="step active" id="step1Indicator">
          <div class="step-number">1</div>
          <span>Request Type</span>
        </div>
        <div class="step-connector" id="connector1"></div>
        <div class="step inactive" id="step2Indicator">
          <div class="step-number">2</div>
          <span>Details & Location</span>
        </div>
      </div>

      <!-- Error Messages -->
      <div class="error-message" id="errorMessage">
        <i class="bi bi-exclamation-triangle me-2"></i>
        <span id="errorMessageText">There was an error processing your request. Please try again.</span>
      </div>

      <!-- STEP 1: Request Type Selection -->
      <div id="step1Content">
        <form class="service-request-form" id="requestTypeForm">
          <!-- Request Type -->
          <div class="form-section">
            <div class="section-header">
              <div class="section-icon">
                <i class="bi bi-list-check"></i>
              </div>
              <h3>What type of issue would you like to report?</h3>
            </div>

            <div class="form-group">
              <label class="form-label">
                Service Request Type <span class="required">*</span>
              </label>
              
              <!-- Hidden input to store selected value -->
              <input type="hidden" id="requestType" name="requestType" required>
              
              <!-- Service Type Categories - Compact List with Headers -->
              <div class="service-categories-list">
                <ul class="service-list">
                  <!-- Parking -->
                  <li class="category-header">
                    <i class="bi bi-car-front"></i> Parking
                  </li>
                  <li><button type="button" class="service-list-btn" data-value="Parking Issue"><i class="bi bi-p-square"></i> Parking Issue</button></li>
                  
                  <!-- Parks and Urban Forestry -->
                  <li class="category-header">
                    <i class="bi bi-tree"></i> Parks and Urban Forestry
                  </li>
                  <li><button type="button" class="service-list-btn" data-value="Park Concern"><i class="bi bi-exclamation-diamond"></i> Park Concern</button></li>
                  <li><button type="button" class="service-list-btn" data-value="Tree Issue"><i class="bi bi-tree"></i> Street Tree Issue</button></li>
                  
                  <!-- Public Works -->
                  <li class="category-header">
                    <i class="bi bi-tools"></i> Public Works
                  </li>
                  <!-- <li><button type="button" class="service-list-btn" data-value="General Issue"><i class="bi bi-gear"></i> General Issue</button></li> -->
                  <li><button type="button" class="service-list-btn" data-value="Safety Issue"><i class="bi bi-shield-exclamation"></i> Traffic / Safety Issue</button></li>
                  <li><button type="button" class="service-list-btn" data-value="Vandalism"><i class="bi bi-exclamation-diamond"></i> Vandalism</button></li>
                  <li><button type="button" class="service-list-btn" data-value="Sinkhole"><i class="bi bi-circle"></i> Sinkhole</button></li>
                  <!-- <li><button type="button" class="service-list-btn" data-value="Missing Utility Cover"><i class="bi bi-square-half"></i> Missing Utility Cover</button></li> -->
                  <li><button type="button" class="service-list-btn" data-value="Construction Site Issue"><i class="bi bi-hammer"></i> Construction Site Issue</button></li>
                  <li><button type="button" class="service-list-btn" data-value="Snow / Ice"><i class="bi bi-snow2"></i> Snow and Ice Issue</button></li>
                  
                  <!-- Stormwater -->
                  <li class="category-header">
                    <i class="bi bi-droplet"></i> Stormwater
                  </li>
                  <!-- <li><button type="button" class="service-list-btn" data-value="Flooding"><i class="bi bi-water"></i> Flooding</button></li> -->
                  <li><button type="button" class="service-list-btn" data-value="Illicit Discharge"><i class="bi bi-exclamation-triangle"></i> Suspected Pollution, Illicit Discharge, or Spill</button></li>
                  <li><button type="button" class="service-list-btn" data-value="General Stormwater Issue"><i class="bi bi-droplet-half"></i> Other Stormwater Issue</button></li>
                  <li><button type="button" class="service-list-btn" data-value="General Street Sweeping Issue"><i class="bi bi-signpost-2"></i> Street Sweeping Issue</button></li>
                  
                  <!-- Street Maintenance -->
                  <li class="category-header">
                    <i class="bi bi-cone-striped"></i> Street Maintenance
                  </li>
                  <li><button type="button" class="service-list-btn" data-value="Surface Issue / Pothole / Etc."><i class="bi bi-cone"></i> Roadway Issue / Potholes / Etc</button></li>
                  <li><button type="button" class="service-list-btn" data-value="Sidewalk"><i class="bi bi-person-walking"></i> Sidewalk Issue</button></li>
                  <li><button type="button" class="service-list-btn" data-value="Traffic Sign"><i class="bi bi-sign-stop"></i> Traffic Sign Issue</button></li>
                  <!-- <li><button type="button" class="service-list-btn" data-value="Pavement Marking Issue"><i class="bi bi-paint-bucket"></i> Pavement Marking Issue</button></li> -->
                  
                  <!-- Traffic Signals and Street Lights -->
                  <li class="category-header">
                    <i class="bi bi-stoplights"></i> Traffic Signals and Street Lights
                  </li>
                  <li><button type="button" class="service-list-btn" data-value="Traffic Signal Out"><i class="bi bi-stoplights"></i> Traffic Signal Issue</button></li>
                  <li><button type="button" class="service-list-btn" data-value="Street Light Broken"><i class="bi bi-lightbulb"></i> Street Light Issue</button></li>
                  <li><button type="button" class="service-list-btn" data-value="Wires Down"><i class="bi bi-lightning"></i> Wires Down</button></li>
                  
                  <!-- Waste Collection -->
                  <li class="category-header">
                    <i class="bi bi-trash"></i> Waste Collection
                  </li>
                  <li><button type="button" class="service-list-btn" data-value="Missed Trash"><i class="bi bi-trash3"></i> Missed Trash or Yard Waste</button></li>
                  <li><button type="button" class="service-list-btn" data-value="Bulk Pick Up - No Charge"><i class="bi bi-box-seam"></i> Bulk Pick Up</button></li>
                  <li><button type="button" class="service-list-btn" data-value="Bin Request - Repair/Replace"><i class="bi bi-recycle"></i> Toter Repair or Replace</button></li>
                  <!-- <li><button type="button" class="service-list-btn" data-value="Other Waste Collection Issue"><i class="bi bi-trash2"></i> Other Waste Collection Issue</button></li> -->
                  
                  <!-- Water / Sewer -->
                  <li class="category-header">
                    <i class="bi bi-water"></i> Water / Sewer
                  </li>
                  <!-- <li><button type="button" class="service-list-btn" data-value="Drinking Water Quality Issue"><i class="bi bi-cup-straw"></i> Drinking Water Quality Issue</button></li> -->
                  <!-- <li><button type="button" class="service-list-btn" data-value="No Water or Low Pressure"><i class="bi bi-droplet-fill"></i> No Water or Low Pressure</button></li> -->
                  <!-- <li><button type="button" class="service-list-btn" data-value="Water Leak"><i class="bi bi-moisture"></i> Water Leak</button></li> -->
                  <li><button type="button" class="service-list-btn" data-value="Sewer Backup"><i class="bi bi-funnel"></i> Sewer Back Up</button></li>
                  <li><button type="button" class="service-list-btn" data-value="General Water Issue"><i class="bi bi-water"></i> Other Water Issue</button></li>
                  <li><button type="button" class="service-list-btn" data-value="Sewer"><i class="bi bi-funnel-fill"></i> Other Sewer Issue</button></li>
                </ul>
              </div>

              <div class="form-help">
                <i class="bi bi-info-circle"></i>
                <span><strong>Click a button below</strong> to select the type of community issue you'd like to report. This helps us route your request to the right department.</span>
              </div>
            </div>
          </div>

          <div class="submit-section" style="display: flex; justify-content: center; flex-direction: column; align-items: center;">
            <button type="submit" class="continue-button" id="continueButton">
              <i class="bi bi-arrow-right"></i>
              Continue to Details
            </button>
            <div class="form-help" style="max-width: 500px; margin: 0 auto;">
              <i class="bi bi-info-circle"></i>
              <span>Select a service type above to continue with your request.</span>
            </div>
          </div>
        </form>
      </div>

      <!-- STEP 2: Full Form (Hidden initially) -->
      <div id="step2Content" class="hidden">
        <!-- Back Button and Request Type on Same Row -->
        <div class="step2-header">
          <button type="button" class="back-button" id="backButton">
            <i class="bi bi-arrow-left"></i>
            Back to Service Type
          </button>
          <div class="selected-request-type">
            <span id="selectedRequestTypeDisplay">Selected Service</span>
          </div>
        </div>

        <!-- Service Request Form -->
        <form class="service-request-form" id="serviceRequestForm">
        <!-- Anonymous Request Option -->
        <div class="form-section">
          <div class="section-header">
            <div class="section-icon">
              <i class="bi bi-person-x"></i>
            </div>
            <h3>Request Privacy</h3>
          </div>

          <div class="form-group">
            <div class="form-check">
              <input
                type="checkbox"
                id="anonymousRequest"
                name="anonymousRequest"
                class="form-check-input"
              />
              <label for="anonymousRequest" class="form-check-label">
                Submit as Anonymous Request
              </label>
            </div>
            <div class="form-help">
              <i class="bi bi-info-circle"></i>
              <span>
                Check this box to submit your request without providing contact information. Anonymous requests may take longer to resolve as we cannot contact you for additional details.
              </span>
            </div>
          </div>
        </div>

        <!-- Contact Information -->
        <div class="form-section" id="contactInformationSection">
          <div class="section-header">
            <div class="section-icon">
              <i class="bi bi-person-check"></i>
            </div>
            <h3>Contact Information</h3>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="firstName" class="form-label">
                First Name <span class="required">*</span>
              </label>
              <input
                type="text"
                id="firstName"
                name="firstName"
                class="form-control"
                placeholder="John"
                required
              />
            </div>
            <div class="form-group">
              <label for="lastName" class="form-label">
                Last Name <span class="required">*</span>
              </label>
              <input
                type="text"
                id="lastName"
                name="lastName"
                class="form-control"
                placeholder="Doe"
                required
              />
            </div>
          </div>

          <div class="form-group">
            <label for="phone" class="form-label">
              Phone Number <span class="required">*</span>
            </label>
            <input
              type="tel"
              id="phone"
              name="phone"
              class="form-control"
              placeholder="(850) 123-4567"
              required
            />
          </div>

          <div class="form-group">
            <label for="email" class="form-label">
              Email Address <span class="required">*</span>
            </label>
            <input
              type="email"
              id="email"
              name="email"
              class="form-control"
              placeholder="example@example.com"
              required
            />
          </div>

          <div class="form-group">
            <label for="followUp" class="form-label">
              Would you like a follow-up? <span class="required">*</span>
            </label>
            <select id="followUp" name="followUp" class="form-control form-select" required>
              <option value="">Select an option</option>
              <option value="Yes">Yes, I would like updates on my request</option>
              <option value="No">No, just submit the request</option>
            </select>
            <div class="form-help">
              <i class="bi bi-info-circle"></i>
              <span>Choose whether you'd like to receive updates about the status of your request</span>
            </div>
          </div>

          <div class="form-group" id="preferredContactMethodSection" style="display: none;">
            <label class="form-label">
              Preferred Contact Method <span class="required">*</span>
            </label>
            <div class="contact-method-options">
              <div class="form-check-radio">
                <input
                  type="radio"
                  id="contactEmail"
                  name="preferredContactMethod"
                  value="Email"
                  class="form-check-input-radio"
                />
                <label for="contactEmail" class="form-check-label-radio">
                  <i class="bi bi-envelope"></i>
                  Email
                </label>
              </div>
              <div class="form-check-radio">
                <input
                  type="radio"
                  id="contactText"
                  name="preferredContactMethod"
                  value="Text Message"
                  class="form-check-input-radio"
                />
                <label for="contactText" class="form-check-label-radio">
                  <i class="bi bi-chat-dots"></i>
                  Text Message
                </label>
              </div>
            </div>
            <div class="form-help">
              <i class="bi bi-info-circle"></i>
              <span>Choose how you'd like to receive updates about your request</span>
            </div>
          </div>
        </div>

        <!-- Form Sections -->
        <div id="additionalSections">
          <!-- Location Information -->
          <div class="form-section">
            <div class="section-header">
              <div class="section-icon">
                <i class="bi bi-geo-alt"></i>
              </div>
              <h3>Location Information</h3>
            </div>

            <!-- Address Search Field -->
            <div class="form-group">
              <label for="addressSearch" class="form-label">Search by Address</label>
              <div class="form-help">
                <i class="bi bi-info-circle"></i>
                <span>Type an address to get suggestions and automatically set the location on the map</span>
              </div>
              <input
                type="text"
                id="addressSearch"
                name="addressSearch"
                class="form-control"
                placeholder="Start typing an address in Frederick, MD..."
                autocomplete="off"
              />
            </div>

            <div class="form-group">
              <div class="location-input">
                <h4>Issue Location</h4>
                <p>Click on the map to pinpoint the exact location of the issue</p>
                
                <!-- ESRI ArcGIS Map Container -->
                <div class="map-container">
                  <div id="esriMapView" style="width: 100%; height: 450px; max-height: 450px; border: 2px solid var(--border-color); border-radius: 0.75rem;"></div>
                </div>
                
                <!-- Hidden Latitude and Longitude Inputs (data stored for form submission) -->
                <div class="location-coordinates" style="display: none;">
                  <div class="form-group">
                    <label for="latitude" class="form-label">Latitude</label>
                    <input
                      type="number"
                      id="latitude"
                      name="latitude"
                      class="form-control"
                      step="any"
                      placeholder="e.g., 39.4143"
                      readonly
                    />
                  </div>
                  <div class="form-group">
                    <label for="longitude" class="form-label">Longitude</label>
                    <input
                      type="number"
                      id="longitude"
                      name="longitude"
                      class="form-control"
                      step="any"
                      placeholder="e.g., -77.4106"
                      readonly
                    />
                  </div>
                </div>
                
                <!-- Map Controls -->
                <div class="map-controls">
                  <button type="button" class="map-control-btn" onclick="getCurrentLocation()">
                    <i class="bi bi-crosshair2"></i>
                    Use My Current Location
                  </button>
                  <!-- <button type="button" class="map-control-btn" onclick="clearLocation()">
                    <i class="bi bi-x-circle"></i>
                    Clear Location
                  </button>
                  <button type="button" class="map-control-btn" id="toggleExistingRequests" onclick="toggleExistingRequests()">
                    <i class="bi bi-eye-slash"></i>
                    Hide Existing Requests
                  </button> -->
                  <button type="button" class="map-control-btn" onclick="zoomToAllRequests()">
                    <i class="bi bi-arrows-fullscreen"></i>
                    Zoom to All Requests
                  </button>
                </div>

                <!-- Map Legend -->
                <div class="map-legend">
                  <h5><i class="bi bi-info-circle"></i> Map Legend</h5>
                  <div class="legend-items">
                    <div class="legend-item">
                      <div class="legend-marker" style="background-color: var(--fred-primary);"></div>
                      <span>Your selected location</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-marker" style="background-color: var(--fred-accent);"></div>
                      <span>Your current location</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-marker" style="background-color: rgb(249, 145, 0); border: 1px solid rgb(0, 55, 102);"></div>
                      <span>Open</span>
                    </div>
                    <div class="legend-item">
                      <div class="legend-marker" style="background-color: rgb(35, 150, 35); border: px solid rgb(0, 55, 102);"></div>
                      <span>Completed</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="form-help">
                <i class="bi bi-info-circle"></i>
                <span>Click on the map to select the location, use your current location, or manually enter coordinates. Orange markers show existing submitted requests in the area.</span>
              </div>
            </div>
          </div>

          <!-- Additional Information (Service-Specific Fields) -->
          <div class="form-section" id="additionalInfoSection" style="display: none;">
            <div class="section-header">
              <div class="section-icon">
                <i class="bi bi-wrench-adjustable"></i>
              </div>
              <h3>Additional Information</h3>
            </div>

            <!-- Toter Repair/Replace Fields -->
            <div id="toterFields" style="display: none;">
              <!-- Lead Time Notice Banner -->
              <div class="alert-banner" style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 0.5rem; padding: 1rem; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.75rem;">
                <div style="color: #856404; font-size: 1.25rem;">
                  <i class="bi bi-clock"></i>
                </div>
                <div style="color: #856404; font-weight: 600; font-size: 0.95rem;">
                  <strong>Please Note:</strong> Minimum of 1 week lead time for repair/replacement
                </div>
              </div>
              
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group" style="margin-bottom: 1rem;">
                    <label for="lidDamage" class="form-label">Lid Damage Only</label>
                    <select id="lidDamage" name="lidDamage" class="form-control">
                      <option value="">Select...</option>
                      <option value="Yes">Yes</option>
                      <option value="No">No</option>
                    </select>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group" style="margin-bottom: 1rem;">
                    <label for="toterBodyDamage" class="form-label">Toter Body Damage</label>
                    <select id="toterBodyDamage" name="toterBodyDamage" class="form-control">
                      <option value="">Select...</option>
                      <option value="Yes">Yes</option>
                      <option value="No">No</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="form-group" style="margin-bottom: 1rem;">
                    <label for="toterSerialNumber" class="form-label">Toter Serial Number <span id="toterSerialAsterisk" class="required" style="display: none;">*</span></label>
                    <input
                      type="text"
                      id="toterSerialNumber"
                      name="toterSerialNumber"
                      class="form-control"
                      placeholder="Serial number..."
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group" style="margin-bottom: 1rem;">
                    <label for="toterSize" class="form-label">Toter Size</label>
                    <select id="toterSize" name="toterSize" class="form-control">
                      <option value="">Select size...</option>
                      <option value="64 Gallon">64 Gallon</option>
                      <option value="96 Gallon">96 Gallon</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="form-group" style="margin-bottom: 1rem;">
                <label for="otherDamage" class="form-label">Other Damage</label>
                <input
                  type="text"
                  id="otherDamage"
                  name="otherDamage"
                  class="form-control"
                  placeholder="Describe any other damage..."
                />
              </div>

              <div class="form-help">
                <i class="bi bi-info-circle"></i>
                <span>Please provide details to help process your repair or replacement request.</span>
              </div>
            </div>

            <!-- Bulk Pickup Fields -->
            <div id="bulkPickupFields" style="display: none;">
              <!-- Bulk Pickup Information Banner -->
              <div class="alert-banner" style="background: #e8f4fd; border: 1px solid #bee5eb; border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 1.5rem;">
                <div style="color: #0c5460; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.75rem;">
                  <div style="font-size: 1.25rem;">
                    <i class="bi bi-info-circle"></i>
                  </div>
                  <div style="font-weight: 600; font-size: 1.1rem;">
                    Bulk Trash Pickup Information
                  </div>
                </div>
                
                <div style="color: #0c5460; line-height: 1.4;">
                  <div style="margin-bottom: 1rem;">
                    <strong>Acceptable Items:</strong><br>
                    Furniture; Appliances; Bicycles; Large Toys / Swing Sets; Mattress &amp; Box Springs (3 per household); Push Mowers, Weed Eaters, and Trimmers (fluids must be removed), Grills (tanks must be removed). All items must be 6&#39; or less in length.
                  </div>
                  
                  <div style="margin-bottom: 1rem;">
                    DPW staff will contact you with a confirmed collection day - <strong>do not set items out until your collection day has been scheduled</strong>. Confirmation of the collection day will be sent to the email you provided.
                  </div>
                  
                  <div style="margin-bottom: 0.5rem; font-weight: 600;">
                    <i class="bi bi-clock" style="margin-right: 0.5rem;"></i>
                    Please note: Minimum of 2 weeks lead time for bulk collection schedule.
                  </div>
                  
                  <div style="font-style: italic;">
                    <i class="bi bi-envelope-exclamation" style="margin-right: 0.5rem;"></i>
                    **Please check your spam/junk mail for responses if you do not hear from us.
                  </div>
                </div>
              </div>
              
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group" style="margin-bottom: 1rem;">
                    <label for="bulkPickupType" class="form-label">Pickup Type</label>
                    <select id="bulkPickupType" name="bulkPickupType" class="form-control">
                      <option value="">Select...</option>
                      <option value="No Charge">No Charge</option>
                      <option value="Prepaid">Prepaid</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="form-group" style="margin-bottom: 1rem;">
                <label for="bulkItems" class="form-label">List Items for Collection</label>
                <textarea
                  id="bulkItems"
                  name="bulkItems"
                  class="form-control"
                  rows="3"
                  placeholder="List items for collection (approximately 10 items)..."
                ></textarea>
              </div>

              <div class="form-help">
                <i class="bi bi-info-circle"></i>
                <span>Please provide details about your bulk pickup request to help us process it efficiently.</span>
              </div>
            </div>

            <!-- Park Concern Fields -->
            <div id="parkConcernFields" style="display: none;">
              <div class="form-group" style="margin-bottom: 1rem;">
                <label for="cityPark" class="form-label">City Park</label>
                <input
                  type="text"
                  id="cityPark"
                  name="cityPark"
                  class="form-control"
                  placeholder="Enter the name of the city park..."
                />
              </div>

              <div class="form-group" style="margin-bottom: 1rem;">
                <label for="parkFeatureLocation" class="form-label">Please specify the park feature or location</label>
                <textarea
                  id="parkFeatureLocation"
                  name="parkFeatureLocation"
                  class="form-control"
                  rows="3"
                  placeholder="Describe the specific park feature or location in detail..."
                ></textarea>
              </div>

              <div class="form-help">
                <i class="bi bi-info-circle"></i>
                <span>Please provide details about the park concern to help us locate and address the issue.</span>
              </div>
            </div>

            <!-- Pollution/Discharge/Spill Fields -->
            <div id="pollutionFields" style="display: none;">
              <!-- Pollution Reporting Information Banner -->
              <div class="alert-banner" style="background: #fef2f2; border: 1px solid #fecaca; border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 1.5rem;">
                <div style="color: #991b1b; margin-bottom: 1rem; display: flex; align-items: center; gap: 0.75rem;">
                  <div style="font-size: 1.25rem;">
                    <i class="bi bi-exclamation-triangle"></i>
                  </div>
                  <div style="font-weight: 600; font-size: 1.1rem;">
                    Pollution & Discharge Reporting
                  </div>
                </div>
                
                <div style="color: #7f1d1d; line-height: 1.4;">
                  <div style="margin-bottom: 1rem;">
                    Please let Public Works know if you see or smell unusual water discharges or appearances on the surface and in water channels and report illegal dumping, connections or local emergencies. We will address the issue promptly.
                  </div>
                  
                  <div style="margin-bottom: 1rem; padding: 0.75rem; background: #fee2e2; border-radius: 0.375rem; border: 1px solid #fca5a5;">
                    <div style="font-weight: 600; margin-bottom: 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
                      <i class="bi bi-telephone"></i>
                      <strong>Urgent Issues or After Hours:</strong>
                    </div>
                    <div style="margin-bottom: 0.5rem;">Call switchboard immediately at <strong>301-600-1160</strong></div>
                    <div style="display: flex; align-items: center; gap: 0.5rem; font-weight: 600;">
                      <i class="bi bi-shield-exclamation" style="color: #dc2626;"></i>
                      <span>If hazardous materials are involved call <strong style="color: #dc2626;">911</strong></span>
                    </div>
                  </div>
                  
                  <div style="font-size: 0.9rem; font-style: italic;">
                    <i class="bi bi-link-45deg" style="margin-right: 0.5rem;"></i>
                    For more information on illicit discharges see the Stormwater Management webpage:<br>
                    <a href="https://cityoffrederickmd.gov/stormwater" target="_blank" style="color: #991b1b; font-weight: 500; text-decoration: underline;">cityoffrederickmd.gov/stormwater</a>
                  </div>
                </div>
              </div>
              
              <div class="row">
                <div class="col-md-6">
                  <div class="form-group" style="margin-bottom: 1rem;">
                    <label for="dateTimeObserved" class="form-label">Date and Time Observed</label>
                    <input
                      type="datetime-local"
                      id="dateTimeObserved"
                      name="dateTimeObserved"
                      class="form-control"
                      max=""
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-group" style="margin-bottom: 1rem;">
                    <label for="estimatedQuantity" class="form-label">Estimated Quantity</label>
                    <input
                      type="number"
                      id="estimatedQuantity"
                      name="estimatedQuantity"
                      class="form-control"
                      placeholder="Enter quantity..."
                      step="0.01"
                      min="0"
                    />
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="form-group" style="margin-bottom: 1rem;">
                    <label for="hasEnteredDrain" class="form-label">Has it entered a storm drain or waterway?</label>
                    <select id="hasEnteredDrain" name="hasEnteredDrain" class="form-control">
                      <option value="">Select...</option>
                      <option value="Yes">Yes</option>
                      <option value="No">No</option>
                    </select>
                  </div>
                </div>
              </div>

              <div class="form-group" style="margin-bottom: 1rem;">
                <label for="areaOfConcern" class="form-label">Area of Concern <span id="areaOfConcernAsterisk" class="required" style="display: none;">*</span></label>
                <input
                  type="text"
                  id="areaOfConcern"
                  name="areaOfConcern"
                  class="form-control"
                  placeholder="Describe the area of concern..."
                  required
                />
              </div>

              <div class="form-group" style="margin-bottom: 1rem;">
                <label for="cleanupActions" class="form-label">List any containment or cleanup actions taken</label>
                <textarea
                  id="cleanupActions"
                  name="cleanupActions"
                  class="form-control"
                  rows="3"
                  placeholder="Describe any containment or cleanup actions that have been taken..."
                ></textarea>
              </div>

              <div class="form-help">
                <i class="bi bi-info-circle"></i>
                <span>Please provide details about the pollution, discharge, or spill to help us respond appropriately.</span>
              </div>
            </div>
          </div>

          <!-- Photos/File Attachments -->
          <div class="form-section">
            <div class="section-header">
              <div class="section-icon">
                <i class="bi bi-camera"></i>
              </div>
              <h3>Photos & Attachments</h3>
            </div>

            <div class="form-group">
              <label class="form-label">Upload Photos or Documents</label>
              <div class="photo-upload" id="photoUpload">
                <div class="upload-icon">
                  <i class="bi bi-cloud-upload"></i>
                </div>
                <h4>Drag & Drop Files Here</h4>
                <p>or click to browse files</p>
                <!-- Updated to explicitly include mobile image formats for better compatibility -->
                <input
                  type="file"
                  id="photoInput"
                  name="photos"
                  multiple
                  accept="image/*,.pdf,.heic,.heif,.webp" 
                  style="display: none"
                />
              </div>
              <div class="photo-preview" id="photoPreview"></div>
              <div class="form-help">
                <i class="bi bi-info-circle"></i>
                                <span>
                   Photos help our team assess the issue quickly. Accepted formats: JPG, PNG, GIF, WebP, HEIC, HEIF, PDF. Max 3 files, 10MB each.
                </span>
              </div>
            </div>
          </div>

          <!-- Additional Comments -->
          <div class="form-section">
            <div class="section-header">
              <div class="section-icon">
                <i class="bi bi-chat-left-text"></i>
              </div>
              <h3>Request Details</h3>
            </div>

            <div class="form-group">
              <label for="requestDescription" class="form-label">
                Request Description <span class="required">*</span>
              </label>
              <textarea
                id="requestDescription"
                name="requestDescription"
                class="form-control"
                rows="5"
                placeholder="Please provide any additional details about the issue, such as size, severity, safety concerns, or specific location details that would help our team..."
                required
              ></textarea>
              <div class="form-help">
                <i class="bi bi-info-circle"></i>
                <span>
                  Please describe the issue in detail to help our team understand and resolve it more effectively
                </span>
              </div>
            </div>
          </div>

          <!-- reCAPTCHA v2 Section (like working example) -->
          <div class="form-section">
            <div class="g-recaptcha" 
                 data-sitekey="6LftwGwaAAAAAIjIRFgI-UuqjtuaUJ3LXBFXTNBj"
                 data-callback="onRecaptchaSuccess"
                 data-expired-callback="onRecaptchaExpired"
                 data-error-callback="onRecaptchaError"></div>
          </div>

          <!-- Submit Section -->
          <div class="submit-section">
            <button type="submit" class="submit-button" id="submitButton" disabled>
              <i class="bi bi-send"></i>
              <span id="submitButtonText">Complete reCAPTCHA to Submit</span>
            </button>

            <div class="submit-help">
              Once submitted, you'll receive a confirmation email with your request details.
              <br><small class="text-muted mt-2 d-block">This site is protected by reCAPTCHA and the Google 
              <a href="https://policies.google.com/privacy" target="_blank">Privacy Policy</a> and 
              <a href="https://policies.google.com/terms" target="_blank">Terms of Service</a> apply.</small>
            </div>
          </div>
        </div>
      </form>
      </div> <!-- End step2Content -->
    </main>

    <!-- Success Modal -->
    <div class="success-modal" id="successModal">
      <div class="success-modal-content">
        <div class="success-modal-header">
          <button class="close-btn" onclick="closeSuccessModal()">
            <i class="bi bi-x"></i>
          </button>
          <div class="success-icon">
            <i class="bi bi-check-circle-fill"></i>
          </div>
          <h3 id="modalTitle">Request Submitted Successfully!</h3>
          <p id="modalSubtitle">Your 311 service request has been received</p>
        </div>

        <div class="modal-body">
          <div class="request-details">
            <!-- Anonymous indicator (hidden by default) -->
            <div class="detail-row" id="anonymousIndicator" style="display: none;">
              <span class="detail-label">Request Status:</span>
              <span class="detail-value" style="color: var(--emerald-primary); font-weight: 600;">
                <i class="bi bi-person-x"></i> Anonymous Request
              </span>
            </div>
            
            <div class="detail-row">
              <span class="detail-label">Request Type:</span>
              <span class="detail-value" id="requestTypeValue"></span>
            </div>
            
            <!-- Location details (for anonymous requests) -->
            <div class="detail-row" id="locationRow" style="display: none;">
              <span class="detail-label">Location:</span>
              <span class="detail-value" id="locationValue"></span>
            </div>
            
            <!-- Request description (for anonymous requests) -->
            <div class="detail-row" id="descriptionRow" style="display: none;">
              <span class="detail-label">Description:</span>
              <span class="detail-value description" id="descriptionValue"></span>
            </div>
            
            <!-- Contact information (for regular requests) -->
            <div class="detail-row" id="contactNameRow">
              <span class="detail-label">Contact Name:</span>
              <span class="detail-value" id="contactNameValue"></span>
            </div>
            <div class="detail-row" id="emailRow">
              <span class="detail-label">Email:</span>
              <span class="detail-value" id="emailValue"></span>
            </div>
            <div class="detail-row" id="phoneRow">
              <span class="detail-label">Phone:</span>
              <span class="detail-value" id="phoneValue"></span>
            </div>
          </div>

          <!-- Next steps for regular requests -->
          <div class="next-steps" id="regularNextSteps">
            <h4>
              <i class="bi bi-info-circle"></i>
              What happens next?
            </h4>
            <ul>
              <li>You'll receive a confirmation email within 15 minutes</li>
              <li>We'll contact you with updates on the resolution</li>
              <li>Track your request status in your customer portal</li>
            </ul>
          </div>

          <!-- Next steps for anonymous requests -->
          <div class="next-steps" id="anonymousNextSteps" style="display: none;">
            <h4>
              <i class="bi bi-info-circle"></i>
              What happens next?
            </h4>
            <ul>
              <li>Your anonymous request has been submitted to our team</li>
              <li>We'll investigate and work to resolve the issue you reported</li>
              <li>Since this is anonymous, you won't receive direct updates</li>
              <li>You can check general service updates on our website</li>
            </ul>
          </div>
        </div>

        <div class="modal-actions">
          <a href="#" onclick="closeSuccessModal(); return false;" class="action-btn">
            <i class="bi bi-check"></i>
            Close
          </a>
        </div>
      </div>
    </div>

    <!-- Completion Overlay (shown after modal closes) -->
    <div class="completion-overlay" id="completionOverlay">
      <div class="completion-message">
        <div class="success-icon">
          <i class="bi bi-check-circle-fill"></i>
        </div>
        <h3>Request Sent!</h3>
        <p>Preparing form for your next submission...</p>
      </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- CryptoJS for token decryption -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- ESRI ArcGIS API JavaScript -->
    <script src="https://js.arcgis.com/4.28/"></script>
    <script>
      // Global variables
      const ESRI_API_KEY = "AAPTxy8BH1VEsoebNVZXo8HurBvtyt2ioKVD5bZspMKd8q01ez4P4pnexIsLxED5QwdokgYtzSpZ3_x6AbNXL0HHHhEs_BdOrCm1GY0ZjzvLQOXoMPh8ZVhdlnyLCuZmtCOsYap7Ob0Ntxhrrb8FMTpe4e7A9-LSBdP8rCU_Nv07hohfscHcsUSvmcVTXvSUEcT_825x30CdBC5Gy3owABLpdDSYa6uglR2oHZOggwSfalk.AT1_taqUo7tu";
      const aesKEY = "UjXn2r5u8x!A%D*G-KaPdSgVkYp3s6v9";
      
      // Configure ESRI API Key globally as soon as the API loads
      require(["esri/config"], function(esriConfig) {
        esriConfig.apiKey = ESRI_API_KEY;
        
        // Maximum permissive ESRI configuration for all browsers
        try {
          // Completely disable CORS restrictions
          esriConfig.request.corsEnabledServers = true;
          esriConfig.request.corsDetection = false;
          esriConfig.request.proxyUrl = null;
          esriConfig.request.alwaysUseProxy = false;
          esriConfig.request.forceCORS = false;
          esriConfig.request.useIdentity = false;
          
          // Set permissive request settings
          esriConfig.request.timeout = 60000; // Increased timeout
          esriConfig.request.maxUrlLength = 8192; // Increased URL length
          esriConfig.request.httpsDomains = []; // Allow HTTP fallback
          
          // Disable all authentication and security checks
          if (esriConfig.identity) {
            esriConfig.identity.useSignInPage = false;
          }
          
          // Override any existing interceptors
          esriConfig.request.interceptors = [];
          
          console.log("Maximum permissive ESRI configuration applied");
        } catch (error) {
          console.warn("ESRI configuration warning:", error);
        }
        
        // Browser-specific configuration for maximum compatibility
        const userAgent = navigator.userAgent.toLowerCase();
        if (userAgent.indexOf('firefox') > -1 || userAgent.indexOf('safari') > -1 || /mobile|android|iphone|ipad/.test(userAgent)) {
          esriConfig.request.corsDetection = false;
          esriConfig.request.trustedServers = ["*"];
          esriConfig.request.interceptors = [];
          console.log("Browser-specific ESRI configuration applied for:", userAgent.indexOf('firefox') > -1 ? 'Firefox' : userAgent.indexOf('safari') > -1 ? 'Safari' : 'Mobile');
        }
        
        console.log("ESRI Configuration completed with CORS settings");
      });
      const SERVER_URL_PAGE = "https://api.ignatius.io";
      const PUBLIC_REQUESTS_TABLEKEY = "msfxaraq3"; // Public Requests Table
      const REQUEST_EAM_REPORT_REPORT_ID = "vygamxbq7"; // Request EAM Report Report
      
      // Function to clear expired or corrupted tokens
      function clearStoredTokens() {
        try {
          localStorage.removeItem("token");
          localStorage.removeItem("UserName");
          console.log("Cleared stored authentication tokens");
        } catch (error) {
          console.error("Error clearing tokens:", error);
        }
      }

      // Function to safely load and validate stored tokens
      function loadStoredTokens() {
        let token = null;
        let email = null;
        
        try {
          const encryptedToken = localStorage.getItem("token");
          if (encryptedToken) {
            token = CryptoJS.AES.decrypt(encryptedToken, aesKEY).toString(CryptoJS.enc.Utf8);
            
            // Validate token format (should be JWT)
            if (token && token.split('.').length !== 3) {
              console.warn("Invalid token format, clearing...");
              clearStoredTokens();
              return { token: null, email: null };
            }
          }
        } catch (error) {
          console.warn("Error decrypting token, clearing stored data:", error);
          clearStoredTokens();
          return { token: null, email: null };
        }

        try {
          const encryptedUserName = localStorage.getItem("UserName");
          if (encryptedUserName) {
            email = CryptoJS.AES.decrypt(encryptedUserName, aesKEY).toString(CryptoJS.enc.Utf8);
          }
        } catch (error) {
          console.warn("Error decrypting username, clearing stored data:", error);
          clearStoredTokens();
          return { token: null, email: null };
        }

        return { token, email };
      }

      // App version for cache management
      const APP_VERSION = "1.2.8";
      
      // Public user configuration
      const PUBLIC_USER_EMAIL = "public@ignatius.io";
      const APP_ID = "sxol7egq1"; // Frederick MD 311 app ID
      
      // reCAPTCHA v2 configuration (like working example)
      const RECAPTCHA_SITE_KEY = "6LftwGwaAAAAAIjIRFgI-UuqjtuaUJ3LXBFXTNBj";
      
      // Simple reCAPTCHA v2 callbacks (like working example)
      window.onRecaptchaSuccess = function(token) {
        console.log("✅ reCAPTCHA v2 completed successfully");
        console.log("📏 Token length:", token ? token.length : 0, "characters");
        console.log("🔍 Token preview:", token ? token.substring(0, 100) + "..." : "null");
        
        // Check if token is too long for GET request
        if (token && token.length > 2000) {
          console.warn("⚠️ reCAPTCHA token is very long (" + token.length + " chars) - this may cause URL length issues");
        }
        
        enableSubmitButton();
        
        // Generate access token immediately (like working example)
        generatePublicTokenWithRecaptcha(token);
      };
      
      window.onRecaptchaExpired = function() {
        console.log("❌ reCAPTCHA expired");
        disableSubmitButton();
      };
      
      window.onRecaptchaError = function() {
        console.log("❌ reCAPTCHA error occurred");
        disableSubmitButton();
      };
      
      // Execute reCAPTCHA v2 and get token (like working example)
      async function executeRecaptcha() {
        const response = grecaptcha.getResponse();
        if (!response || response === "") {
          throw new Error("Please complete the reCAPTCHA verification.");
        }
        return response;
      }
      
      // Invisible reCAPTCHA callback functions (TEMPORARILY COMMENTED OUT FOR TESTING)
      /*
      window.onInvisibleRecaptchaSuccess = function(token) {
        console.log("Invisible reCAPTCHA completed successfully for step transition");
        stepTransitionToken = token;
        
        // Generate public token for map data access
        generatePublicTokenWithRecaptcha(token).then(success => {
          if (success) {
            console.log("Step transition token generated - map data access enabled");
          } else {
            console.warn("Failed to generate step transition token");
          }
        });
      };
      
      window.onInvisibleRecaptchaExpired = function() {
        console.log("Invisible reCAPTCHA expired");
        stepTransitionToken = null;
      };
      
      window.onInvisibleRecaptchaError = function() {
        console.log("Invisible reCAPTCHA error occurred");
        stepTransitionToken = null;
      };
      */
      
      // reCAPTCHA v3 doesn't need callback functions - tokens are generated on demand
      
      // Function to generate public token immediately on page load (without reCAPTCHA)
      async function generatePublicTokenOnLoad() {
        try {
          console.log("Generating public access token on page load...");
          
          // For the public token API, we need to check if it supports getting a token without reCAPTCHA
          // If not, we'll need to use a different approach or endpoint
          
          // First, try to use any existing valid token
          const storedToken = localStorage.getItem("token");
          if (storedToken) {
            try {
              const decryptedToken = CryptoJS.AES.decrypt(storedToken, aesKEY).toString(CryptoJS.enc.Utf8);
              if (decryptedToken && !isTokenExpired(decryptedToken)) {
                userToken = decryptedToken;
                const storedEmail = localStorage.getItem("UserName");
                if (storedEmail) {
                  userEmail = CryptoJS.AES.decrypt(storedEmail, aesKEY).toString(CryptoJS.enc.Utf8);
                }
                console.log("Using existing valid public token");
                return true;
              }
            } catch (error) {
              console.log("Stored token invalid, will generate new one");
            }
          }
          
          // Backend API requires reCAPTCHA token, so we can't generate without it
          console.log("Backend requires reCAPTCHA token for public token generation");
          console.log("Will wait for reCAPTCHA completion for token generation");
          
          return false;
        } catch (error) {
          console.log("Error in generatePublicTokenOnLoad:", error);
          return false;
        }
      }
      
      // Function to generate public token with reCAPTCHA (simplified like working example)
      async function generatePublicTokenWithRecaptcha(recaptchaToken) {
        try {
          console.log("🔄 Generating public token with reCAPTCHA...");
          console.log("📏 Token length:", recaptchaToken ? recaptchaToken.length : 0, "characters");
          
          // Build the URL like the working example (with proper encoding)
          const encodedToken = encodeURIComponent(recaptchaToken);
          const url = `https://api.ignatius.io/api/user/publictoken?appId=${APP_ID}&token=${encodedToken}`;
          console.log("🔗 Original token length:", recaptchaToken.length, "characters");
          console.log("🔗 Encoded token length:", encodedToken.length, "characters");
          console.log("🔗 Final URL length:", url.length, "characters");
          
          if (url.length > 2000) {
            console.warn("⚠️ URL is very long (" + url.length + " chars) - may cause issues");
          }
          
          // Simple GET request like the working example
          const response = await $.get(url);
          
          console.log("📡 API Response:", response);
          
          if (response && response.access_token) {
            // Store the token and user info
            const encryptedToken = CryptoJS.AES.encrypt(response.access_token, aesKEY).toString();
            localStorage.setItem("token", encryptedToken);
            
            const encryptedUserName = CryptoJS.AES.encrypt(PUBLIC_USER_EMAIL, aesKEY).toString();
            localStorage.setItem("UserName", encryptedUserName);

            // Update global variables
            userToken = response.access_token;
            userEmail = PUBLIC_USER_EMAIL;

            console.log("✅ Public token generated successfully");
            
            // If map is already loaded, try to load existing requests now
            if (esriMapView && typeof loadExistingServiceRequests === 'function') {
              console.log("🗺️ Loading existing requests with new token...");
              loadExistingServiceRequests();
            } else {
              console.log("🗺️ Map not ready or loadExistingServiceRequests not available");
            }
            
            return true;
          }
          return false;
        } catch (error) {
          console.error("❌ Failed to generate public token:", error);
          return false;
        }
      }
      
      // reCAPTCHA v3 doesn't have expired/error callbacks like v2
      
      // Function to enable submit button
      function enableSubmitButton() {
        const submitButton = document.getElementById('submitButton');
        const submitButtonText = document.getElementById('submitButtonText');
        if (submitButton && submitButtonText) {
          submitButton.disabled = false;
          submitButton.style.opacity = '1';
          submitButton.style.cursor = 'pointer';
          submitButtonText.textContent = 'Submit Service Request';
          submitButton.classList.remove('disabled');
        }
      }
      
      // Function to disable submit button
      function disableSubmitButton() {
        const submitButton = document.getElementById('submitButton');
        const submitButtonText = document.getElementById('submitButtonText');
        if (submitButton && submitButtonText) {
          submitButton.disabled = true;
          submitButton.style.opacity = '0.6';
          submitButton.style.cursor = 'not-allowed';
          submitButtonText.textContent = 'Preparing Security Verification...';
          submitButton.classList.add('disabled');
        }
      }
      
      // Initialize reCAPTCHA v2 (simple like working example)
      document.addEventListener('DOMContentLoaded', function() {
        // Start with submit button disabled until reCAPTCHA is completed
        disableSubmitButton();
      });
      
      // Check if app version has changed and clear cache if needed
      function checkAppVersion() {
        const storedVersion = localStorage.getItem("appVersion");
        if (storedVersion !== APP_VERSION) {
          console.log(`App updated from ${storedVersion || 'unknown'} to ${APP_VERSION}, clearing cache...`);
          clearStoredTokens();
          localStorage.setItem("appVersion", APP_VERSION);
          return true; // Cache was cleared
        }
        return false; // No cache clear needed
      }
      
      // Check version first, then load tokens
      const cacheCleared = checkAppVersion();
      const tokenData = cacheCleared ? { token: null, email: null } : loadStoredTokens();
      
      // Declare as let so they can be reassigned during authentication
      let userToken = tokenData.token;
      let userEmail = tokenData.email;

      // Function to check if current user has anonymous role
      function isAnonymousUser() {
        try {
          // Check if userEmail indicates anonymous/public user
          if (userEmail === PUBLIC_USER_EMAIL) {
            return true;
          }
          return false;
        } catch (error) {
          console.error("Error checking anonymous user role:", error);
          return false;
        }
      }

      // Function to authenticate as anonymous user using public token API
      async function authenticateAnonymousUser(recaptchaToken = null) {
        try {
          // If reCAPTCHA token provided, use it for form submission
          if (recaptchaToken) {
            return await generatePublicTokenWithRecaptcha(recaptchaToken);
          }
          
          // For initial authentication (viewing), try to generate token without reCAPTCHA
          const tokenGenerated = await generatePublicTokenOnLoad();
          if (tokenGenerated) {
            console.log("Anonymous user authenticated successfully with public token");
            return true;
          }
          
          // If token generation failed, fall back to basic authentication
          return await authenticateWithoutRecaptcha();
        } catch (error) {
          console.error("Failed to authenticate anonymous user:", error);
          return false;
        }
      }
      
      // Fallback authentication without reCAPTCHA (for initial page load)
      async function authenticateWithoutRecaptcha() {
        try {
          console.log("Attempting fallback authentication for initial page load...");
          
          // Check if we have a valid stored token first
          const storedToken = localStorage.getItem("token");
          if (storedToken) {
            try {
              const decryptedToken = CryptoJS.AES.decrypt(storedToken, aesKEY).toString(CryptoJS.enc.Utf8);
              if (decryptedToken && !isTokenExpired(decryptedToken)) {
                userToken = decryptedToken;
                const storedEmail = localStorage.getItem("UserName");
                if (storedEmail) {
                  userEmail = CryptoJS.AES.decrypt(storedEmail, aesKEY).toString(CryptoJS.enc.Utf8);
                }
                console.log("Using valid stored token for fallback authentication");
                return true;
              }
            } catch (error) {
              console.log("Stored token invalid or expired");
            }
          }
          
          // Set minimal user info for public access
          userEmail = PUBLIC_USER_EMAIL;
          console.log("Fallback authentication set for public viewing");
          return false; // No token available, but user info is set
        } catch (error) {
          console.error("Fallback authentication failed:", error);
          return false;
        }
      }

      // Function to check if token is expired or invalid
      function isTokenExpired(token) {
        if (!token) return true;
        
        try {
          const tokenParts = token.split('.');
          
          // Handle JWE tokens (encrypted JWT) which have 5 parts
          if (tokenParts.length === 5) {
            // This is a JWE token - we can't decode it client-side
            // For now, assume it's valid if it exists and is recent
            console.log("JWE token detected - assuming valid");
            return false;
          } else if (tokenParts.length === 3) {
            // This is a regular JWT token
            const payload = JSON.parse(atob(tokenParts[1]));
            const currentTime = Math.floor(Date.now() / 1000);
            
            // Check if token has expiration and if it's expired
            if (payload.exp && payload.exp < currentTime) {
              console.log("Token expired at:", new Date(payload.exp * 1000));
              return true;
            }
            
            return false;
          } else {
            console.warn("Invalid token format - expected 3 or 5 parts, got:", tokenParts.length);
            return true;
          }
        } catch (error) {
          console.warn("Could not decode token, treating as expired:", error);
          return true;
        }
      }

      // Function to ensure user is authenticated (auto-authenticate if needed)
      async function ensureAuthenticated() {
        // Get current stored tokens
        const { token: currentToken, email: currentEmail } = loadStoredTokens();
        
        // Check if we have a valid, non-expired token
        if (currentToken && currentEmail && !isTokenExpired(currentToken)) {
          // Update global variables with current valid tokens
          userToken = currentToken;
          userEmail = currentEmail;
          return true;
        }

        // Token is missing, expired, or invalid - clear and re-authenticate
        if (currentToken && isTokenExpired(currentToken)) {
          console.log("Token expired, clearing cache and re-authenticating...");
          clearStoredTokens();
        } else if (currentToken) {
          console.log("Invalid token found, clearing cache and re-authenticating...");
          clearStoredTokens();
        } else {
          console.log("No authentication found, attempting anonymous authentication...");
        }
        
        return await authenticateAnonymousUser();
      }

      // Function to create 311 service request record
      async function createServiceRequest(serviceRequestData) {
        // Check if we already have a valid token from reCAPTCHA completion
        if (userToken && !isTokenExpired(userToken)) {
          console.log("Using existing token from reCAPTCHA completion for form submission");
        } else {
          // For form submission, we need reCAPTCHA verification
          let recaptchaToken;
          try {
            recaptchaToken = await executeRecaptcha();
          } catch (error) {
            throw new Error("Please complete the reCAPTCHA verification before submitting.");
          }
          
          // Generate fresh token with reCAPTCHA for form submission
          const isAuthenticated = await authenticateAnonymousUser(recaptchaToken);
          if (!isAuthenticated) {
            throw new Error("Unable to authenticate user. Please complete the reCAPTCHA and try again.");
          }
        }

        // Create fieldsList array for API submission
        const fieldsList = [
          {
            Name: "request_category",
            Value: serviceRequestData.requestInfo.requestType
          },
          {
            Name: "anonymous_request",
            Value: serviceRequestData.requestInfo.isAnonymous
          },
          {
            Name: "request_status",
            Value: serviceRequestData.requestInfo.status
          },
          {
            Name: "latitude",
            Value: serviceRequestData.locationInfo.latitude
          },
          {
            Name: "longitude",
            Value: serviceRequestData.locationInfo.longitude
          },
          {
            Name: "request_address",
            Value: serviceRequestData.locationInfo.address || ""
          },
          {
            Name: "contact_first_name",
            Value: serviceRequestData.requestInfo.isAnonymous ? "" : (serviceRequestData.contactInfo.firstName || "")
          },
          {
            Name: "contact_last_name",
            Value: serviceRequestData.requestInfo.isAnonymous ? "" : (serviceRequestData.contactInfo.lastName || "")
          },
          {
            Name: "contact_phone",
            Value: serviceRequestData.requestInfo.isAnonymous ? "" : (serviceRequestData.contactInfo.phone || "")
          },
          {
            Name: "contact_email",
            Value: serviceRequestData.requestInfo.isAnonymous ? "" : (serviceRequestData.contactInfo.email || "")
          },
          {
            Name: "contact_follow_up",
            Value: serviceRequestData.requestInfo.isAnonymous ? "" : (serviceRequestData.contactInfo.followUp || "")
          },
          {
            Name: "preferred_contact_method",
            Value: serviceRequestData.requestInfo.isAnonymous ? "" : (serviceRequestData.contactInfo.preferredContactMethod || "")
          },
          {
            Name: "description",
            Value: serviceRequestData.detailsInfo.requestDescription
          }
        ];

        // Add Additional Information fields based on service type
        if (serviceRequestData.requestInfo.requestType === 'Toter Repair or Replace') {
          // Add populated toter fields
          fieldsList.push({
            Name: "lid_damage_only",
            Value: serviceRequestData.additionalInfo.lidDamage || ""
          });
          
          fieldsList.push({
            Name: "toter_body_damage", 
            Value: serviceRequestData.additionalInfo.toterBodyDamage || ""
          });
          
          fieldsList.push({
            Name: "toter___other_damage",
            Value: serviceRequestData.additionalInfo.otherDamage || ""
          });
          
          fieldsList.push({
            Name: "toter_serial_number",
            Value: serviceRequestData.additionalInfo.toterSerialNumber || ""
          });
          
          fieldsList.push({
            Name: "toter_size",
            Value: serviceRequestData.additionalInfo.toterSize || ""
          });
          
          fieldsList.push({
            Name: "no_charge_or_prepaid",
            Value: ""
          });
          
          fieldsList.push({
            Name: "list_items_for_collection___approx_10_items",
            Value: ""
          });
          
          fieldsList.push({
            Name: "city_park",
            Value: ""
          });
          
          fieldsList.push({
            Name: "please_specify_the_park_feature_or_location",
            Value: ""
          });
          
          fieldsList.push({
            Name: "date_and_time_observed",
            Value: ""
          });
          
          fieldsList.push({
            Name: "area_of_concern",
            Value: ""
          });
          
          fieldsList.push({
            Name: "estimated_quantity",
            Value: ""
          });
          
          fieldsList.push({
            Name: "has_it_entered_a_storm_drain_or_waterway",
            Value: ""
          });
          
          fieldsList.push({
            Name: "list_any_containment_or_cleanup_actions_taken",
            Value: ""
          });
          
        } else if (serviceRequestData.requestInfo.requestType === 'Bulk Pick Up') {
          fieldsList.push({
            Name: "lid_damage_only",
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter_body_damage",
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter___other_damage", 
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter_serial_number",
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter_size",
            Value: ""
          });
          
          fieldsList.push({
            Name: "no_charge_or_prepaid",
            Value: serviceRequestData.additionalInfo.bulkPickupType || ""
          });
          
          fieldsList.push({
            Name: "list_items_for_collection___approx_10_items",
            Value: serviceRequestData.additionalInfo.bulkItems || ""
          });
          
          fieldsList.push({
            Name: "city_park",
            Value: ""
          });
          
          fieldsList.push({
            Name: "please_specify_the_park_feature_or_location",
            Value: ""
          });
          
          fieldsList.push({
            Name: "date_and_time_observed",
            Value: ""
          });
          
          fieldsList.push({
            Name: "area_of_concern",
            Value: ""
          });
          
          fieldsList.push({
            Name: "estimated_quantity",
            Value: ""
          });
          
          fieldsList.push({
            Name: "has_it_entered_a_storm_drain_or_waterway",
            Value: ""
          });
          
          fieldsList.push({
            Name: "list_any_containment_or_cleanup_actions_taken",
            Value: ""
          });
          
        } else if (serviceRequestData.requestInfo.requestType === 'Park Concern') {
          fieldsList.push({
            Name: "lid_damage_only",
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter_body_damage",
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter___other_damage", 
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter_serial_number",
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter_size",
            Value: ""
          });
          
          fieldsList.push({
            Name: "no_charge_or_prepaid",
            Value: ""
          });
          
          fieldsList.push({
            Name: "list_items_for_collection___approx_10_items",
            Value: ""
          });
          
          fieldsList.push({
            Name: "city_park",
            Value: serviceRequestData.additionalInfo.cityPark || ""
          });
          
          fieldsList.push({
            Name: "please_specify_the_park_feature_or_location",
            Value: serviceRequestData.additionalInfo.parkFeatureLocation || ""
          });
          
          fieldsList.push({
            Name: "date_and_time_observed",
            Value: ""
          });
          
          fieldsList.push({
            Name: "area_of_concern",
            Value: ""
          });
          
          fieldsList.push({
            Name: "estimated_quantity",
            Value: ""
          });
          
          fieldsList.push({
            Name: "has_it_entered_a_storm_drain_or_waterway",
            Value: ""
          });
          
          fieldsList.push({
            Name: "list_any_containment_or_cleanup_actions_taken",
            Value: ""
          });
          
        } else if (serviceRequestData.requestInfo.requestType === 'Suspected Pollution, Illicit Discharge, or Spill') {
          fieldsList.push({
            Name: "lid_damage_only",
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter_body_damage",
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter___other_damage", 
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter_serial_number",
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter_size",
            Value: ""
          });
          
          fieldsList.push({
            Name: "no_charge_or_prepaid",
            Value: ""
          });
          
          fieldsList.push({
            Name: "list_items_for_collection___approx_10_items",
            Value: ""
          });
          
          fieldsList.push({
            Name: "city_park",
            Value: ""
          });
          
          fieldsList.push({
            Name: "please_specify_the_park_feature_or_location",
            Value: ""
          });
          
          fieldsList.push({
            Name: "date_and_time_observed",
            Value: serviceRequestData.additionalInfo.dateTimeObserved || ""
          });
          
          fieldsList.push({
            Name: "area_of_concern",
            Value: serviceRequestData.additionalInfo.areaOfConcern || ""
          });
          
          fieldsList.push({
            Name: "estimated_quantity",
            Value: serviceRequestData.additionalInfo.estimatedQuantity || ""
          });
          
          fieldsList.push({
            Name: "has_it_entered_a_storm_drain_or_waterway",
            Value: serviceRequestData.additionalInfo.hasEnteredDrain || ""
          });
          
          fieldsList.push({
            Name: "list_any_containment_or_cleanup_actions_taken",
            Value: serviceRequestData.additionalInfo.cleanupActions || ""
          });
          
        } else {
          fieldsList.push({
            Name: "lid_damage_only",
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter_body_damage",
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter___other_damage", 
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter_serial_number",
            Value: ""
          });
          
          fieldsList.push({
            Name: "toter_size",
            Value: ""
          });
          
          fieldsList.push({
            Name: "no_charge_or_prepaid",
            Value: ""
          });
          
          fieldsList.push({
            Name: "list_items_for_collection___approx_10_items",
            Value: ""
          });
          
          fieldsList.push({
            Name: "city_park",
            Value: ""
          });
          
          fieldsList.push({
            Name: "please_specify_the_park_feature_or_location",
            Value: ""
          });
          
          fieldsList.push({
            Name: "date_and_time_observed",
            Value: ""
          });
          
          fieldsList.push({
            Name: "area_of_concern",
            Value: ""
          });
          
          fieldsList.push({
            Name: "estimated_quantity",
            Value: ""
          });
          
          fieldsList.push({
            Name: "has_it_entered_a_storm_drain_or_waterway",
            Value: ""
          });
          
          fieldsList.push({
            Name: "list_any_containment_or_cleanup_actions_taken",
            Value: ""
          });
        }

        // Add image fields for uploaded files (max 3 files) 
        for (let i = 0; i < serviceRequestData.attachments.fileCount; i++) {
          const fileObj = serviceRequestData.attachments.files[i];
          
          if (!fileObj) {
            throw new Error(`File ${i + 1} data is missing. Please remove and re-add the file.`);
          }
          
          if (!fileObj.name) {
            throw new Error(`File ${i + 1} name is missing. Please remove and re-add the file.`);
          }
          
          if (!fileObj.base64) {
            throw new Error(`File "${fileObj.name}" is not properly processed. Please wait for processing to complete.`);
          }

          const estimatedSizeMB = (fileObj.base64.length * 0.75) / (1024 * 1024);
          if (estimatedSizeMB > 15) {
            throw new Error(`File "${fileObj.name}" is too large after processing (${estimatedSizeMB.toFixed(1)}MB). Please use a smaller image.`);
          }
          
          const fieldName = `photo_${i + 1}`;
          fieldsList.push({
            Name: fieldName,
            Value: fileObj.name,
            Base64EncodedFile: fileObj.base64
          });
        }

        for (let i = serviceRequestData.attachments.fileCount; i < 3; i++) {
          const fieldName = `photo_${i + 1}`;
          fieldsList.push({
            Name: fieldName,
            Value: ""
          });
        }

        const createPayload = {
          ApplicationTableKey: PUBLIC_REQUESTS_TABLEKEY,
          FieldsList: fieldsList
        };
        
        const payloadSizeBytes = JSON.stringify(createPayload).length;
        const payloadSizeMB = payloadSizeBytes / (1024 * 1024);
        
        if (payloadSizeMB > 45) {
          throw new Error(`Request payload too large (${payloadSizeMB.toFixed(1)}MB). Please use smaller images or upload fewer files.`);
        }
        
        return $.ajax({
          url: `${SERVER_URL_PAGE}/api/formaction/postdata`,
          type: "POST", 
          contentType: "application/json",
          data: JSON.stringify(createPayload),
          timeout: 30000,
          beforeSend: function (xhr) {
            xhr.setRequestHeader("Authorization", `Bearer ${userToken}`);
          },
          success: function (response) {
            return response;
          },
          error: function(xhr, status, error) {
            let errorMessage = 'An unknown error occurred';
            
            if (xhr.responseText) {
              try {
                const errorResponse = JSON.parse(xhr.responseText);
                errorMessage = errorResponse.Message || errorResponse.message || errorResponse.error || errorResponse.Error || errorMessage;
                
                if (errorMessage.includes('Duplicate entry error')) {
                  errorMessage = 'There was a conflict processing your files. Please try uploading different images or contact support.';
                } else if (errorMessage.includes('INSERTING DATA INTO TABLE')) {
                  errorMessage = 'Database error occurred. Please try again or contact support if the problem persists.';
                }
              } catch (e) {
                errorMessage = xhr.responseText.substring(0, 200);
                if (errorMessage.includes('<!DOCTYPE') || errorMessage.includes('<html')) {
                  errorMessage = 'Server returned an unexpected response. Please try again.';
                }
              }
            } else if (xhr.statusText && xhr.statusText !== 'error') {
              errorMessage = xhr.statusText;
            } else if (xhr.status) {
              switch(xhr.status) {
                case 413:
                  errorMessage = 'Request too large. Please try with smaller images or fewer files.';
                  break;
                case 400:
                  errorMessage = 'Invalid request data. Please check all fields and try again.';
                  break;
                case 401:
                  errorMessage = 'Authentication failed. Please refresh the page and try again.';
                  break;
                case 500:
                  errorMessage = 'Server error. Please try again later.';
                  break;
                default:
                  errorMessage = `Server responded with error ${xhr.status}`;
              }
            }
            
            // Throw error with specific message for the calling code
            throw new Error(errorMessage);
          }
        });
      }

      // Step management variables
      let selectedRequestType = null;
      let currentRequestId = null;

      document.addEventListener("DOMContentLoaded", function () {
        // Step management elements
        const step1Content = document.getElementById('step1Content');
        const step2Content = document.getElementById('step2Content');
        const step1Indicator = document.getElementById('step1Indicator');
        const step2Indicator = document.getElementById('step2Indicator');
        const connector1 = document.getElementById('connector1');
        const requestTypeForm = document.getElementById('requestTypeForm');
        const requestTypeInput = document.getElementById('requestType');
        const continueButton = document.getElementById('continueButton');
        const backButton = document.getElementById('backButton');
        const selectedRequestTypeDisplay = document.getElementById('selectedRequestTypeDisplay');

        const form = document.getElementById("serviceRequestForm");
        const submitButton = document.getElementById("submitButton");
        const errorMessage = document.getElementById("errorMessage");
        
        // Initialize Step 2 submit button as disabled until valid location is selected
        // (Only disable the specific Step 2 submit button, not the Step 1 continue button)
        if (submitButton) {
          submitButton.disabled = true;
          submitButton.classList.add('btn-secondary');
        }

        // Frederick, MD default center coordinates and zoom level
        const FREDERICK_CENTER = [-77.4106, 39.4143]; // Frederick, MD
        const FREDERICK_ZOOM = 12;
        let isShowingAllRequests = false; // Toggle state

        // ESRI ArcGIS Map Variables
        let esriMapView = null;
        let currentMarker = null;
        let selectedCoordinates = null;
        let existingRequestsLayer = null;
        // Geofencing Variables
        let isLocationValid = false;
        let cityBoundaryLayer = null;
        
        // Frederick City Boundary GeoJSON (from Maryland Department of Planning)
        // Coordinates extracted from official export.geojson
        const FREDERICK_BOUNDARY = {
          "type": "FeatureCollection", 
          "features": [
            {
            "type": "Feature",
            "properties": {
              "name": "Frederick",
              "website": "https://www.cityoffrederickmd.gov"
            },
            "geometry": {
              "type": "Polygon",
              "coordinates": [
                [[-77.41977496914222,39.478296142392054],[-77.41982355086378,39.47829331487687],[-77.42147089345626,39.4781974237904],[-77.42154098818742,39.478238652291964],[-77.42176384821022,39.47822563197921],[-77.4233104249133,39.47790881919636],[-77.42330909527266,39.47790454111598],[-77.42289159743584,39.477418116334064],[-77.42353211469543,39.4772996563725],[-77.42312729393585,39.476906272978404],[-77.42292942707358,39.47670576299936],[-77.42291991913447,39.47669627846823],[-77.42265207047267,39.47642910664724],[-77.42246520383077,39.476242711001355],[-77.42242290398063,39.47620052858122],[-77.42238037718134,39.476158479363114],[-77.42237324002541,39.4761514767398],[-77.42233763158451,39.47611656601974],[-77.42229466024399,39.4760747930793],[-77.42225147008472,39.47603315241038],[-77.42220805766864,39.47599165213138],[-77.42216442645557,39.47595028772615],[-77.42212057300742,39.4759090673131],[-77.42209193106729,39.475882327984245],[-77.42207717798135,39.475892664219955],[-77.42137690719468,39.47645830317285],[-77.4205992372905,39.47709773166239],[-77.42051018616321,39.4771758255992],[-77.42044352940266,39.477243651645544],[-77.42037709992728,39.47731160834406],[-77.42031089078017,39.47737969842212],[-77.42024491358912,39.477447922739294],[-77.42017916250586,39.47751627501188],[-77.42011363640592,39.47758476154916],[-77.42004834106321,39.477653376026],[-77.42001189363677,39.47769183644448],[-77.41998807865438,39.47771718706793],[-77.41996449455524,39.477742668366204],[-77.41994114595632,39.477768274918816],[-77.41991802705186,39.47779400764722],[-77.41990978594404,39.4778032746678],[-77.4199050893411,39.47780876320009],[-77.41990063401768,39.477814368864614],[-77.41989642340698,39.47782008264208],[-77.41989245868201,39.47782590632975],[-77.41988874906569,39.47783182728495],[-77.41988529570962,39.47783784370207],[-77.4198821043608,39.47784394475227],[-77.41987917265743,39.477850124139],[-77.41987651102752,39.4778563764209],[-77.41987412173144,39.47786269078145],[-77.41987200593147,39.47786906721651],[-77.41987016239052,39.47787549312062],[-77.41986859921764,39.477881963961345],[-77.41986826563102,39.47788352697491],[-77.41977496914222,39.478296142392054]]
              ]
            }
          },
          {
            "type": "Feature",
            "properties": {
              "name": "Frederick",
              "website": "https://www.cityoffrederickmd.gov"
            },
            "geometry": {
              "type": "Polygon",
              "coordinates": [[[-77.41634252020371,39.48854315071231],[-77.41702545454393,39.48734981884363],[-77.4183067840875,39.486260866499755],[-77.42039649399574,39.48751409021607],[-77.42372421177146,39.48434637379281],[-77.42235717394206,39.4837519577532],[-77.42161585369156,39.483431073874556],[-77.42093704294923,39.483142520644456],[-77.42084049539481,39.481982258015734],[-77.4192020183374,39.47994842880681],[-77.41921754417399,39.47991333431014],[-77.41922893019373,39.479877299796115],[-77.41942881199736,39.47909331843388],[-77.41950659587742,39.47877133995419],[-77.4196904388006,39.47796589976773],[-77.4197027261879,39.47792066035538],[-77.41966450027319,39.47780689864833],[-77.41925450564307,39.477496725960734],[-77.41906663393402,39.477358583033684],[-77.41887376810882,39.47722463683934],[-77.41867606454268,39.4770949957834],[-77.41847368423404,39.47696976465278],[-77.41826679048056,39.476849044623854],[-77.41735118034381,39.47633044273341],[-77.41717902450992,39.47621366798792],[-77.41674369867452,39.47596998617151],[-77.41673938842199,39.47596768750554],[-77.41671761800858,39.475955885105456],[-77.41669600927474,39.47594390649158],[-77.41667456569121,39.47593174894965],[-77.41665329192274,39.47591941516526],[-77.41663219029381,39.47590690513039],[-77.41661126085222,39.47589422695123],[-77.41659273886081,39.47588301471081],[-77.41651210874879,39.475837358401385],[-77.41644348150596,39.47579772586139],[-77.41633401278669,39.47574837400295],[-77.41625369579607,39.4757203261258],[-77.41618040282822,39.47569654884716],[-77.4155158856572,39.47549695549094],[-77.41521861736312,39.475407666462736],[-77.41361514751564,39.474917602970265],[-77.4125023759367,39.47457749368437],[-77.41238407650252,39.47452568222326],[-77.41238320504874,39.47450079153631],[-77.41231514425509,39.47282457953258],[-77.4127021598702,39.47281360458515],[-77.41269534766094,39.472737962719435],[-77.41235263394098,39.47271740461383],[-77.41250974745752,39.47119668948792],[-77.41242191888959,39.47117833978794],[-77.41248035842723,39.47106935573998],[-77.41246709731514,39.471065171554194],[-77.41253470443492,39.470896138488925],[-77.41262926146213,39.47059825563221],[-77.41263958477516,39.47056619748861],[-77.41265019405594,39.470534155455276],[-77.41266107326575,39.470502169219486],[-77.41267223287366,39.470470240545914],[-77.41268366126356,39.470438370375874],[-77.41269536423513,39.47040655688759],[-77.41270734182477,39.470374806385756],[-77.41271958705435,39.47034311799406],[-77.41273210109613,39.47031149350971],[-77.41274488860864,39.470279934717745],[-77.4127579484085,39.47024843801937],[-77.41277127126685,39.47021701515605],[-77.41278486760027,39.47018565888554],[-77.41279872589251,39.47015438726225],[-77.41281285760135,39.47012317232396],[-77.41282725934009,39.47009203119594],[-77.41284192297888,39.470060964807296],[-77.41285686013322,39.47002997221646],[-77.41287205225656,39.469999061594784],[-77.41288751441378,39.46996822568362],[-77.41290323967932,39.46993747261358],[-77.41291922687508,39.46990679968656],[-77.41293547718907,39.469876211401775],[-77.4129519894432,39.469845705061196],[-77.41296876017716,39.46981528518032],[-77.41298579522218,39.46978495534152],[-77.4134540098668,39.46896581423266],[-77.41388616708234,39.468266895538136],[-77.4152194296449,39.46871995929821],[-77.41526398572138,39.468642957331],[-77.41531258027703,39.46865984901759],[-77.41632139290702,39.46900264514537],[-77.41728908804797,39.46933454552697],[-77.41814459682867,39.4696295892776],[-77.4181480075423,39.46962485565374],[-77.41829392715742,39.46942262198628],[-77.41890330259923,39.46966494193525],[-77.41877251059499,39.4698375739101],[-77.4187713470973,39.469839107450255],[-77.4190758116952,39.46994088276805],[-77.41983425712873,39.47089920443791],[-77.4200106555578,39.471122089929395],[-77.42002159897157,39.47113591731033],[-77.42019766721904,39.47091047700319],[-77.42061143280783,39.47038066794704],[-77.42075604920758,39.47019549263794],[-77.42102726707637,39.46984820724159],[-77.42120846001664,39.46961619161962],[-77.4225646250436,39.46959639024528],[-77.42258015497126,39.470235092923936],[-77.42258142600679,39.470287379009555],[-77.4227304110611,39.47028188868536],[-77.42329701811195,39.47027239045286],[-77.4238813304876,39.47026259159229],[-77.42412832738495,39.47025783298333],[-77.42437661474197,39.47025393839072],[-77.42442419222986,39.470253195907354],[-77.4244425363322,39.470252420945855],[-77.42446089070893,39.47025180897277],[-77.42447925417108,39.47025135548882],[-77.42449762554585,39.47025105869681],[-77.4245152692582,39.47025092665219],[-77.42453682338441,39.470250966956996],[-77.42455837181902,39.47025122074631],[-77.42457991345945,39.470251697932035],[-77.4246014471223,39.47025239491546],[-77.42462296813768,39.470253308110706],[-77.42464447189533,39.470254443839345],[-77.42466595255244,39.47025579671814],[-77.42468741012551,39.47025736944922],[-77.42470883995003,39.470259159347314],[-77.4247302397129,39.47026116822212],[-77.42475159431778,39.47026339792958],[-77.42477291534267,39.47026584122227],[-77.42479419118834,39.47026850174486],[-77.42481542302795,39.47027138129461],[-77.42483660268913,39.47027447359597],[-77.42485772672359,39.47027778496647],[-77.42487879857464,39.47028130818798],[-77.42489980084333,39.47028504872758],[-77.42490145404504,39.4702853526075],[-77.42492122688151,39.470289108386986],[-77.42494092781159,39.470293081493395],[-77.42496055910557,39.47029726291154],[-77.42498010916428,39.470301656286026],[-77.42499958031203,39.47030626160868],[-77.42501897018691,39.47031107258291],[-77.42503826604393,39.47031609555985],[-77.42505747483953,39.470321327812286],[-77.42507658607717,39.470326763073146],[-77.42509559513019,39.47033240496204],[-77.42511450315544,39.470338252574116],[-77.42513330549383,39.470344304124794],[-77.42514973833832,39.47034978777182],[-77.4251823383938,39.470361222585105],[-77.42519850210242,39.4703671710619],[-77.42519890586595,39.470366095058665],[-77.42521902060615,39.47037201125511],[-77.42522271160105,39.47030260732107],[-77.42523252334843,39.47011813013846],[-77.42528667682933,39.470132023502764],[-77.4252873527998,39.47013021964416],[-77.42644968989225,39.470452476189095],[-77.4264615538468,39.47081973777738],[-77.42653987157763,39.471599379578244],[-77.42662760234921,39.47247271472278],[-77.42612065672931,39.47247248268954],[-77.42496539541791,39.47246962013536],[-77.42428706571364,39.47246793310554],[-77.42425214231558,39.47246784543293],[-77.42405816814724,39.472467363117275],[-77.42402828680635,39.4724805633863],[-77.42390519016745,39.47253494176848],[-77.42375131707844,39.47260291614729],[-77.42374871723152,39.472604064896245],[-77.42362821538144,39.47265729695641],[-77.42298460501037,39.47294160813976],[-77.42298019924982,39.472943554178244],[-77.42297928355417,39.47294395828155],[-77.42218235751821,39.47329598938051],[-77.4220270426587,39.473364598040384],[-77.42154463453632,39.473367845889285],[-77.42142444621838,39.473368655161856],[-77.42116356114795,39.47337054392612],[-77.42126672636614,39.47385268406878],[-77.42148950819724,39.47490217313495],[-77.42151132966741,39.474985277160066],[-77.42154115906031,39.47506687175835],[-77.42157883210021,39.47514649454842],[-77.42162400902772,39.47522349012365],[-77.42162413574546,39.47522369142848],[-77.4216768059328,39.47529802829385],[-77.42173655190781,39.47536907834004],[-77.4218030272931,39.47543644288299],[-77.42214252634732,39.47575484705737],[-77.42219148194394,39.47580076077512],[-77.4221794543476,39.475816756304816],[-77.42218975816319,39.47582798992034],[-77.42221962501299,39.4758601687081],[-77.42224972239165,39.47589221695981],[-77.42228005149924,39.47592414097597],[-77.42231060063324,39.47595592728775],[-77.42234138148025,39.47598758666163],[-77.42237238585135,39.476019110119644],[-77.42240361493033,39.476050501260254],[-77.42243507103629,39.4760817591742],[-77.42244821612906,39.47609467320352],[-77.42246674949368,39.476112879374625],[-77.42249864683224,39.47614386457588],[-77.422530770009,39.47617471205073],[-77.42254918898884,39.47619224579077],[-77.42271342133603,39.47635606255353],[-77.42320774337409,39.47685222168884],[-77.42366641970412,39.47636172868492],[-77.42404157005835,39.47656978140876],[-77.42489572605147,39.475559428410094],[-77.42579909190198,39.47449195446325],[-77.42581761784103,39.47449997044157],[-77.42640882918353,39.47475576549998],[-77.42715230149412,39.475077432698974],[-77.42714893738419,39.47508078201941],[-77.42716841057525,39.475089333873434],[-77.42843490775542,39.4755597608796],[-77.42838014564316,39.4748735813613],[-77.42836820212598,39.474723929002344],[-77.42833412848952,39.47429694545326],[-77.42831034171171,39.47390739207079],[-77.42938731753998,39.47444332281274],[-77.43091987603796,39.47520593335333],[-77.43125470088714,39.47517155382671],[-77.43136489713231,39.475160239153894],[-77.43156423811872,39.47423788409953],[-77.43184930349672,39.47302071855733],[-77.4319218268271,39.47303146740038],[-77.43194454568219,39.47303483200018],[-77.4319544598231,39.47303630252794],[-77.43258072704577,39.47312907935198],[-77.43336356748439,39.47324505108431],[-77.43458131983658,39.47342543751971],[-77.43572749033731,39.473595210052856],[-77.43581647349885,39.4736083905719],[-77.43571422116469,39.47408991277261],[-77.43567266248351,39.47428561292463],[-77.43567760445717,39.47428623504885],[-77.43568247761662,39.47428662864755],[-77.435682588072,39.47428663634534],[-77.4356874285386,39.47428681659696],[-77.4356875912747,39.47428682139926],[-77.4356923839291,39.474286786558274],[-77.43569260009141,39.47428678575871],[-77.43569732754557,39.47428654309516],[-77.43569759593863,39.47428653129389],[-77.43570225126945,39.47428608893969],[-77.43570257067563,39.474286057134144],[-77.43570712600219,39.47428541699393],[-77.43570750107573,39.47428536606756],[-77.43571194833504,39.47428453988034],[-77.43571236972862,39.474284461761364],[-77.43571669851107,39.474283457671994],[-77.43571716967243,39.47428334604277],[-77.43572136718862,39.47428216319788],[-77.43572187650167,39.47428201900199],[-77.4357259347052,39.47428067184273],[-77.43572647864457,39.47428048878824],[-77.43573038014179,39.47427898368389],[-77.43573096332288,39.47427875634953],[-77.43573470472718,39.47427710952542],[-77.43573531552832,39.47427683795417],[-77.43573888287149,39.47427504585909],[-77.43573951895169,39.4742747273575],[-77.43574291119363,39.47427280981089],[-77.4357435631946,39.47427243450577],[-77.43574676410941,39.47427039877341],[-77.43574743438322,39.47426997115958],[-77.43575043587452,39.474267823576334],[-77.43575111625273,39.47426733827985],[-77.43575392307464,39.47426509594158],[-77.4357546030977,39.47426455300104],[-77.43575720598074,39.47426222044568],[-77.43575787865353,39.47426161628412],[-77.43576027652414,39.47425920792695],[-77.43576093835468,39.47425854165666],[-77.4357631196413,39.47425606564685],[-77.43576376713192,39.4742553354793],[-77.435764427925,39.47425450078043],[-77.43576575987619,39.474252816032276],[-77.43576687358224,39.47425135997065],[-77.43576945725916,39.47424817361477],[-77.43577064300243,39.474246714584474],[-77.4357733656532,39.47424363760077],[-77.43577464905123,39.4742421836134],[-77.43577750026618,39.47423922414668],[-77.43577888717971,39.47423778328692],[-77.43578185648285,39.47423493867386],[-77.43578334578848,39.474233517250795],[-77.43578643206752,39.47423079560186],[-77.43578802492192,39.474229392710505],[-77.43579122119272,39.47422679225008],[-77.43579290952731,39.47422541872875],[-77.43579620650381,39.47422294129264],[-77.43579799729152,39.47422159711551],[-77.4358013833853,39.4742192481508],[-77.43580327779941,39.474217935115014],[-77.43580674603753,39.47421571464742],[-77.43580874413348,39.474214441759834],[-77.43581229105175,39.47421235340504],[-77.43581438353223,39.47421112069998],[-77.4358179998277,39.47420916359175],[-77.43582019138029,39.47420797735684],[-77.43582386427484,39.47420615244306],[-77.43582615607829,39.47420501537602],[-77.43582988325863,39.47420332446674],[-77.43583226721114,39.474202242001816],[-77.43583604168772,39.474200682420715],[-77.43583852129237,39.47419965724707],[-77.43584233146026,39.47419823173918],[-77.43584490096178,39.47419727288516],[-77.43584874332345,39.47419597966202],[-77.43585139804541,39.47419508264141],[-77.43585525984483,39.474193926253776],[-77.43585800683793,39.4741931036503],[-77.4358618833433,39.47419207060505],[-77.43586470865607,39.47419132156974],[-77.43586859298314,39.47419042630362],[-77.43587150011872,39.47418975352552],[-77.43587537824956,39.47418898438128],[-77.4358783602905,39.474188396893105],[-77.43588223921466,39.47418775654695],[-77.4358852891825,39.47418725347379],[-77.43588915493751,39.474186739275254],[-77.4358922728766,39.4741863278226],[-77.43589611384085,39.47418593981476],[-77.4358992962537,39.47418561819412],[-77.43590311357276,39.474185353670514],[-77.43590635350299,39.4741851246098],[-77.43591013204106,39.47418497912295],[-77.43591342954427,39.47418485162899],[-77.43591717045797,39.47418482427398],[-77.43592051391252,39.47418479838973],[-77.43592420902797,39.47418488289179],[-77.43592759265638,39.47418496404295],[-77.43593123502829,39.47418516493129],[-77.43593466113283,39.47418534950647],[-77.435938244895,39.4741856577958],[-77.43594170074732,39.4741859548492],[-77.43594522472094,39.474186367841725],[-77.43594870567247,39.47418677739053],[-77.43595216286245,39.47418729150934],[-77.4359556654322,39.47418781446716],[-77.43595904538462,39.4741884306516],[-77.43596255911889,39.47418906795785],[-77.43596586525364,39.47418977538685],[-77.43596938786688,39.47419053335491],[-77.43597260857351,39.47419133387291],[-77.43597613191953,39.47419221073149],[-77.43597927181895,39.474193099817775],[-77.43598278542724,39.47419409380425],[-77.4359858340212,39.47419506519273],[-77.43598933793618,39.47419618351261],[-77.43599229519688,39.47419723269987],[-77.43599577779145,39.47419847449553],[-77.43599863208622,39.47419959972326],[-77.43600209104159,39.47420096590393],[-77.43600484698025,39.474202160850105],[-77.43600827527911,39.47420364423611],[-77.4360109282075,39.47420490801725],[-77.43601431076394,39.47420651226731],[-77.43601686646504,39.4742078403585],[-77.43602019632279,39.474209568200436],[-77.43602264197403,39.47421095434423],[-77.4360259191331,39.4742128057781],[-77.43602825933318,39.47421424185104],[-77.43603147333415,39.47421621691556],[-77.43603369994233,39.47421770204711],[-77.4360368438011,39.474219798966764],[-77.43603895793517,39.47422132594713],[-77.43604202465669,39.47422354114495],[-77.43604402864092,39.4742251099656],[-77.43604700776564,39.4742274434803],[-77.43604889922024,39.47422904514292],[-77.43605179073151,39.47423149427246],[-77.43605356851097,39.474233131483466],[-77.43605635379764,39.474235693594665],[-77.43605801900857,39.474237357342815],[-77.43606070270252,39.474240029716405],[-77.43606225761927,39.474241711887004],[-77.43606482228812,39.4742444945875],[-77.43606626343531,39.474246196994834],[-77.43606870787802,39.47424908372176],[-77.43607003639559,39.474250802758746],[-77.4360723536503,39.47425379533929],[-77.43607356830947,39.474255520201986],[-77.43607575135874,39.47425861145654],[-77.4360768603001,39.474260343015494],[-77.43607889983555,39.47426353117707],[-77.43607989836612,39.47426526224405],[-77.43608179202455,39.474268541016464],[-77.43608268130083,39.47427027068653],[-77.43608442095262,39.47427364100053],[-77.43608520674107,39.474275362046626],[-77.43608678652537,39.47427881581759],[-77.43608747349676,39.474280531825265],[-77.43608888405518,39.4742840591801],[-77.4360894686564,39.47428575935401],[-77.43609071001676,39.474289364796114],[-77.43609119455546,39.47429104642562],[-77.43609225852698,39.47429472097828],[-77.43609264764629,39.474296383145465],[-77.43609353188793,39.474300124115196],[-77.436093832533,39.47430176229083],[-77.43609452187553,39.47430555982598],[-77.43609473055433,39.474307173122284],[-77.436095231943,39.47431102269373],[-77.43609535558399,39.47431260387932],[-77.436095662018,39.47431650100936],[-77.43609570411886,39.474318051872764],[-77.43609580975401,39.474321991178776],[-77.43609577262787,39.47432350991005],[-77.43609567041894,39.47432747970892],[-77.43609555869224,39.47432896268803],[-77.43609524630382,39.47433296118701],[-77.43609506457526,39.47433440029062],[-77.43609454314719,39.47433842388262],[-77.4360942902934,39.47433982541979],[-77.43609355741809,39.47434386060318],[-77.43609323922773,39.47434522094966],[-77.43609229371512,39.47434926322518],[-77.43609191594904,39.47435057425331],[-77.43609075081505,39.474354621845485],[-77.43609031581413,39.47435588624865],[-77.43608893448973,39.47435993013765],[-77.43608844574052,39.47436114790301],[-77.43608683769392,39.47436517641862],[-77.43608630563922,39.474366344805354],[-77.4360844812744,39.474370348901964],[-77.43608390476871,39.474371470616404],[-77.43608206270842,39.47437505504852],[-77.43608186060467,39.47437545120761],[-77.43608124310668,39.474376521733454],[-77.43608105681247,39.47437684307523],[-77.43608046117347,39.47437787749184],[-77.43607897209823,39.4743804671361],[-77.43607831940767,39.47438148465046],[-77.43607810187375,39.474381828625575],[-77.43607748491051,39.47438279736944],[-77.43607581798501,39.474385381367114],[-77.43607514643324,39.47438635571727],[-77.4360742547345,39.4743876272154],[-77.43607243669409,39.47439020636822],[-77.43607172643549,39.4743911232164],[-77.43607078101057,39.47439235167943],[-77.43606879901587,39.474394917027844],[-77.4360680675218,39.47439578261421],[-77.43606492004184,39.47439951058783],[-77.43606417079319,39.474400323998864],[-77.43606080671165,39.47440398161831],[-77.43606004204943,39.47440474554742],[-77.43605646476946,39.47440831928946],[-77.43605569048233,39.47440903011235],[-77.4360519000039,39.474412519976944],[-77.43605112194707,39.47441318487772],[-77.4360471321273,39.47441657640217],[-77.43604634679211,39.47441719179088],[-77.43604214831709,39.474420482307615],[-77.43604136848725,39.474421048136996],[-77.43603697060432,39.47442422950533],[-77.43603619860428,39.47442474576672],[-77.43603160476657,39.47442781256963],[-77.43603083600317,39.47442828828718],[-77.43602605660355,39.474431229677606],[-77.43602530497839,39.47443165759411],[-77.4360203388381,39.474434470874385],[-77.43601960436222,39.47443485279127],[-77.4360144525713,39.474437526248],[-77.43601373877561,39.47443786935788],[-77.43600842342074,39.474440403810085],[-77.43600772333232,39.474440708138694],[-77.43600224434688,39.47444309277804],[-77.43600157305721,39.47444335556749],[-77.43599593272674,39.47444558408055],[-77.43599528565935,39.47444581705692],[-77.43598949669548,39.47444787768749],[-77.43598887730354,39.47444807543376],[-77.43598294903146,39.47444997265075],[-77.43598236199139,39.474450139653165],[-77.43597629315457,39.47445185814925],[-77.43597574197508,39.474451997997654],[-77.43597352444009,39.474452552034485],[-77.43596955236923,39.4744535440044],[-77.43596903588266,39.47445365580245],[-77.43596272773223,39.47445501309893],[-77.43596225060942,39.474455100432095],[-77.435955832083,39.474456274392324],[-77.43595539667598,39.4744563417555],[-77.43594887348448,39.47445731614551],[-77.43594848096109,39.47445736443509],[-77.43594187174357,39.4744581463916],[-77.43594151861168,39.4744581747198],[-77.43593483028026,39.47445875430941],[-77.43593452238962,39.474458768959494],[-77.43592776539819,39.47445914524279],[-77.43592750045772,39.47445915162756],[-77.43592068522148,39.47445931736036],[-77.43592046206903,39.47445931548407],[-77.4359136002042,39.474459269722615],[-77.4359134235217,39.47445926497222],[-77.43590652428678,39.474459001377326],[-77.4359063940576,39.474458991050795],[-77.43589942609086,39.47445851244059],[-77.43589244396414,39.47445781050682],[-77.4358854593047,39.474456886107085],[-77.43596978474254,39.474469375789916],[-77.43597044083127,39.474469475141554],[-77.43599293700495,39.47447280735991],[-77.43595162732086,39.4746673339424],[-77.43583088086537,39.47523593107781],[-77.4409092938341,39.475825722471846],[-77.43777693832985,39.47750307659808],[-77.44243600501203,39.479638653611296],[-77.44298854416697,39.47989190036213],[-77.4465695843483,39.476227567252565],[-77.44562626172258,39.47555252921927],[-77.44563737563091,39.47554454562915],[-77.44563776784084,39.47554426312439],[-77.44563799345096,39.475544101044086],[-77.44564908242793,39.475535850036884],[-77.4456495370382,39.47553551055138],[-77.44566021241728,39.47552728362557],[-77.44566087861753,39.47552677040351],[-77.44566090406069,39.47552675049165],[-77.44567114970761,39.47551856932542],[-77.44567202277524,39.47551787067539],[-77.44567214187295,39.475517773849006],[-77.44568188733159,39.475509708063555],[-77.4456829591255,39.475508823115696],[-77.44568351283198,39.47550834814882],[-77.44569242996621,39.47550070432584],[-77.44569368070653,39.47549962955207],[-77.44570275787717,39.47549156178988],[-77.44570420254729,39.47549027731792],[-77.4457128919837,39.47548228037658],[-77.44571450504962,39.475480791707206],[-77.44571456050528,39.4754807392563],[-77.4457228078914,39.475472861979625],[-77.44572458931897,39.47547116370876],[-77.44572473600245,39.47547101813969],[-77.4457325137696,39.475463311972526],[-77.4457344507293,39.475461396942976],[-77.44574201082595,39.47545363755634],[-77.44574408701877,39.475451501326205],[-77.44574455919015,39.475450997845],[-77.44575128276152,39.47544383428928],[-77.44575347159903,39.47544149947693],[-77.44575349584026,39.47544147326464],[-77.44576033539292,39.47543390305006],[-77.44576216474373,39.4754318794416],[-77.44576267373006,39.47543131637419],[-77.44576273142484,39.475431250404164],[-77.44576916299444,39.475423857371126],[-77.44577161838085,39.47542103336587],[-77.4457777643643,39.47541369095202],[-77.44578032751375,39.47541063145391],[-77.44578040591774,39.4754105320793],[-77.44578613375391,39.47540341372236],[-77.44578879415,39.47540010976407],[-77.44579427929307,39.47539302475072],[-77.44579702416303,39.47538947818203],[-77.44579741368825,39.47538895429708],[-77.44580218705265,39.475382526791996],[-77.44580497247196,39.475378775608895],[-77.44580500474625,39.47537873315348],[-77.44580986051928,39.47537191983302],[-77.44581273941462,39.47536787916861],[-77.44581728932418,39.47536121832444],[-77.4458202270401,39.47535692163606],[-77.44582448271949,39.475350415025616],[-77.44582746531545,39.475345863266725],[-77.44582758038122,39.47534567998745],[-77.44583143147027,39.47533951987929],[-77.44583444378118,39.47533470410026],[-77.44583813902342,39.47532852656754],[-77.44584117179149,39.475323453108324],[-77.44584147755393,39.47532291602965],[-77.44584459386508,39.47531745224744],[-77.44584760441882,39.475312173510666],[-77.44584763889821,39.475312112131995],[-77.44585080521897,39.475306285174916],[-77.44585348555124,39.47530135085772],[-77.44585384628076,39.47530068386896],[-77.44585393356763,39.47530051870896],[-77.44585676273346,39.47529504250266],[-77.44585979392212,39.47528916561711],[-77.4458624617202,39.47528371794342],[-77.44586547149335,39.475277578132],[-77.44586791267861,39.47527231776255],[-77.44587088707877,39.47526591327662],[-77.44587091114965,39.47526586004369],[-77.4458731086868,39.475260850092546],[-77.4458760348846,39.47525417377507],[-77.44587626040514,39.475253628893626],[-77.44587804507916,39.4752493122491],[-77.44588087941706,39.47524244442832],[-77.44588091260935,39.47524236323891],[-77.44588272188416,39.47523770873561],[-77.44588552146065,39.47523048886933],[-77.4458871368003,39.475226043163666],[-77.44588985565616,39.47521855519175],[-77.44588988074725,39.47521847943729],[-77.44589128872227,39.475214324544524],[-77.44589391867122,39.475206560391634],[-77.44589518225345,39.4752025456552],[-77.44589770708184,39.475194514389734],[-77.44589773210474,39.475194427827],[-77.4458988093553,39.475190721838125],[-77.44590121507153,39.47518241630741],[-77.44590216765815,39.475178845896636],[-77.4459044247156,39.47517037249616],[-77.44590445080985,39.47517027151804],[-77.44590526187322,39.47516692772075],[-77.4459074062127,39.475158088158594],[-77.44590811995542,39.47515497711241],[-77.44602672381167,39.4746273362563],[-77.44602933405613,39.47461608372939],[-77.44603035637007,39.47461196181922],[-77.4460331647081,39.474600607662666],[-77.44603422739833,39.47459662250723],[-77.44603727571315,39.474585173768105],[-77.44603837413682,39.47458132628569],[-77.44604166013802,39.474569788376954],[-77.44604278844439,39.47456607228468],[-77.44604632379327,39.47455445146706],[-77.4460463351878,39.47455441539558],[-77.446047480877,39.4745508757763],[-77.44605126204716,39.47453916575812],[-77.44605243739198,39.474535721501596],[-77.44605647259218,39.47452393396099],[-77.44605653769992,39.47452375357273],[-77.44605766623779,39.474520627443475],[-77.44606195894875,39.474508761466524],[-77.44606198982183,39.47450868118653],[-77.44606316854815,39.474505589094065],[-77.44606771996018,39.474493649179756],[-77.44606893621607,39.474490610987594],[-77.44607374635179,39.47447860073865],[-77.44607403260558,39.47447791961964],[-77.44607496693979,39.47447569673556],[-77.4460799890078,39.47446375233608],[-77.44608004510208,39.47446361701736],[-77.44608126421707,39.474460848126064],[-77.44608619684979,39.47444964985162],[-77.44608661507137,39.47444870162311],[-77.44608782691391,39.474446069666925],[-77.44609344934902,39.47443386448973],[-77.44609465270582,39.47443136136695],[-77.44610055137031,39.474419097497844],[-77.44610072927951,39.47441874374629],[-77.44610174047035,39.47441672953524],[-77.44610791888452,39.474404412365104],[-77.44610799811974,39.47440426074599],[-77.44610908787728,39.47440217327991],[-77.44611554954454,39.47438980549752],[-77.44611581722211,39.474389311796166],[-77.44611669378139,39.4743876953073],[-77.4461232802313,39.47437558015095],[-77.44612344222783,39.47437528320426],[-77.44612455940145,39.47437330461992],[-77.44613159463823,39.47436084999756],[-77.44613268471468,39.47435899761491],[-77.44614000559652,39.474346503179596],[-77.44614105695977,39.47434477794342],[-77.44614867631012,39.4743322499515],[-77.44614968545108,39.47433064827223],[-77.44615759864948,39.47431809124465],[-77.44615830422799,39.474317005920426],[-77.44615855975732,39.474316613144346],[-77.44616677611796,39.47430402974797],[-77.44616699028651,39.47430371278798],[-77.4461676892155,39.474302678829275],[-77.44617590703498,39.47429051155402],[-77.44617620873252,39.474290068163285],[-77.44617706679573,39.47428883634652],[-77.44618588605631,39.47427621013305],[-77.44618668678355,39.47427510102979],[-77.44619581276059,39.47426245924229],[-77.44619655379927,39.47426146835788],[-77.44620598884526,39.474248815490924],[-77.44620666090947,39.474247944661954],[-77.44621640737707,39.47423528521014],[-77.44621700809707,39.47423452723995],[-77.4462171072647,39.47423440346719],[-77.44622706603718,39.47422186930937],[-77.44622719059056,39.474221716617755],[-77.44622759309442,39.47422122510747],[-77.44623750123861,39.474209140594034],[-77.44623797296639,39.474208568658376],[-77.44623842052175,39.474208033743366],[-77.44624910957008,39.47419538332763],[-77.44624947532765,39.474194962211726],[-77.44624952378614,39.47419490618421],[-77.44626048405135,39.474182324094365],[-77.44626076450203,39.4741820131881],[-77.44627209523101,39.47416938826095],[-77.44627228220565,39.47416918219101],[-77.4462725072929,39.47416893814688],[-77.44628393498522,39.47415657765949],[-77.44628403196471,39.47415647551201],[-77.44628459191935,39.47415588792985],[-77.44629600451019,39.47414389768967],[-77.44629883017379,39.47414101102074],[-77.44630165583148,39.47413812345104],[-77.4463020600079,39.474137712997916],[-77.44630228174485,39.47413749058345],[-77.44630498095104,39.474134823265715],[-77.44631122942248,39.474128646849366],[-77.446311484737,39.474128404492035],[-77.44631415223157,39.47412586879768],[-77.44632061705627,39.47411972218517],[-77.44632095099414,39.47411941557958],[-77.44632354051805,39.474117047712255],[-77.44633022521657,39.47411093629435],[-77.4463305222494,39.47411067486404],[-77.44633314238084,39.474108369029395],[-77.44634005043385,39.474102291892194],[-77.44634050012158,39.474101910989845],[-77.44634295663501,39.47409982915072],[-77.44634997017279,39.47409389302447],[-77.44635008114342,39.47409379802957],[-77.44635297520219,39.47409143711393],[-77.4463596340153,39.47408601303308],[-77.4463603243124,39.47408545377923],[-77.44636056831192,39.47408526010296],[-77.44636319927871,39.47408319831862],[-77.4463707671572,39.47407725918967],[-77.44637114770603,39.47407697222292],[-77.4463736195104,39.47407510379311],[-77.4463814108853,39.47406922146186],[-77.44638177183083,39.47406895888848],[-77.44638423945763,39.47406716523314],[-77.44639225085949,39.47406134241475],[-77.44639311983306,39.47406073564679],[-77.44639505101944,39.4740593880735],[-77.44640328246531,39.47405362747005],[-77.44640353590388,39.474053456275634],[-77.44640604718305,39.47405176603584],[-77.44641412610032,39.47404632936411],[-77.44641450221046,39.47404607574023],[-77.44641723032963,39.47404430811819],[-77.44642590545784,39.47403868904424],[-77.44642630483946,39.47403843983565],[-77.44642859000547,39.47403701526072],[-77.44643748876071,39.47403147369998],[-77.44643780368551,39.474031285158965],[-77.44644012857468,39.474029893759464],[-77.44644924748178,39.474024431526495],[-77.4464494397066,39.47402432091144],[-77.44645183787381,39.474022939141754],[-77.44646117698396,39.474017564342645],[-77.44646185796829,39.47401718706666],[-77.44646371909911,39.47401615680725],[-77.4464732714564,39.47401087217046],[-77.44647576066883,39.47400955310478],[-77.44648484408154,39.47400472870524],[-77.44648553327461,39.47400436310722],[-77.44648795908519,39.47400312624607],[-77.44649794731362,39.4739980345081],[-77.4465003143596,39.47399687803252],[-77.44651051941828,39.47399189175514],[-77.44651074189883,39.473991787330306],[-77.44651281954192,39.473990812093284],[-77.44652323797285,39.473985935793095],[-77.4465233793581,39.473985872207514],[-77.44652547813004,39.47398493021639],[-77.44653609950221,39.47398016843642],[-77.44653653993953,39.47397997941933],[-77.44653826459069,39.473979237902874],[-77.44654881076525,39.47397471509464],[-77.44654910400645,39.473974589685135],[-77.44655119518269,39.47397373328969],[-77.44656120708264,39.47396963133535],[-77.446562239921,39.47396920859009],[-77.44656425829604,39.473968418222164],[-77.44657550836818,39.47396401884207],[-77.44657744929344,39.473963294519244],[-77.44658889894558,39.473959029487474],[-77.4465892885661,39.47395889110253],[-77.44659075891755,39.473958368520975],[-77.44660241511703,39.473954236910394],[-77.44660333243856,39.47395392538991],[-77.44660418598362,39.47395363662899],[-77.44661604179156,39.47394964387003],[-77.44661621113097,39.47394959008617],[-77.44661773518006,39.47394910513042],[-77.44662916546217,39.47394545445147],[-77.44662978366345,39.47394525755432],[-77.44663138442037,39.47394477320827],[-77.44664362559065,39.47394107261632],[-77.44664514182838,39.47394063903026],[-77.44665757107676,39.47393709174488],[-77.44665899582806,39.47393670984596],[-77.44667160968518,39.47393331858233],[-77.44667294408383,39.47393298386272],[-77.44668574606474,39.47392975311103],[-77.44668638315595,39.47392960297879],[-77.44668697730998,39.47392946291717],[-77.44669980032579,39.47392643474364],[-77.44669996162665,39.473926396302154],[-77.44670110132304,39.47392614788792],[-77.4467132907935,39.47392346348418],[-77.44671425409226,39.47392325536998],[-77.44671529636642,39.473923038849875],[-77.44672862339344,39.473920319506256],[-77.44672956829665,39.4739201429865],[-77.44674306610635,39.47391759863173],[-77.44674390544667,39.47391745313632],[-77.44675757060958,39.47391509279043],[-77.44675830670568,39.473914977409876],[-77.44677213223764,39.47391279929792],[-77.44677246200558,39.47391275301166],[-77.4467727697096,39.47391270951124],[-77.44678625870279,39.47391079387959],[-77.4467867498739,39.47391072536407],[-77.44678728055261,39.473910655797965],[-77.44680141766788,39.4739088647061],[-77.44680184155908,39.473908816261364],[-77.44680192053448,39.473908807855395],[-77.44681612518887,39.47390722186714],[-77.4468164434262,39.47390719003586],[-77.44681659673981,39.47390717504293],[-77.44683087012399,39.47390579865731],[-77.44683108616555,39.473905778922884],[-77.44683134054684,39.47390575724159],[-77.44684564779061,39.47390458969015],[-77.44684575815558,39.47390458296649],[-77.4468464818943,39.47390453518548],[-77.4468604559101,39.47390360217994],[-77.44693611144366,39.47382702150477],[-77.4469977406973,39.47376464414262],[-77.44745542043029,39.47330136875945],[-77.44753016932013,39.47322570264311],[-77.44771213425905,39.473041510586526],[-77.44760619372312,39.47292880398129],[-77.44760356905586,39.47293056313236],[-77.44759516410156,39.4729231903426],[-77.44759485091589,39.47292291771717],[-77.44759466627781,39.4729227571919],[-77.44759448049476,39.47292259937308],[-77.44758593261078,39.47291541267188],[-77.44758555641324,39.47291509975392],[-77.4475853332822,39.47291491685719],[-77.44757681764986,39.47290805158587],[-77.44757623829994,39.47290759082288],[-77.4475760012005,39.47290740437634],[-77.44756750489944,39.47290083896703],[-77.44756671778286,39.4729002357807],[-77.44756582216003,39.472899565453496],[-77.44755800598658,39.4728937756718],[-77.44755699952763,39.47289303731179],[-77.44755663643294,39.47289277478368],[-77.44754831979472,39.47288686891006],[-77.4475472738233,39.472886130700076],[-77.44754709053562,39.47288599989299],[-77.44754680572017,39.472885802819185],[-77.44753844748035,39.47288011777663],[-77.44753773783458,39.4728796358915],[-77.44753698967304,39.47287912803214],[-77.44753673757988,39.47287895965669],[-77.44752839950831,39.47287352313245],[-77.44752670620859,39.4728724171904],[-77.44752631417461,39.472872172786325],[-77.44751818172358,39.47286709035953],[-77.44751623905422,39.47286587908112],[-77.44751591707332,39.47286568575127],[-77.44750778718173,39.472860823987766],[-77.44750560099902,39.472859514556326],[-77.447504800855,39.472859056433236],[-77.44749723565046,39.47285472574335],[-77.44749478973584,39.4728533263269],[-77.4474945856495,39.47285321451363],[-77.44748652135324,39.472848801052535],[-77.44748421807442,39.47284753620031],[-77.44748380758321,39.47284731348326],[-77.44748353355777,39.47284716860943],[-77.44747565236801,39.47284304087746],[-77.44747267085093,39.472841482268336],[-77.44747236306083,39.472841327614965],[-77.44746463227804,39.47283746051652],[-77.44746137722025,39.47283583359169],[-77.44746102751351,39.47283566648758],[-77.44745346574325,39.472832061753344],[-77.44744993021187,39.47283037284407],[-77.44744977053185,39.47283029959251],[-77.44744215735507,39.4728268355635],[-77.44743833795499,39.472825099093875],[-77.44743768768188,39.47282481693999],[-77.44743071184755,39.47282179543944],[-77.44742660627723,39.47282001502107],[-77.4474260446514,39.4728197838708],[-77.44741913732135,39.472816935946184],[-77.44741539935723,39.472815396421765],[-77.44741473520703,39.47281512512899],[-77.44741458956388,39.4728150662354],[-77.44740743149202,39.47281226339726],[-77.44740274100863,39.4728104284552],[-77.44740237755583,39.47281029292794],[-77.44739560832794,39.472807781342574],[-77.44739061558678,39.4728059313353],[-77.44739042340119,39.47280586361136],[-77.44738366433693,39.472803488894485],[-77.44737837055142,39.47280163192375],[-77.44737826689908,39.47280159718975],[-77.44737160883881,39.47279938962045],[-77.44736601405458,39.47279753289169],[-77.44736555408754,39.47279738872385],[-77.44736028253705,39.472795739731644],[-77.44735944880055,39.47279548259327],[-77.44735378132624,39.47279370900526],[-77.44735354494529,39.47279363604487],[-77.44735341220535,39.472793596017134],[-77.44734719004997,39.47279177049291],[-77.4473409795277,39.4727899467256],[-77.44734087940162,39.47278991828318],[-77.44733483028539,39.472788256930926],[-77.44732831080604,39.472786461357586],[-77.44732811641018,39.472786411656166],[-77.44732238225046,39.47278493555389],[-77.4473155492565,39.47278318260311],[-77.4473152687486,39.472783115214504],[-77.44730984371179,39.47278182078162],[-77.44730270652889,39.47278011492149],[-77.4473025342934,39.472780077745774],[-77.4472972332067,39.4727789035366],[-77.4472897802874,39.47277725652006],[-77.4472895417418,39.47277720878766],[-77.4472845414891,39.47277619196033],[-77.44727726278798,39.472774711813294],[-77.44727677753896,39.47277461277654],[-77.44727178015762,39.472773682405816],[-77.44726370870853,39.47277217824704],[-77.44726329802423,39.47277210865047],[-77.44725895735264,39.47277137574298],[-77.44725057384149,39.47276996013701],[-77.4472502504485,39.472769910925244],[-77.44724607076706,39.47276927468256],[-77.4472373845307,39.47276795389886],[-77.4472368727462,39.47276788558681],[-77.44723314017973,39.472767382752295],[-77.44722414200646,39.47276617033645],[-77.44722340696637,39.47276608305641],[-77.44722015395217,39.472765697294264],[-77.44721085201103,39.47276459861943],[-77.4472071306898,39.472764220039245],[-77.44719827163642,39.472763321440674],[-77.447197523904,39.47276324862002],[-77.44719406909944,39.472762930275785],[-77.44719378188645,39.47276290524569],[-77.44719321441626,39.47276285245687],[-77.44717654823727,39.47276126563211],[-77.4471759214469,39.4727612049621],[-77.44717531209993,39.47276114602727],[-77.44717477948244,39.47276109130465],[-77.44715780851783,39.47275927325136],[-77.44715687581217,39.472759170508596],[-77.44715634198707,39.47275910858483],[-77.44713973956979,39.472757128803636],[-77.4471384846391,39.47275697774488],[-77.44712171232406,39.4727547788331],[-77.4471201362623,39.47275456864566],[-77.44711840077147,39.472754324836494],[-77.44710373373097,39.472752219710586],[-77.44710183766043,39.47275194408517],[-77.44710104546536,39.472751823695084],[-77.44708579913065,39.472749449652476],[-77.44708374123292,39.47274912870484],[-77.44708359233142,39.472749105851584],[-77.44706792715728,39.472746474892915],[-77.44706648802313,39.472746231759544],[-77.44706540721417,39.47274604851434],[-77.44706481152278,39.47274594359092],[-77.4470501108212,39.472743292756405],[-77.44704728120352,39.4727427810847],[-77.44704652255129,39.4727426353471],[-77.44703236056468,39.47273990050122],[-77.44702922471913,39.47273929721827],[-77.44702869408475,39.47273918844493],[-77.44701467877468,39.47273630802609],[-77.44701123547091,39.47273560232794],[-77.44701061983564,39.47273546775654],[-77.44699706774158,39.472732509918096],[-77.44699332156566,39.472731691879474],[-77.44699241608035,39.472731482748415],[-77.44697952512976,39.472728504384754],[-77.4469754935138,39.472727573939395],[-77.4469620672776,39.47272430217256],[-77.44695866152887,39.47272347023111],[-77.44695773617372,39.472723243160964],[-77.44695715881514,39.47272309673486],[-77.4469446929719,39.47271989517979],[-77.44694007400152,39.47271870755775],[-77.44693933477032,39.472718508603926],[-77.44692740224691,39.472715288810626],[-77.44692249534187,39.47271396176981],[-77.44692156860289,39.47271369957703],[-77.44691021019919,39.47271048120639],[-77.44690502111905,39.4727090066185],[-77.44690469743075,39.47270891057006],[-77.44689310751471,39.47270546970035],[-77.44688764207596,39.47270384844392],[-77.44688663716127,39.472703537008414],[-77.44687610356458,39.472700265966175],[-77.44687036866625,39.47269848630576],[-77.4468702522137,39.47269844891777],[-77.44685920181257,39.47269486638798],[-77.4468539671684,39.4726931694955],[-77.44685320320863,39.47269291929454],[-77.44685275133278,39.4726927678883],[-77.44684240807526,39.47268927184437],[-77.44683614573164,39.47268715191379],[-77.44683569496681,39.47268699239686],[-77.4468257223356,39.47268347963338],[-77.4468192043704,39.47268118413262],[-77.4468184145936,39.47268089439818],[-77.44680914928786,39.47267749694295],[-77.44680238144922,39.472675015942336],[-77.44680173838611,39.47267477068666],[-77.44679269474837,39.47267132465176],[-77.44678568628244,39.47266865000975],[-77.44678459577058,39.47266821820307],[-77.4467763610075,39.47266495734687],[-77.4467691130708,39.47266208815836],[-77.4467688777052,39.47266199177451],[-77.44676015161423,39.47265840492273],[-77.44675328399858,39.472655582028224],[-77.44675267343008,39.47265532944338],[-77.44675214206885,39.472655105380795],[-77.44674407353018,39.47265166555149],[-77.44673636622676,39.47264837837278],[-77.44673605506081,39.47264824084375],[-77.44672812907963,39.472644739224464],[-77.44672020078063,39.47264123851407],[-77.44671964715704,39.47264098571313],[-77.44671231014483,39.47263762867457],[-77.44670417472781,39.472633903571364],[-77.44670406165952,39.472633849957624],[-77.44669663880072,39.472630332917454],[-77.4466882962829,39.472626386123416],[-77.44668714333757,39.47262582124764],[-77.44668110464502,39.47262286099972],[-77.4466725630819,39.47261867987432],[-77.4466722261332,39.47261850821594],[-77.44666571811999,39.47261521017967],[-77.44665745078838,39.472611022608966],[-77.44665698792545,39.4726107874777],[-77.44665658332279,39.47261057644462],[-77.44665048387422,39.47260738043973],[-77.446641573172,39.47260271432892],[-77.44664127230645,39.47260255154076],[-77.44663539611985,39.47259937540479],[-77.44662631066389,39.472594456856214],[-77.44662601442988,39.47259429134829],[-77.44662046996469,39.4725911950176],[-77.44661121323017,39.4725860222166],[-77.44661082715372,39.472585800304635],[-77.44660570310155,39.472582841989045],[-77.44659628553087,39.47257741219393],[-77.44659509565692,39.47257670424449],[-77.4465910943968,39.472574320827064],[-77.44658152871666,39.47256862498242],[-77.44658110287772,39.47256836358993],[-77.44657666130527,39.47256563506841],[-77.4465672706435,39.47255986470085],[-77.44656694629687,39.47255966417173],[-77.44656662075396,39.47255945824287],[-77.44656238634947,39.47255677757367],[-77.44655360244647,39.4725512084649],[-77.44655254411057,39.4725505342433],[-77.44655188712332,39.47255010799652],[-77.44654829164979,39.47254775456405],[-77.44653831748082,39.4725412307114],[-77.44653815174725,39.47254111875105],[-77.44653436907132,39.47253856607045],[-77.44652428043284,39.472531766132846],[-77.44652405048073,39.47253160667833],[-77.44652062566078,39.47252922377539],[-77.44651042596549,39.47252213603067],[-77.44650922349996,39.47252127410684],[-77.44650706257467,39.47251972677389],[-77.44649676454924,39.4725123421667],[-77.4464962729835,39.47251197834216],[-77.44649369022102,39.472510066920115],[-77.4464834970374,39.472502536900144],[-77.44648329854265,39.47250238993627],[-77.44648049705242,39.472500255967155],[-77.44647090842807,39.47249294703036],[-77.44647002909065,39.472492276633034],[-77.44646750164024,39.47249029024187],[-77.44645696088165,39.472482008544226],[-77.44645469588367,39.47248017517924],[-77.44644409277619,39.47247158927706],[-77.44644364999213,39.4724712207639],[-77.44644208795742,39.472469917053346],[-77.44643143290925,39.47246101880081],[-77.44643115830209,39.47246078115366],[-77.44642968130809,39.47245950954616],[-77.44641898246562,39.472450300713774],[-77.44641844135805,39.472449820885224],[-77.44641747484748,39.47244896437113],[-77.44640683260313,39.47243951573447],[-77.44640674260751,39.47243943501172],[-77.44640547084288,39.47243827251261],[-77.44639542753436,39.472429074704245],[-77.44639472150382,39.47242842706799],[-77.44639368447602,39.47242744562235],[-77.44638291219879,39.47241727961111],[-77.44638209947688,39.472416483762096],[-77.44637132862094,39.472405989886276],[-77.44637072980244,39.472405388680436],[-77.44635996388271,39.472394571430215],[-77.4463595743303,39.47239416668658],[-77.4463488283978,39.4723830169979],[-77.44634863417146,39.472382809670115],[-77.4463482667508,39.472382412948974],[-77.44633791870237,39.47237133020535],[-77.44632881699125,39.4723616163195],[-77.44632870698962,39.47236149604132],[-77.44631950102719,39.47235202033705],[-77.4463192682973,39.47235178883593],[-77.44631900632668,39.472351527722225],[-77.44630995817438,39.47234256572414],[-77.44630960384438,39.47234221759156],[-77.44630935127886,39.47234197355569],[-77.44630020116526,39.47233324432615],[-77.44629971944165,39.47233278228617],[-77.44629963643612,39.472332704238994],[-77.44629023229574,39.47232405163074],[-77.44628961279886,39.47232348833265],[-77.44628921074222,39.47232312777094],[-77.44628005398657,39.47231500294084],[-77.44627946263664,39.472314480067936],[-77.4462792978503,39.4723143338767],[-77.44627923825217,39.47231428186137],[-77.44626966505867,39.47230609555863],[-77.44626876767428,39.47230532705086],[-77.44626866720276,39.47230524366557],[-77.44625907601667,39.47229733664998],[-77.44625802809857,39.472296470535206],[-77.4462579463291,39.472296404192484],[-77.44624828799431,39.47228872170699],[-77.44624708842586,39.47228776519501],[-77.44624686187066,39.47228759131576],[-77.44623730334423,39.47228025522427],[-77.44623594403036,39.472279214650676],[-77.4462358249365,39.4722791268324],[-77.44622612097818,39.47227194891503],[-77.44622460189626,39.4722708206771],[-77.44622433339089,39.47227062894257],[-77.44621475593561,39.47226379191382],[-77.44621343327329,39.47226285027916],[-77.44621306437614,39.47226258776886],[-77.44621300017504,39.47226254297661],[-77.44620320016122,39.472255796860956],[-77.44620133960494,39.47225451589507],[-77.4462011120355,39.47225436543798],[-77.44619146061638,39.472247961928666],[-77.44618942645454,39.472246610464175],[-77.44618914874324,39.472246433175755],[-77.44617954661507,39.47224028978369],[-77.44617733425041,39.472238875944406],[-77.44617717908527,39.47223878105699],[-77.44616745819144,39.4722327858301],[-77.44616505832698,39.472231309651185],[-77.44615519534536,39.47222545006788],[-77.44615261382592,39.472223916931426],[-77.44615252168265,39.47222386413856],[-77.44614276969814,39.472218282452936],[-77.44614060143552,39.47221704318347],[-77.44613999494787,39.47221669960833],[-77.44613970221434,39.47221653588735],[-77.44613017897666,39.47221129110022],[-77.44612721098994,39.4722096576468],[-77.44612689266124,39.47220948951917],[-77.44611742665009,39.472204473294376],[-77.44611426665162,39.472202799135275],[-77.44611394836272,39.472202637312435],[-77.4461045232117,39.47219783439991],[-77.44610116076505,39.472196123177454],[-77.44610110364472,39.47219609547178],[-77.44609146401291,39.47219137443439],[-77.44608790728138,39.47218963062111],[-77.44608728368036,39.47218933755025],[-77.44607826183707,39.472185093349324],[-77.44607461697186,39.47218337959284],[-77.44607449808272,39.4721833241991],[-77.44607440367214,39.47218328042188],[-77.44606491790297,39.47217900014715],[-77.44606094714298,39.47217720836198],[-77.4460514379985,39.472173091203025],[-77.44604725793701,39.47217128129511],[-77.44604694683129,39.47217115277113],[-77.44603781749218,39.4721673692366],[-77.44603342818031,39.47216554931212],[-77.44603338157596,39.47216553057372],[-77.44602407032943,39.472161834195084],[-77.4460194718012,39.472160009658026],[-77.44601928541225,39.4721599392078],[-77.44601020119836,39.472156492365514],[-77.44600538649249,39.47215466504373],[-77.44600495434962,39.47215450905591],[-77.44599620893109,39.472151342851646],[-77.44599152871655,39.47214964922572],[-77.44599117811006,39.47214952265256],[-77.44599114665883,39.472149511062405],[-77.44598210398678,39.47214638561387],[-77.44597799731078,39.472144970837036],[-77.44597685127964,39.47214457886422],[-77.4459764727821,39.47214445239663],[-77.44596787944924,39.47214162968534],[-77.44596241414737,39.47213983544921],[-77.44596221037209,39.47213977227035],[-77.4459535515485,39.47213706869963],[-77.44594786556813,39.472135295113965],[-77.44594774680407,39.47213525953522],[-77.44593912146918,39.47213270625505],[-77.44593321600085,39.472130957818806],[-77.44593219150124,39.47213067166916],[-77.44592459270902,39.47212854413981],[-77.44591846780945,39.472126829859775],[-77.44591825361483,39.47212677302529],[-77.445909969905,39.47212458053479],[-77.44590423093025,39.47212306475046],[-77.44590362561394,39.47212290671579],[-77.44590334042744,39.47212283393724],[-77.44589525660591,39.47212082533439],[-77.44588869292332,39.472119191976326],[-77.44588842407474,39.47211912994444],[-77.44588045973886,39.47211727130665],[-77.44587367672725,39.472115688317054],[-77.4458734742391,39.4721156449488],[-77.44586558164518,39.47211392114481],[-77.44585858398699,39.472112393910116],[-77.44585822674871,39.47211232140422],[-77.44585063862274,39.47211077929073],[-77.44584341356872,39.47210931326339],[-77.4458425979248,39.47210915872667],[-77.44583561554684,39.47210784309944],[-77.44582818639617,39.47210644719833],[-77.44582053338105,39.47210511969731],[-77.44581373897464,39.47210394116582],[-77.4458128698957,39.47210379043398],[-77.4458127361093,39.47210376842259],[-77.44580538857637,39.47210259918989],[-77.44579750942985,39.47210134910353],[-77.44579721397736,39.47210130698769],[-77.44579018468723,39.47210029237223],[-77.44578209337719,39.47209912325095],[-77.44577980666186,39.47209881845862],[-77.44577851674582,39.47209864590082],[-77.44577493894673,39.47209816765426],[-77.44563775858552,39.47217183424864],[-77.44563407947956,39.47217612203358],[-77.44563405178707,39.472176153663156],[-77.44563383361427,39.4721763877723],[-77.44562990069882,39.47218060265919],[-77.44562968240685,39.47218081785386],[-77.44562564463195,39.47218480615864],[-77.44562552680968,39.472184920093724],[-77.4456253095834,39.47218511997233],[-77.44562108262994,39.472188963978475],[-77.44562092891786,39.47218909966639],[-77.44562071737742,39.47218927970783],[-77.44561623191481,39.472193042727255],[-77.44561612323074,39.47219313140798],[-77.44561591275027,39.472193295232636],[-77.44561583874278,39.472193354058724],[-77.44561113982743,39.47219699358765],[-77.44561111206683,39.47219701440897],[-77.44561090844563,39.47219716019352],[-77.44560625752149,39.47220048519315],[-77.44560590231386,39.47220073513272],[-77.44560570674243,39.47220086737611],[-77.44560064334178,39.472204206545975],[-77.4456005090738,39.47220429262129],[-77.44560031689797,39.472204410440504],[-77.44559503188695,39.47220762254774],[-77.44559493463125,39.4722076805611],[-77.44559475165597,39.472207783033454],[-77.44558932028359,39.47221082185724],[-77.44558918709268,39.472210894417856],[-77.44558901796651,39.47221098152575],[-77.44558884420886,39.47221107135331],[-77.44558329426982,39.4722139214764],[-77.44558312626037,39.472214001374425],[-77.44557762578117,39.472216585600975],[-77.44557722599842,39.47221676995731],[-77.44557707996164,39.47221683265867],[-77.44557119790679,39.47221935527878],[-77.44557102635993,39.47221942708373],[-77.44557089419496,39.472219478023405],[-77.44556487966771,39.47222181830035],[-77.4455646953261,39.472221888352294],[-77.44556457589913,39.47222193203809],[-77.44555845556611,39.47222407996316],[-77.44555823986398,39.47222415283584],[-77.44555813895168,39.472224183841696],[-77.44555784435529,39.47222427772914],[-77.44555168664024,39.47222621052579],[-77.44555163096587,39.47222622784987],[-77.44554543593696,39.47222795632631],[-77.44554497652814,39.47222808416341],[-77.44553837513332,39.47222968987877],[-77.44553822428348,39.47222972647775],[-77.44553154491746,39.4722311307288],[-77.44553141492919,39.47223115824176],[-77.44552467265989,39.47223235466657],[-77.44552450663998,39.472232381415125],[-77.44552407704944,39.4722324460897],[-77.44551754704617,39.472233393115424],[-77.44556373846697,39.472338083455305],[-77.44567415796342,39.472588342060924],[-77.44572752282438,39.472709281895696],[-77.44527658156554,39.4733316542934],[-77.44460173239209,39.47303794867049],[-77.44450443215874,39.47299560068366],[-77.44462077547728,39.47255432127361],[-77.44462153216111,39.47255212068722],[-77.44462167488071,39.47255171482944],[-77.44462521289704,39.47254179187313],[-77.44462611396042,39.47253926468494],[-77.44462623744445,39.472538941765],[-77.44462989241256,39.472529321005275],[-77.44463097157423,39.47252646979024],[-77.44463114208874,39.47252604851543],[-77.44463482561682,39.47251690412277],[-77.4446359905948,39.47251402376106],[-77.44463610618726,39.47251373960132],[-77.44464001953335,39.47250454930546],[-77.44464108005137,39.472502060245716],[-77.44464150271416,39.472501077778006],[-77.44464168948141,39.472500653739736],[-77.44464546492165,39.47249226559525],[-77.44464716580349,39.472488484302694],[-77.4446473734098,39.47248804757579],[-77.44465116524528,39.472480049376244],[-77.44465310246169,39.472475964553155],[-77.44465322412506,39.47247572180316],[-77.44465711472745,39.47246790607444],[-77.44465930110148,39.47246352397733],[-77.44465933440705,39.472463460801976],[-77.44466331917882,39.47245583566786],[-77.44466576172259,39.47245116257522],[-77.44466586513137,39.47245097393663],[-77.4446697682135,39.47244384990491],[-77.4446722178295,39.4724393776435],[-77.44467248669453,39.472438887543476],[-77.44467256600987,39.47243874853481],[-77.44467646642342,39.47243193976109],[-77.44467946904437,39.47242669890834],[-77.4446796381002,39.47242641544745],[-77.44468340921652,39.47242011426084],[-77.44468671111893,39.47241460026385],[-77.44468689520883,39.47241430503699],[-77.44469059778314,39.472408377903065],[-77.44469420946,39.472402596126436],[-77.44469436024428,39.472402364074924],[-77.44469802284887,39.47239673432572],[-77.44470196291097,39.47239068740123],[-77.4447023878085,39.472390060704896],[-77.44470569368787,39.47238517989079],[-77.44470994728222,39.47237890840643],[-77.4447099657178,39.472378883116946],[-77.44471360222754,39.472373724536574],[-77.44471774328886,39.47236785429231],[-77.44471822019324,39.47236718146341],[-77.4447183250413,39.47236703695409],[-77.44472174269667,39.47236237458975],[-77.44472671938145,39.472355585168934],[-77.44472700408383,39.47235521120042],[-77.44473011969288,39.47235112192656],[-77.44473546679703,39.47234409872377],[-77.44473569047828,39.47234381595722],[-77.44473872514334,39.47233997648517],[-77.44474445665762,39.472332726653185],[-77.44474462388125,39.472332521560794],[-77.44474715657856,39.47232943517528],[-77.44474756367389,39.47232893464528],[-77.44475368433154,39.472321471676786],[-77.4447540200258,39.47232107499792],[-77.44475662721179,39.47231800634513],[-77.44476296410865,39.47231055607024],[-77.44476315329942,39.4723103328807],[-77.44476592157909,39.472307193364024],[-77.44477285781295,39.472299320194274],[-77.44477291205935,39.47229926054266],[-77.44477542934932,39.472296496668534],[-77.44478279204434,39.472288430937425],[-77.4447830414166,39.472288167889396],[-77.4447851644963,39.4722859207093],[-77.44479295835743,39.47227767140613],[-77.44479305650988,39.47227757105677],[-77.44479511192368,39.47227546734474],[-77.44480335209802,39.47226704071716],[-77.44480342832291,39.4722669647697],[-77.44480528094542,39.47226513924175],[-77.44481396866288,39.47225654609349],[-77.44481416158324,39.47225636162028],[-77.44481565178829,39.47225493377279],[-77.44482439793121,39.47224657638892],[-77.44482480687849,39.47224618573815],[-77.44482624077868,39.47224485988332],[-77.44483483263666,39.472236917407464],[-77.44483586681277,39.47223597045925],[-77.44483703167508,39.472234922138036],[-77.44484713795549,39.47222589219008],[-77.44484803261237,39.472225120506295],[-77.44485862268763,39.47221595992873],[-77.44485922847147,39.47221545324365],[-77.44487031755109,39.47220617819166],[-77.44487062859483,39.472205927520434],[-77.44487097894132,39.47220564337452],[-77.44488222019889,39.47219654338488],[-77.44450099782468,39.472029060962896],[-77.44415099498318,39.47187509992429],[-77.44418076053826,39.47181780435095],[-77.4443515434772,39.471489055199925],[-77.44331313501928,39.471469713591155],[-77.44243334700434,39.47080364232816],[-77.4433778303396,39.47018881244108],[-77.44367674029056,39.4699942882464],[-77.44392937489847,39.46983005023136],[-77.44386017472753,39.47121650138527],[-77.4466439793634,39.47113539562002],[-77.44869288297772,39.472372017649704],[-77.44939181172361,39.472269295081716],[-77.44953527419322,39.471737212867836],[-77.45017021116051,39.47142645064654],[-77.45040792027034,39.47161333444316],[-77.45075605848675,39.4720687939027],[-77.45171223439918,39.47192824457002],[-77.45167159870083,39.470049572732364],[-77.45344678237609,39.46954800607581],[-77.45315458006372,39.467509329791],[-77.45155727999138,39.46770193522789],[-77.45154714071298,39.46766203928071],[-77.45420207230869,39.46734258499514],[-77.45425700180073,39.467370351039754],[-77.45593218076728,39.46828175225511],[-77.4559527486755,39.46827869308133],[-77.45647162693581,39.468201527900554],[-77.45654406400443,39.46819079438484],[-77.45791264358729,39.46798798250251],[-77.45792146232621,39.4679866728087],[-77.4579461144401,39.46798301914987],[-77.45798119831558,39.46801953627072],[-77.45799290587249,39.468018026189],[-77.45815427454306,39.467997207338925],[-77.45838247346262,39.467967758780894],[-77.45910356989697,39.46787470877607],[-77.45925290920322,39.467831334660644],[-77.45899362499878,39.46730594268094],[-77.458712033537,39.46659081556575],[-77.4587225397009,39.466587400580295],[-77.4590424461918,39.466483428886576],[-77.45936235173677,39.46637945541943],[-77.46021666279611,39.46610178683726],[-77.45994684365255,39.46589189865187],[-77.45991827675493,39.46587107912757],[-77.45988802217454,39.465851744934476],[-77.45983121125067,39.46582788442199],[-77.45976625887786,39.465807755789385],[-77.45969873190435,39.465793601684595],[-77.45958177856856,39.46577466218889],[-77.45915888328064,39.46570617682334],[-77.45869755553629,39.46563146619287],[-77.45859924645555,39.46561554525105],[-77.45844720603252,39.46559092174975],[-77.45834488772557,39.46557531703975],[-77.45829946692241,39.465569241053956],[-77.45819075578743,39.46555517878633],[-77.45790547582989,39.465519677961595],[-77.45770630104599,39.46549489178089],[-77.45752289087294,39.46547120774292],[-77.45735571653181,39.465449620278854],[-77.45714488033275,39.46542041090304],[-77.45700584621466,39.4654011483363],[-77.45655311574642,39.465336288472706],[-77.45654763861845,39.46533550356763],[-77.4567027417688,39.46575561571414],[-77.45671198478779,39.46578065118412],[-77.45671687181591,39.46579388710749],[-77.45665356209291,39.46580792970139],[-77.4566487673595,39.46580899311783],[-77.45682645774815,39.46629027575765],[-77.4569438880005,39.46660833884937],[-77.45695757719,39.466645416669756],[-77.45657577831912,39.466730593299],[-77.45638789139561,39.466757717768616],[-77.45608059680667,39.46680208014633],[-77.45603338754027,39.46680889038605],[-77.45563011363599,39.46571758179668],[-77.45535934457003,39.46567192439383],[-77.45527958951759,39.46566052527781],[-77.45507906701069,39.465117862088334],[-77.45507610099847,39.4651098364966],[-77.45493661560116,39.46509032553759],[-77.45482833146505,39.465073593313335],[-77.45472090745203,39.46505381236174],[-77.45460433282382,39.46502866416387],[-77.45452393500042,39.46500860487137],[-77.45448914709452,39.46499992565745],[-77.45437553534013,39.46496764296953],[-77.4542304366716,39.46492044423001],[-77.45408869773917,39.46486746599993],[-77.4539506994879,39.46480885363903],[-77.45384234077729,39.46475756228002],[-77.45373685107194,39.4647027947288],[-77.45370042963528,39.46468270415023],[-77.45344243843573,39.46453815438753],[-77.45341225323027,39.46452124173991],[-77.45331043244519,39.464466791141824],[-77.45320562353385,39.46441585842605],[-77.45309803048288,39.464368543679704],[-77.45296124891857,39.46431510276813],[-77.45282092127151,39.464267505641104],[-77.45270145014352,39.4642328515746],[-77.452677462101,39.4642258939059],[-77.45253129630548,39.46419039111758],[-77.45249274451079,39.46418214100467],[-77.45181065602975,39.46404020711002],[-77.45168394174702,39.46401647571313],[-77.45155584632266,39.46399772590993],[-77.45142669423117,39.46398400418989],[-77.45048825034759,39.46390291892815],[-77.4501319663411,39.4638721329981],[-77.45008512400062,39.46386808498232],[-77.4499305395981,39.46385805986132],[-77.44977547785783,39.4638546484877],[-77.44962040825503,39.4638578607764],[-77.44946580247444,39.46386768862204],[-77.4493121297229,39.463884099611974],[-77.44915985562524,39.46390704603743],[-77.449009442179,39.46393645768803],[-77.44886134777829,39.46397224545439],[-77.44871602023056,39.464014299553305],[-77.44857390027202,39.46406249401766],[-77.44828818151939,39.464166744065366],[-77.44826010289522,39.46417929967965],[-77.44802154198702,39.46427294923744],[-77.4477650686318,39.46436911724701],[-77.4474936750058,39.464451826205014],[-77.44742330246055,39.46446761554047],[-77.44730521842767,39.46449723814147],[-77.44718566836123,39.46452308590292],[-77.4470500141588,39.46541126026723],[-77.446584305276,39.465417907151576],[-77.44657681801858,39.467080297932704],[-77.44457392619692,39.46706275898276],[-77.43820466030994,39.46636667291656],[-77.43767455484684,39.466355666631905],[-77.43770017027552,39.467022762890416],[-77.43812501126807,39.46701296338159],[-77.43815563231621,39.467810407784654],[-77.43761027819312,39.46782447873192],[-77.43754888730439,39.46635696041922],[-77.43671697011489,39.46633151722884],[-77.43634176173012,39.466293178473855],[-77.43634167620348,39.4662180667281],[-77.43346329099639,39.46570559347201],[-77.43129941272767,39.46572936311844],[-77.43128477611482,39.46577940345256],[-77.43124564179854,39.46577978814427],[-77.43116429157712,39.46578058498292],[-77.43126428769884,39.465436738272274],[-77.4310847923303,39.465563913730556],[-77.43012597286751,39.46557971945918],[-77.43039001777147,39.464724818025445],[-77.43144199724998,39.464922831786275],[-77.43144716115827,39.46490526972391],[-77.43145204357234,39.46488766185547],[-77.43145665379384,39.46487000904761],[-77.43146098371645,39.46485231583362],[-77.43146503450234,39.46483458220932],[-77.43146880731373,39.464816808170376],[-77.4314722975577,39.464799002740854],[-77.43147482731759,39.46478509370243],[-77.4314761667115,39.46477663832582],[-77.4314772282207,39.46476815694589],[-77.4314780084087,39.464759657681675],[-77.4314785014765,39.464751142355844],[-77.4314787121602,39.46474262536242],[-77.43147864276739,39.464734103990764],[-77.43147828521352,39.46472558637697],[-77.43147764884421,39.46471708059315],[-77.4314767301955,39.464708590254844],[-77.43147552696549,39.46470011897331],[-77.4314740450137,39.46469167483352],[-77.43147227856318,39.46468326326082],[-77.43147023812143,39.464674892323146],[-77.43146791672213,39.464666562946746],[-77.43146531905171,39.464658281419325],[-77.43146244632179,39.46465005584292],[-77.4314593043754,39.464641891600266],[-77.4314558897431,39.46463379140629],[-77.43145472340427,39.46463117911386],[-77.43145038834199,39.46462191857312],[-77.43144578764858,39.46461273556573],[-77.4314409225247,39.46460363639222],[-77.43143579877498,39.46459462013061],[-77.43143041414676,39.46458569849836],[-77.43142477442831,39.4645768678714],[-77.43141888433902,39.46456813994156],[-77.43141274736504,39.4645595146962],[-77.4314063588858,39.46455099665563],[-77.43139973056533,39.46454259298281],[-77.4313928577832,39.46453430819816],[-77.431385798936,39.46452619072615],[-77.43115704137027,39.46422287451988],[-77.43109543993498,39.46414711603801],[-77.43108814857756,39.46413858777348],[-77.4310806244014,39.46413018195665],[-77.43107286975803,39.46412190308245],[-77.43106488702074,39.46411375924847],[-77.4310566773352,39.464105747748484],[-77.43104825352175,39.464097874840384],[-77.43103960978142,39.46409014234681],[-77.43103075197905,39.464082559253356],[-77.43102168472431,39.464075119238146],[-77.43101242088684,39.46406783666535],[-77.43100295696429,39.46406070884569],[-77.4309932941515,39.46405374117896],[-77.43098344175543,39.46404693543251],[-77.43097340326749,39.46404029249421],[-77.43096318106109,39.46403382046171],[-77.43095278211362,39.464027520210195],[-77.43094221572652,39.46402139260621],[-77.43093147612812,39.464015443975846],[-77.43092057726786,39.4640096751688],[-77.43090952149164,39.46400408977918],[-77.43089831460385,39.46399868688505],[-77.43089757227443,39.46399833832374],[-77.43088486378885,39.46399250948167],[-77.43087201468289,39.46398686850062],[-77.43085902964835,39.46398142256901],[-77.43084591331659,39.463976168967804],[-77.43083266803356,39.46397111129116],[-77.43081929963644,39.46396625402126],[-77.43080581274035,39.46396159173692],[-77.4307922132154,39.46395713432439],[-77.43077850102864,39.4639528763796],[-77.43076740938214,39.46394960323329],[-77.43040362382243,39.463823847435705],[-77.42930567694516,39.463470887698875],[-77.4287277410796,39.46330361156532],[-77.4287257212628,39.46330299562602],[-77.42868657924424,39.4632909514871],[-77.42864754173536,39.46327870159268],[-77.42860861222793,39.46326624683078],[-77.42856979190051,39.46325358989935],[-77.42853107959145,39.4632407308028],[-77.42849248344581,39.46322767131301],[-77.42845399996149,39.4632144087406],[-77.42841563497599,39.46320094756809],[-77.42837738615464,39.46318728600261],[-77.4283392558326,39.463173425837276],[-77.42830124517754,39.4631593679686],[-77.42826335997783,39.46314510877282],[-77.42822559910987,39.46313065455911],[-77.42818796373044,39.46311600442266],[-77.42815045847678,39.46310115654538],[-77.42811307873392,39.46308611634836],[-77.42807583375972,39.463070877493095],[-77.42803871778268,39.46305544630572],[-77.42800174243378,39.46303982454543],[-77.42796490071949,39.46302400863499],[-77.42794844626296,39.46301701225555],[-77.42793185353804,39.463010209128406],[-77.4279151318567,39.46300360192184],[-77.42789828006232,39.46299719154071],[-77.42788130977463,39.4629909779427],[-77.4278642198478,39.462984963834145],[-77.42784701378406,39.462979151904314],[-77.42783703103407,39.462975887964085],[-77.42782383351187,39.4629717439972],[-77.42781052450458,39.462967803093846],[-77.42779712494958,39.462964068780806],[-77.42778362323781,39.462960542901605],[-77.42777003794994,39.46295722358731],[-77.42775636911853,39.462954116242074],[-77.42774262720131,39.4629512208278],[-77.4277288121926,39.462948536443896],[-77.42771492758378,39.46294606397824],[-77.42770098734563,39.46294380788375],[-77.42768698914864,39.46294176726803],[-77.4276729422939,39.46293994299809],[-77.42765885027272,39.4629383359619],[-77.42764471657092,39.462936946146826],[-77.42763055746688,39.46293577529511],[-77.42761636946912,39.462934822518754],[-77.42760339159864,39.46293414186526],[-77.42758696993933,39.462935448072926],[-77.42757057284696,39.462936973962655],[-77.42755421308122,39.46293871588531],[-77.42753789761942,39.46294067471629],[-77.42752162529929,39.46294285045976],[-77.4275054007687,39.46294524309896],[-77.4274892379712,39.46294785258327],[-77.42747312873476,39.46295067263734],[-77.42745708936494,39.46295370950707],[-77.42744142853405,39.462956893618035],[-77.42744068926312,39.46295704672001],[-77.42741810000008,39.46296167549506],[-77.42739544089898,39.46296609285209],[-77.4273727142676,39.4629702960805],[-77.42734992239753,39.462974279767735],[-77.42732706769985,39.46297805831631],[-77.4273041605402,39.462981616376545],[-77.42728119745996,39.46298495846444],[-77.42725818426382,39.4629880836583],[-77.42725148114184,39.46298893212718],[-77.42723918152633,39.462990310701024],[-77.42722684572962,39.46299147053201],[-77.42721447608112,39.46299241251238],[-77.42720208421164,39.462993138401316],[-77.42718967356915,39.46299364188141],[-77.42717725463334,39.46299392651743],[-77.42716482624773,39.462993993214276],[-77.42715240465297,39.462993837409485],[-77.42713998059149,39.46299346544166],[-77.42712757728106,39.462992873623705],[-77.42711519472194,39.46299206195566],[-77.42710284104798,39.462991030407984],[-77.42709051860508,39.462989782575086],[-77.42707823435431,39.462988316630245],[-77.42706599760251,39.46298663434118],[-77.4270538164781,39.46298473477773],[-77.427045602122,39.462983361255965],[-77.42702413712134,39.46297962367533],[-77.42700273239251,39.46297566790017],[-77.42698140306852,39.46297149837912],[-77.42696013988089,39.46296711964946],[-77.42693894976904,39.462962526281785],[-77.4269178397268,39.46295772185359],[-77.42689681441306,39.462952708149494],[-77.42687586801814,39.46294748519055],[-77.42685501332942,39.46294205383122],[-77.4268342526655,39.46293641316241],[-77.4268279021073,39.46293464376319],[-77.42682156653555,39.462932854493694],[-77.42681523664365,39.462931043586195],[-77.42680891709574,39.46292921372593],[-77.42645917037554,39.462834689177576],[-77.42645838901255,39.4628313287511],[-77.42646373463684,39.46282445768314],[-77.42650975354924,39.462765307052535],[-77.42520457434479,39.46242374184353],[-77.42274991588931,39.46146857352044],[-77.4210149851956,39.459697224105305],[-77.42077332179913,39.459780647079974],[-77.42056484366782,39.459794356636856],[-77.42050386457309,39.460374134743034],[-77.41969913249287,39.46040618849928],[-77.41957819305169,39.460665016516714],[-77.41950302760517,39.46066261818648],[-77.41916398942597,39.460651806314935],[-77.4188249524963,39.46064099076103],[-77.41848591452431,39.46063017693728],[-77.41814687665591,39.46061936213742],[-77.41780784353894,39.460608546344986],[-77.41755606485032,39.46060051418038],[-77.41746880587256,39.46059772869225],[-77.41737699930412,39.46059480163232],[-77.41712976831508,39.46058691096415],[-77.41679073202326,39.46057609225582],[-77.41671722521308,39.460573747526375],[-77.41634373849254,39.460561824462474],[-77.41629096850635,39.46056014113389],[-77.41625273973945,39.46055892339392],[-77.41616308328707,39.46055606074583],[-77.41632235167198,39.46008174512409],[-77.41632629599735,39.460070005715345],[-77.41616503715663,39.460082575873294],[-77.41611921554835,39.46008614698509],[-77.41603699548735,39.460089090074234],[-77.41543872650358,39.46012840419377],[-77.41528209833562,39.46013869421817],[-77.41528163374262,39.46013872648071],[-77.41515644292784,39.46014695363234],[-77.41489542509476,39.46016367919359],[-77.4146273812553,39.46018266537998],[-77.41448843870323,39.46019250837592],[-77.41435933259262,39.460201645568354],[-77.41409128727726,39.46022062603489],[-77.41381901173652,39.46023990808253],[-77.41381733340101,39.46024002656898],[-77.41352979937072,39.46026038567225],[-77.41342298877846,39.460267951066015],[-77.41311580580768,39.46028970218055],[-77.41307986638436,39.46029227998555],[-77.41286189401625,39.46030790519268],[-77.41275804322879,39.460315346116545],[-77.4125509316676,39.46033019409742],[-77.41241407173992,39.46034000212773],[-77.41211312568151,39.460361574760725],[-77.41205080677643,39.46036604328234],[-77.41183093030622,39.46038180474545],[-77.41171370376502,39.46039020574419],[-77.41154880908105,39.46040202478698],[-77.4112666772373,39.46042224418908],[-77.4110167332533,39.460440157347314],[-77.41093316731147,39.46044614867428],[-77.41066806702823,39.460465146192526],[-77.41042891984593,39.460482284570105],[-77.41043213269816,39.460466463187444],[-77.41043225689621,39.4604658394624],[-77.41047744062526,39.460243443168515],[-77.4105723166996,39.459776410599034],[-77.41062872844097,39.45949872179189],[-77.41068658902712,39.45921388523264],[-77.41074445150265,39.45892905401266],[-77.41080341257162,39.4586387966163],[-77.4108634791837,39.45834311391663],[-77.41092547575137,39.45803791380059],[-77.4109882953482,39.45772867195158],[-77.41105221910107,39.45741398227455],[-77.4111184251099,39.45708803736285],[-77.4127005825841,39.45720578909374],[-77.41272779026009,39.457003656728475],[-77.41273932433981,39.456933707501975],[-77.4129238752312,39.455814420383064],[-77.4135459130735,39.4559223217606],[-77.41354251941324,39.45595735159321],[-77.41360332172167,39.45595350547714],[-77.41425094551235,39.455912547021754],[-77.41452283738624,39.45589588631249],[-77.41457269984036,39.45589273212216],[-77.41475250246174,39.455881362482685],[-77.41470238541929,39.455709812657894],[-77.41465892009785,39.45551501359329],[-77.41462848647271,39.4553624282729],[-77.41475236926517,39.4553376376286],[-77.41476879636895,39.455334350712995],[-77.41519881549634,39.45524925542126],[-77.41547115061,39.45519536086749],[-77.41553478235771,39.45518258760765],[-77.41560124686332,39.45516924317134],[-77.41581394426662,39.455126540683096],[-77.41615683936674,39.45505769662054],[-77.41649972915769,39.45498885247495],[-77.41684262293944,39.45492000911426],[-77.41718968892079,39.45484850637598],[-77.41753286612239,39.45478046793304],[-77.41787602062102,39.45471243397083],[-77.41821917792409,39.45464439539187],[-77.41870131009429,39.45454831521928],[-77.41954484761904,39.45437893213228],[-77.41969521907728,39.45434873758645],[-77.41980639543873,39.45432644403743],[-77.41998998681771,39.45428963292912],[-77.42017889878844,39.45425175321698],[-77.42018671985285,39.45425028686951],[-77.42018808951306,39.45425006220799],[-77.42019601139334,39.45424874682001],[-77.42019734178106,39.45424856102921],[-77.42020535885526,39.45424742814582],[-77.42020664065979,39.454247278556835],[-77.4202147552142,39.45424632186481],[-77.42021598726836,39.45424620758113],[-77.42022418774357,39.45424543702958],[-77.42022537001534,39.45424535264697],[-77.42023364944572,39.45424476916147],[-77.42023477845487,39.45424471559313],[-77.42024313450617,39.45424431738052],[-77.42024421023675,39.454244291924354],[-77.42025263367317,39.45424408892545],[-77.42025365378005,39.45424408798697],[-77.42026213528557,39.454244076632186],[-77.42026310555127,39.454244095687216],[-77.42027163125351,39.45424428773532],[-77.42027254819784,39.454244327696934],[-77.42028111688693,39.4542447150458],[-77.42028198166636,39.45424477500926],[-77.42029058406911,39.45424536129485],[-77.42029138851872,39.45424543588503],[-77.42030002003061,39.45424622832944],[-77.42030077110009,39.454246313918595],[-77.42030941777922,39.45424731257165],[-77.42031010847609,39.454247405581924],[-77.42031877148432,39.45424861043947],[-77.42031940183537,39.454248715374355],[-77.42032806954914,39.45425012557712],[-77.42032864997341,39.45425023609452],[-77.42033730848821,39.45425185799714],[-77.42033782617344,39.454251968738404],[-77.42034647430616,39.454253798742286],[-77.42034693506679,39.454253910587475],[-77.42035556005871,39.45425595234099],[-77.42035597083913,39.45425606076169],[-77.42036455876426,39.45425831701675],[-77.42036490907576,39.45425841664612],[-77.4203734657274,39.45426088467988],[-77.42037376371357,39.45426097729033],[-77.42038226818943,39.454263658978874],[-77.42038251733044,39.454263743657236],[-77.42039095916333,39.45426663723654],[-77.42039115014306,39.454266710413215],[-77.42039953744991,39.45426981315212],[-77.42039967603469,39.454269867600885],[-77.4204079821201,39.45427318409829],[-77.42040807763668,39.454273225190114],[-77.4204163188039,39.454276761692824],[-77.42042446826646,39.45428050748796],[-77.42044422639327,39.454256766187285],[-77.42045084388779,39.454248866718736],[-77.4204640800395,39.45423306867696],[-77.42047737215138,39.45421730376023],[-77.42048402226617,39.45420942038604],[-77.42050405303576,39.454185815009545],[-77.42050445135843,39.454185391152365],[-77.42051272546084,39.454176677824115],[-77.42051335820125,39.45417601173853],[-77.42052161003845,39.45416765787385],[-77.42052249354252,39.454166763012125],[-77.42053070450919,39.4541587659754],[-77.420531851605,39.45415765039809],[-77.42054000426306,39.454150008450135],[-77.42054142775754,39.45414867661506],[-77.42054951858407,39.45414138346346],[-77.42055122318861,39.45413984616226],[-77.42055923238438,39.45413289377128],[-77.42056122976537,39.4541311590687],[-77.42056914106489,39.45412454749649],[-77.42057144866573,39.45412261803226],[-77.4205792480736,39.454116338321604],[-77.42058187411794,39.45411422937851],[-77.4205895488273,39.45410827707161],[-77.42059249915106,39.454105993132316],[-77.4206000363658,39.454100365572785],[-77.42060331916048,39.45409791651569],[-77.42061071066232,39.454092599321456],[-77.42061433529744,39.454089997723166],[-77.4206215648262,39.454084991853],[-77.42062554409779,39.45408224036982],[-77.42063260580696,39.45407753953972],[-77.42063694094635,39.454074649876404],[-77.42064381269705,39.45407024335686],[-77.4206485188722,39.45406722626778],[-77.42065519482327,39.45406310867538],[-77.4206602755838,39.45405997495633],[-77.42066674058336,39.45405613823884],[-77.4206722064338,39.45405289595864],[-77.42067845346288,39.45404933203478],[-77.42068430562924,39.45404599199751],[-77.42069032417787,39.454042691897655],[-77.42069656853877,39.454039265791515],[-77.42070234347658,39.454036225066204],[-77.42070899866415,39.45403272003027],[-77.42071452413388,39.4540299305941],[-77.4207215855702,39.45402635835385],[-77.42072684291315,39.45402380856423],[-77.42073432229684,39.45402018258854],[-77.42073931260535,39.45401786073233],[-77.42074720882803,39.45401419003214],[-77.42075191698767,39.45401209436202],[-77.42076023477155,39.45400839153038],[-77.4207646537526,39.4540065121636],[-77.42076862883934,39.45400481722768],[-77.42076932417592,39.45400451840825],[-77.42077119583067,39.45400372089353],[-77.42077340358621,39.45400278256727],[-77.42077752631076,39.454001101514905],[-77.4207867048264,39.453997364981426],[-77.42079051735253,39.453995882293405],[-77.42080013387691,39.45399214419372],[-77.42080363264432,39.453990847272806],[-77.42081369306688,39.453987121096375],[-77.42081686988932,39.4539860009648],[-77.42082736616294,39.45398230115175],[-77.42083021398918,39.45398134432405],[-77.42084115659704,39.453977675340326],[-77.4208436660951,39.453976875544896],[-77.4208550586298,39.453973255391865],[-77.42085722857367,39.453972601824674],[-77.4208690606377,39.453969040447205],[-77.42087088514329,39.45396852051932],[-77.42088316609019,39.453965027791746],[-77.42088463350721,39.453964636140576],[-77.42089736221793,39.453961219272465],[-77.42089847595699,39.45396094327604],[-77.42091165838545,39.45395762656524],[-77.42091240094415,39.4539574536761],[-77.42092603362084,39.453954239837074],[-77.42092640841511,39.453954158333794],[-77.42094048795113,39.453951063591454],[-77.42112100115376,39.45391288001802],[-77.42115943917472,39.45390474871195],[-77.42240080336173,39.45364216220737],[-77.42232040965929,39.45338232255255],[-77.42221176355943,39.4529321317173],[-77.4221662951981,39.45276134818608],[-77.42225554154516,39.45247334544319],[-77.42239522757332,39.452022562899],[-77.4224278169787,39.45191808290212],[-77.42252061996867,39.45162056546816],[-77.42267280582195,39.45112812006882],[-77.4227598634677,39.450813405815424],[-77.42310703876001,39.45073480542923],[-77.4235179353648,39.450641777770336],[-77.42351927195672,39.45064147662766],[-77.42395897959483,39.448213665176944],[-77.4263927185707,39.44898854739847],[-77.42798724174094,39.448994048340786],[-77.43114146596349,39.44984071593154],[-77.43158411391862,39.449924904584414],[-77.4317874847728,39.449607788926436],[-77.43153183099759,39.44906269334363],[-77.43142521899159,39.44868981024068],[-77.43121867610473,39.4477577465296],[-77.43246999551742,39.447863159799866],[-77.43281095498723,39.445430015238465],[-77.43426074838473,39.44562757241712],[-77.43424912156999,39.445679210172706],[-77.43423777493317,39.445730883822215],[-77.43422670500635,39.445782596080704],[-77.43421591410238,39.445834345138266],[-77.43420540335602,39.44588612648723],[-77.4341951762639,39.44593794191616],[-77.43418522584548,39.44598978964949],[-77.43417555558646,39.446041669674436],[-77.43417242752757,39.44605879032689],[-77.43416301768865,39.446111083718954],[-77.43415388798822,39.4461634057999],[-77.43414503727061,39.44621575747487],[-77.43413646787086,39.44626814053675],[-77.43412818090721,39.446320547775656],[-77.43412017407334,39.446372981902364],[-77.43411245084391,39.446425441102654],[-77.43410500773456,39.446477925389466],[-77.4340978435675,39.44653043206504],[-77.43409096416293,39.44658296290937],[-77.43408436718161,39.446635515229005],[-77.43407805029506,39.44668808813186],[-77.43407201698916,39.44674068160513],[-77.43406626260658,39.44679329386461],[-77.43406079643613,39.44684592397536],[-77.43405560916815,39.44689856926959],[-77.43405070198156,39.44695123244512],[-77.43404608183627,39.44700391167496],[-77.4340417417404,39.447056603381995],[-77.43403768520197,39.447109311156275],[-77.43403422380918,39.447157527564194],[-77.43398609400963,39.44799307441907],[-77.4342685965551,39.44801527490667],[-77.435714364782,39.44812887509938],[-77.43683340450397,39.44821679009089],[-77.43700863309533,39.44823148626736],[-77.43698195692173,39.44842288120765],[-77.43694201185801,39.44870946442051],[-77.43694161520654,39.4487133371707],[-77.43694150418806,39.448717183640866],[-77.43694166251045,39.44872099938789],[-77.43694166658511,39.4487210948487],[-77.43694210326986,39.44872483570404],[-77.43694211798928,39.448724961749676],[-77.43694281804507,39.44872864578326],[-77.43694285037967,39.44872880238789],[-77.4369438114218,39.44873241970063],[-77.43694386251669,39.448732604157875],[-77.43694507402283,39.44873614398029],[-77.43694514967558,39.44873635446712],[-77.43694661156236,39.448739803288795],[-77.43694670831553,39.44874004432174],[-77.43694840427966,39.448743395898056],[-77.43694853369516,39.448743658426956],[-77.43695045205244,39.44874690199273],[-77.43695061996114,39.44874718959881],[-77.43695275020592,39.44875031708658],[-77.43695295655232,39.44875062076293],[-77.4369552916474,39.44875362139018],[-77.43695554460254,39.448753947411454],[-77.43695806940634,39.448756814929354],[-77.43695836889802,39.448757151586506],[-77.43696107755738,39.448759878811046],[-77.43696142244048,39.44876022881048],[-77.4369642963119,39.448762806803686],[-77.43696469120003,39.44876316472395],[-77.4369677233019,39.44876559171027],[-77.43696817863416,39.44876595481051],[-77.43697134799945,39.448768221860576],[-77.4369718602627,39.448768585650235],[-77.43697515990436,39.448770690087784],[-77.43697572794251,39.44877105547187],[-77.43697914272438,39.44877299194879],[-77.43697976530336,39.44877334722259],[-77.43698328478644,39.44877511847975],[-77.43698396770385,39.4487754618203],[-77.43698757441197,39.44877705981607],[-77.43698831299301,39.44877738673713],[-77.43699199413025,39.44877880881692],[-77.43699279650157,39.44877911838757],[-77.43699653346333,39.448780361918246],[-77.4369973949502,39.44878064965225],[-77.43700118312275,39.448781720055194],[-77.43700210251332,39.44878197785067],[-77.43700592211371,39.44878286979502],[-77.43700689707897,39.448783096759854],[-77.43701073650637,39.448783812990776],[-77.43701176470607,39.44878400643144],[-77.43701560653437,39.448784547013666],[-77.43701669024195,39.44878469881537],[-77.4370205241488,39.44878508540434],[-77.43725104816593,39.448804400213135],[-77.43756789829297,39.44883094630212],[-77.43788474981942,39.44885749153395],[-77.43820159693092,39.448884035029465],[-77.43828943997693,39.4488913956941],[-77.43827042001186,39.44902788175963],[-77.43827721256412,39.449068724670894],[-77.43827793773727,39.44907307603356],[-77.43828423265414,39.449109538812095],[-77.43828573526424,39.44911823864046],[-77.4382914791764,39.4491503331944],[-77.43829381495588,39.449163375876545],[-77.4382989520922,39.44919110151297],[-77.4383021721099,39.44920847875209],[-77.43830665140752,39.44923184466837],[-77.43830914739705,39.44924486783845],[-77.43831081139619,39.449253550852475],[-77.43831458062472,39.44927256534977],[-77.43831629917169,39.449281239153414],[-77.43831973861836,39.44929859125539],[-77.43832273270112,39.44931325187396],[-77.43832362041903,39.44931758551729],[-77.43832893748463,39.44934359551774],[-77.43833108332404,39.449353917842174],[-77.43834053043805,39.449398484331425],[-77.43834061422652,39.449398882136016],[-77.43835025037549,39.44944301737784],[-77.43835042143232,39.449443812073305],[-77.43836024310902,39.44948751247784],[-77.43836050839933,39.4494887031375],[-77.43837050747169,39.449531968734995],[-77.4383708751393,39.44953355712994],[-77.4383810527749,39.44957638881676],[-77.43838152161915,39.44957836864637],[-77.43839186505018,39.44962076827144],[-77.43839244323154,39.44962314400895],[-77.43840295124612,39.449665103470224],[-77.43840364805341,39.44966787418033],[-77.43841431259206,39.44970940521715],[-77.43841512566293,39.449712564603516],[-77.43842593274572,39.44975366096283],[-77.43843789660976,39.449798073052236],[-77.43843794777064,39.44979826741639],[-77.43845012623633,39.44984243641228],[-77.43845023555123,39.44984282871734],[-77.4384626356119,39.449886758196435],[-77.43846280304179,39.44988734213761],[-77.43847542119569,39.44993102941072],[-77.43847564560133,39.44993180859505],[-77.43848847835801,39.44997525277446],[-77.43848876438096,39.44997622628389],[-77.43850180478131,39.45001942919681],[-77.43850215937566,39.45002059430336],[-77.43851541089407,39.45006355413539],[-77.43851582709495,39.4500649117656],[-77.43852928160506,39.450107629447665],[-77.43852977334817,39.45010917864896],[-77.43854343198971,39.45015165057385],[-77.43854399579553,39.450153392259836],[-77.43855785508913,39.450195619341194],[-77.4385584909355,39.450197549909085],[-77.43857254392756,39.45023953487483],[-77.4385732576403,39.450241657005066],[-77.43858751125146,39.45028339172294],[-77.43858830515421,39.45028570540681],[-77.43860275130271,39.45032719801326],[-77.43860362072071,39.45032969876464],[-77.43861825702739,39.45037094026133],[-77.43861921128291,39.45037363254896],[-77.43863402734797,39.45041463198167],[-77.4386498788017,39.45045772712329],[-77.43865014471092,39.45045845391102],[-77.43866599251702,39.45050076994433],[-77.4386665358645,39.45050220906529],[-77.43868237423071,39.450543748714075],[-77.43868319855825,39.450545909162116],[-77.43869901117478,39.450586665281364],[-77.43870013038536,39.45058954069957],[-77.4387159207875,39.450629521382574],[-77.4387173383838,39.45063311445999],[-77.43873308446975,39.45067231528549],[-77.43873481437149,39.45067662236722],[-77.4387504987254,39.450715045201555],[-77.43882064901123,39.45084106682614],[-77.43863429772026,39.450903462882636],[-77.43891508201796,39.45140762882718],[-77.43914266060456,39.451331448966776],[-77.43937023407642,39.45125527228461],[-77.43959780820342,39.451179092454225],[-77.43985789250127,39.45109203169399],[-77.4400623820319,39.45102357705857],[-77.44035182580268,39.45092690382053],[-77.44063174024214,39.45113691597615],[-77.44096255043895,39.45138510735168],[-77.44128063732126,39.4516237555496],[-77.44157328065957,39.451843307650925],[-77.44198937417471,39.45215547562665],[-77.44293028211911,39.45190421001972],[-77.4434048346243,39.45177780279505],[-77.4441191046679,39.45158754053453],[-77.44420301486534,39.45156518711168],[-77.44428723007393,39.45154275501623],[-77.4456901040973,39.451169047166275],[-77.4465340675952,39.45395765237685],[-77.44581432061632,39.45473002054716],[-77.44593910127482,39.45486766546898],[-77.44610354571576,39.45504906083234],[-77.44721963155175,39.45628016547501],[-77.44722818704594,39.456289615703255],[-77.44724978866797,39.45631364848618],[-77.44725899755848,39.45632389786625],[-77.44727974318614,39.45634724304668],[-77.44728957302735,39.45635830521219],[-77.44730947419818,39.45638095013689],[-77.44731991807701,39.456392834120884],[-77.44733898292837,39.45641477966011],[-77.44735002693216,39.45642749001872],[-77.447368269331,39.456448724411004],[-77.44737990302697,39.45646226478643],[-77.44739732993166,39.45648278620434],[-77.44740953942419,39.45649716385481],[-77.44742616471879,39.4565169632389],[-77.44743894306069,39.45653218179335],[-77.44745477018384,39.45655125192528],[-77.44746810580884,39.45656731953392],[-77.44748314869017,39.45658565855973],[-77.44749702880179,39.456602572568684],[-77.44751130250441,39.45662017412662],[-77.44752571556488,39.456637947189535],[-77.44753922351606,39.45665480225979],[-77.44755415908105,39.456673436217486],[-77.44756691750575,39.4566895384338],[-77.4475823651481,39.4567090378293],[-77.44759437871522,39.45672439077727],[-77.44761032800196,39.4567447592528],[-77.44762161054435,39.456759345766585],[-77.44763804643493,39.456780593287014],[-77.44764861070341,39.456794408814915],[-77.4476655227649,39.45681653902255],[-77.44767537572368,39.456829582637795],[-77.44769275465646,39.456852594667026],[-77.44770190905633,39.45686486181794],[-77.44771974327685,39.45688876111691],[-77.44772820835458,39.456900242761535],[-77.44774648396137,39.45692503568793],[-77.44775427600463,39.45693573536758],[-77.44777297788859,39.45696142107793],[-77.44778010259725,39.456971321657676],[-77.44779922850982,39.45699791186966],[-77.44780569637368,39.457007018714215],[-77.44782522770868,39.45703451079624],[-77.44783105259489,39.45704281214398],[-77.44785098012666,39.45707121693955],[-77.44785617014438,39.457078709156995],[-77.44787648574082,39.457108026696964],[-77.44788105015529,39.45711470524558],[-77.44790173640624,39.45714493829809],[-77.44790569377213,39.45715079770341],[-77.44792673909964,39.457181952617404],[-77.44793009635848,39.457186988349626],[-77.44795149265313,39.45721906875867],[-77.44795426024356,39.457223278076306],[-77.44797599125138,39.45725628584354],[-77.4479781830407,39.45725965698479],[-77.44800023486549,39.45729359936863],[-77.44800186250556,39.457296137693675],[-77.44802422816558,39.45733101291921],[-77.44802530438463,39.45733271027349],[-77.44804796649802,39.45736852561243],[-77.44804849707585,39.457369377470584],[-77.44807145214078,39.45740613023404],[-77.44808440890063,39.45742709188928],[-77.4480933659597,39.457441751154334],[-77.44810748653364,39.45746484577268],[-77.44811508504866,39.45747744306695],[-77.44813032079406,39.45750269515226],[-77.44813658158495,39.45751321598563],[-77.44815289422473,39.45754063559102],[-77.44815784630174,39.45754907444934],[-77.44817521265178,39.457578669769106],[-77.4481788803149,39.45758501124829],[-77.44819727021988,39.45761679050318],[-77.44819968828321,39.45762102816626],[-77.4482190692867,39.4576550031887],[-77.44822026558163,39.45765712882385],[-77.44824060750528,39.45769330423192],[-77.44854300633362,39.45823488694568],[-77.44930377783824,39.459597360508006],[-77.44751868367636,39.459120175507614],[-77.44582464531386,39.46207598259532],[-77.44555596096777,39.46211328372055],[-77.44544681365117,39.46204971720576],[-77.44533412909993,39.46198997397864],[-77.44521812999275,39.46193417298214],[-77.4450990447644,39.46188242503168],[-77.44497710991874,39.46183483100493],[-77.44496149905991,39.46185947403416],[-77.44452268784475,39.46168318821971],[-77.44450624980739,39.46170750555159],[-77.4428509212722,39.46104248224394],[-77.44269121777715,39.46097417907219],[-77.44253531497077,39.460900791290015],[-77.4423834809097,39.46082244400499],[-77.44223597791007,39.46073927405655],[-77.44209306135166,39.46065142461595],[-77.44093186289587,39.45989868301447],[-77.44082865204085,39.45982718981848],[-77.44073160916976,39.45975068169664],[-77.44064114178518,39.459669476892046],[-77.44055762497318,39.459583913585135],[-77.44048140837495,39.459494349866844],[-77.44041280918745,39.4594011592614],[-77.44046994666199,39.45935654131366],[-77.43998945507916,39.458722893419065],[-77.4397284061456,39.45886264765428],[-77.44031613458381,39.45963072519516],[-77.43822907203553,39.464306012848276],[-77.43958303774184,39.46450879982216],[-77.44022061299474,39.463724723265855],[-77.44255202393114,39.463704227644484],[-77.44260463562274,39.46368141846423],[-77.44256232990976,39.46300677852772],[-77.44320619981401,39.462912485473],[-77.44331776808072,39.4633722293898],[-77.44492739425046,39.46267437284371],[-77.44524876728141,39.46214290354041],[-77.44536489182357,39.462207498585215],[-77.44547655537433,39.4622766580859],[-77.44558345931623,39.46235019853864],[-77.44568429688056,39.462428748194384],[-77.44659300349765,39.46317802829619],[-77.4466297843806,39.4632081977774],[-77.44634788631502,39.464474746899704],[-77.4468956787206,39.46440360116073],[-77.44704703755876,39.464380622417195],[-77.44719654548267,39.46435125455248],[-77.44734375445789,39.46431558394196],[-77.44748822240531,39.464273719458376],[-77.44762951664767,39.4642257861534],[-77.44773320180539,39.46418795573338],[-77.44788183934484,39.46413372435039],[-77.4484817317672,39.463914845453395],[-77.44863457594393,39.46386301370186],[-77.448790871146,39.463817786130626],[-77.44895014300263,39.46377929784011],[-77.44911190658048,39.46374766685978],[-77.44927567215885,39.46372298872202],[-77.44944094176013,39.46370533917758],[-77.44960721609793,39.46369477056649],[-77.44971997608961,39.46369243412909],[-77.44977398762774,39.46369131544728],[-77.44994075214834,39.463694983850715],[-77.45010700184697,39.463705766008566],[-77.45144857601358,39.46382168584747],[-77.4515883407536,39.46383653507367],[-77.4517269620065,39.463856826119375],[-77.45186408737496,39.463882506297985],[-77.4525461721133,39.4640244389993],[-77.45269697793522,39.46405909708071],[-77.4528452578709,39.46409977873642],[-77.4529906126688,39.46414637292235],[-77.45313265111552,39.46419875415413],[-77.45327098886796,39.46425678161014],[-77.45340525193289,39.464320298217764],[-77.45353508017021,39.4643891333414],[-77.45382324348925,39.46455058830242],[-77.4539449127244,39.46461506884459],[-77.45407076812535,39.46467452606282],[-77.45420046466447,39.464728796444255],[-77.45433364811814,39.46477773272545],[-77.45483040024256,39.46356883938504],[-77.45558039778038,39.46320926467083],[-77.45650017163884,39.463339641703186],[-77.45663872834763,39.46332464901438],[-77.45669938797712,39.46298784901976],[-77.45723847367753,39.462083160136686],[-77.45756856836498,39.46132788571785],[-77.45834966999169,39.46082545764609],[-77.4567367112476,39.46008291253878],[-77.45684147532384,39.459985670457435],[-77.45805020425027,39.458863692861634],[-77.45838301767903,39.458554752673216],[-77.45873898322782,39.4582243239449],[-77.45898852786507,39.457992676843624],[-77.45904775349625,39.457937699669735],[-77.45952436404171,39.45749526804344],[-77.45952110383391,39.45748240415023],[-77.45951798874594,39.45746952167632],[-77.45951501760418,39.45745661882483],[-77.45951219273812,39.45744369648745],[-77.45951173967879,39.45744156266108],[-77.4595080966811,39.45742360762081],[-77.45950473581843,39.45740561995443],[-77.45950165011925,39.45738759968914],[-77.45949885243424,39.45736955758339],[-77.45949632991235,39.45735148287879],[-77.4594940919712,39.457333394453585],[-77.45949213620489,39.45731527970718],[-77.45949046036554,39.45729715035771],[-77.4594890702799,39.457279009084516],[-77.45880242142682,39.4573507242924],[-77.45874331197241,39.45701061235358],[-77.4586865639782,39.45668410995586],[-77.45843690093353,39.45524754467],[-77.45791178340419,39.45512979000481],[-77.45832861853877,39.45317116568821],[-77.45831989312072,39.45315861214579],[-77.45831092325702,39.45314616673925],[-77.45830169620285,39.453133834922454],[-77.45829223283008,39.45312161030913],[-77.45828252505278,39.453109500136435],[-77.45827258221225,39.45309751157359],[-77.45826239845859,39.453085638338344],[-77.45825198082687,39.45307389031118],[-77.45824132814964,39.45306226659584],[-77.45823044859455,39.45305077256473],[-77.4582193445086,39.45303941181155],[-77.45820801005948,39.45302818075607],[-77.45819645809708,39.453017090156834],[-77.45818468626875,39.453006135519345],[-77.45817269928588,39.452995326732974],[-77.45816049828113,39.452984659289854],[-77.45814808562477,39.452974140386345],[-77.45814033766854,39.452967734916456],[-77.45798647097077,39.45284985959895],[-77.45797964466685,39.45284511415595],[-77.45796258519216,39.45283305416622],[-77.4579457279908,39.4528208312585],[-77.4579290603411,39.45280845448948],[-77.45791259379713,39.45279591390637],[-77.45789632146965,39.452783222146174],[-77.45788025610346,39.45277037375507],[-77.45786439193041,39.45275737506059],[-77.45784873591548,39.45274422513496],[-77.4578332880936,39.452730929382504],[-77.4578180542447,39.45271748327719],[-77.45780303327676,39.452703897632006],[-77.45778822979048,39.452690165223316],[-77.45777364269387,39.45267629686413],[-77.45775927662837,39.45266229163569],[-77.45774513043197,39.45264814954262],[-77.45773121574032,39.45263387324197],[-77.4577175244439,39.452619466368134],[-77.45770406235752,39.4526049297993],[-77.45769083297826,39.452590265323465],[-77.45767783284967,39.45257547745763],[-77.4576650724163,39.45256056435989],[-77.45765254941855,39.452545535946946],[-77.45760021856209,39.45248181820993],[-77.45748135471996,39.45233709815616],[-77.45746329132952,39.452315285436676],[-77.4574449882144,39.4522935907387],[-77.4574264488659,39.452272014949216],[-77.45740767212814,39.452250558973375],[-77.45738866271257,39.45222923270068],[-77.4573694240697,39.4522080307132],[-77.45734994924632,39.45218695574007],[-77.45733024869868,39.452166007740566],[-77.45731031780305,39.45214519033536],[-77.45729016238003,39.45212450530319],[-77.45726978126808,39.45210395264846],[-77.45724917681399,39.452083535964796],[-77.45722834670595,39.452063257062484],[-77.45722081420999,39.45205600492172],[-77.4570911307995,39.45243387871378],[-77.45654996893002,39.4522232875838],[-77.45639276504086,39.4521617935236],[-77.45641597340318,39.45214120957529],[-77.4560015317708,39.45176517021771],[-77.4558870051163,39.45166125580064],[-77.45556495468281,39.45136904527211],[-77.45520379872066,39.4510413490848],[-77.4550454941837,39.450897704930604],[-77.45478224375434,39.45065884047668],[-77.45449471023615,39.450397936747166],[-77.4549778628412,39.45004032021253],[-77.45501630602094,39.4500118666405],[-77.45466637904295,39.449702456680946],[-77.45462793590795,39.4497309128439],[-77.45387945107561,39.450284915570926],[-77.45378629839388,39.45035306883584],[-77.4532580016977,39.45005273489971],[-77.4529792306529,39.449894253833726],[-77.45320278604069,39.44969454508326],[-77.45346273617183,39.44946232487341],[-77.45354861262709,39.44938560612869],[-77.45346831997855,39.44919799883072],[-77.45321345212854,39.44860250284134],[-77.45348671568215,39.44836359834857],[-77.45371839170865,39.4481610487763],[-77.45375689737477,39.448127382003],[-77.453792729697,39.44809605567518],[-77.45382072073468,39.44807316144904],[-77.4538858212587,39.448124812542964],[-77.45579402837244,39.44627675370897],[-77.45594870109811,39.445777745265595],[-77.45633178788594,39.44383129855532],[-77.45650904350454,39.44387167877255],[-77.45651805258623,39.443873505626314],[-77.45653172215664,39.44387818049498],[-77.4565443918655,39.443880748855314],[-77.4573331738206,39.444135401212755],[-77.45749563907775,39.4441878502795],[-77.45761655920951,39.444226887675875],[-77.45850967525058,39.4445152124793],[-77.45903013046272,39.444683225767456],[-77.45927640846908,39.444762728328584],[-77.45929270270683,39.444732496100514],[-77.45930372813304,39.44471203830484],[-77.45937732773332,39.444739924741725],[-77.45990165564851,39.4449385840301],[-77.46008193102925,39.445006887363576],[-77.46147725294803,39.4455355329228],[-77.46150107013439,39.44550322717802],[-77.46227602944721,39.44445205413946],[-77.46240504662366,39.444277050354664],[-77.46295307372284,39.44353366629003],[-77.463103741261,39.44325886782664],[-77.46333858721768,39.44283053724982],[-77.46370663550225,39.44262531039962],[-77.46375579463155,39.44250378626373],[-77.46317173357777,39.44236968317187],[-77.46233287521845,39.44217707109511],[-77.46225853690868,39.442160001623996],[-77.46187046689724,39.443036234807764],[-77.46159737579266,39.44290507212684],[-77.46155367841986,39.44288408464475],[-77.46155075798798,39.44275635519073],[-77.46180931042163,39.442056440728145],[-77.46109074273397,39.44189064061145],[-77.46114713704425,39.441785325583986],[-77.461321414676,39.441459863161974],[-77.46178022071365,39.44060303190544],[-77.4618349764198,39.44050077275867],[-77.46222038130146,39.43955716645325],[-77.46250307652065,39.438865013619555],[-77.46224899920756,39.43888072296841],[-77.46224544945123,39.43887985239857],[-77.46135114485685,39.43866047347693],[-77.46132454089438,39.43765562385969],[-77.46124868174691,39.43704643207558],[-77.46090910789171,39.43696597296478],[-77.46093815978666,39.43689224779324],[-77.46082554741476,39.43689620327173],[-77.46034953654696,39.43697978262361],[-77.46035366179153,39.43697878470645],[-77.46036993857977,39.436974613768896],[-77.46038612573525,39.43697023511307],[-77.46040221630015,39.436965650567615],[-77.46041820562824,39.436960860150776],[-77.46043409140213,39.43695586477234],[-77.46044986900485,39.436950668954076],[-77.460465536078,39.436945267300906],[-77.46048108107043,39.43693966976595],[-77.46049650859311,39.4369338709269],[-77.4605118105678,39.4369278789219],[-77.46052697999,39.43692168837411],[-77.4605420180563,39.43691530468312],[-77.46055691549766,39.436908731488266],[-77.46057167462537,39.436901966979],[-77.46058628383568,39.436895013002236],[-77.46060074547492,39.43688787315177],[-77.4606150514299,39.43688055016158],[-77.46062919935979,39.436873041338664],[-77.46064318818506,39.43686535929737],[-77.46065700855469,39.43685749506723],[-77.46067066165367,39.436849452246435],[-77.46068413940961,39.43684123987395],[-77.4606974394878,39.43683285615743],[-77.46071056189396,39.43682430199769],[-77.46072349850313,39.43681557832735],[-77.4607362470509,39.43680669416242],[-77.46074880635213,39.43679764590482],[-77.46076116946696,39.436788438085316],[-77.46077333408978,39.436779073415195],[-77.4607852990591,39.436769551899054],[-77.46079706209287,39.43675987985092],[-77.46080861392217,39.43675006091],[-77.46081995685257,39.436740092365156],[-77.46083108278249,39.436729978751885],[-77.46084199408793,39.4367197281673],[-77.4608526860992,39.43670933702687],[-77.46086315420534,39.43669881075313],[-77.46087339493357,39.43668815116108],[-77.46088340830148,39.43667736095287],[-77.46089318969811,39.43666644555105],[-77.46090274146417,39.43665540764854],[-77.46091205430162,39.43664424638112],[-77.46092112591664,39.43663296626146],[-77.46092995635041,39.43662157359453],[-77.46093854445321,39.436610070186205],[-77.46094688790787,39.43659845694646],[-77.46095497977453,39.43658673840606],[-77.46096282242331,39.43657492176151],[-77.46097040999383,39.436562998929396],[-77.4609777460587,39.43655098340661],[-77.4609848224932,39.436538876125624],[-77.46099164047062,39.436526678883396],[-77.46099819887068,39.43651439798941],[-77.46100449071827,39.43650203257035],[-77.46101052420302,39.43648959160127],[-77.4610162876862,39.436477071525005],[-77.46102178587269,39.43646448133036],[-77.46102701412238,39.43645182193626],[-77.46103196896831,39.436439096058464],[-77.46103281847692,39.43643683912721],[-77.46104827225558,39.436398178199255],[-77.4610634526275,39.436359452586835],[-77.46107836423927,39.43632066227185],[-77.46109300247444,39.436281811776105],[-77.46110736382539,39.43624289751057],[-77.46112146228963,39.43620392842769],[-77.46113528503201,39.436164895570585],[-77.46114883093246,39.436125805248885],[-77.46116210466097,39.436086661047185],[-77.46117510388325,39.43604746117337],[-77.46118783209013,39.436008206514494],[-77.46120027884005,39.43596889891303],[-77.46120531350108,39.43595274456746],[-77.46120643414262,39.435949138192456],[-77.46121527290082,39.43592121542998],[-77.46122438844267,39.435893344724676],[-77.46123377730675,39.435865529692954],[-77.46124343949857,39.435837771235526],[-77.46125337387402,39.435810072058814],[-77.46126358160011,39.43578243305902],[-77.46127406150332,39.4357548524392],[-77.46128481130725,39.43572733741396],[-77.46129583447271,39.435699884366755],[-77.46130712754419,39.435672497814735],[-77.46131868588704,39.435645179577364],[-77.46133051764929,39.435617932324845],[-77.46134261469408,39.43559075518821],[-77.46135498164374,39.435563644546356],[-77.46136761511329,39.43553661572487],[-77.4613805103859,39.43550965793333],[-77.46139367569174,39.43548278645173],[-77.46140710393816,39.435455982392654],[-77.46168692361356,39.43490374818358],[-77.4616908593379,39.434894906576325],[-77.46169635096516,39.43488312881908],[-77.46170211608691,39.43487143285529],[-77.4617081441906,39.43485980971892],[-77.4617144307065,39.43484827113725],[-77.4617209803099,39.43483682159545],[-77.46172778953968,39.43482546471003],[-77.46173485258812,39.43481420050369],[-77.46174216600001,39.43480303349351],[-77.46174973676784,39.43479196725493],[-77.46175755331164,39.434781007237696],[-77.46176561796605,39.43477015523394],[-77.46177392493531,39.43475941306793],[-77.4617824730871,39.43474878524753],[-77.46179126245664,39.43473827717696],[-77.46180028607483,39.43472788888347],[-77.46180954165379,39.434717625780394],[-77.46181903037264,39.43470749056513],[-77.46182874759117,39.43469748415654],[-77.46183868754876,39.43468761378296],[-77.46184885255666,39.43467787763388],[-77.46185923453127,39.43466828294668],[-77.46186982882652,39.434658829739554],[-77.46188063778895,39.434649521606104],[-77.4618916556462,39.434640363973266],[-77.46190288006936,39.43463135594936],[-77.46191430759743,39.434622501150876],[-77.4619259266506,39.43461380502748],[-77.46193774535351,39.43460526664648],[-77.4619497532761,39.434596889651715],[-77.4619619527826,39.43458868033879],[-77.46197001591088,39.43458365419481],[-77.46198225327231,39.43457626258666],[-77.46199466482467,39.43456904323211],[-77.46200724016141,39.43456200337783],[-77.4620199839228,39.43455514210481],[-77.46203288334405,39.43454846126452],[-77.46204594078932,39.43454196715275],[-77.46205914693724,39.43453565530233],[-77.46207250067341,39.434529532923456],[-77.46208599618446,39.43452359913811],[-77.46209962886563,39.43451786026935],[-77.46211339288588,39.434512312737226],[-77.46212728944205,39.43450696194125],[-77.4621413034406,39.43450180884137],[-77.46215544302389,39.43449685520704],[-77.46216969425976,39.43449210199359],[-77.46218405253765,39.43448755462351],[-77.46219851897791,39.43448320678718],[-77.46221308200093,39.434479063934496],[-77.46222774163027,39.43447512966809],[-77.4622424909147,39.43447140671744],[-77.4622573275137,39.43446789238959],[-77.46264643321805,39.43437867225948],[-77.46266709775036,39.434373819921646],[-77.46268768075255,39.43436875623096],[-77.46270817294993,39.43436348392609],[-77.46272857901201,39.43435800659164],[-77.46274888846145,39.43435232066591],[-77.46276910129818,39.43434642614892],[-77.46278920943271,39.434340329377626],[-77.4628092139851,39.43433402404262],[-77.46282911038587,39.43432752187128],[-77.46284889625285,39.43432081386584],[-77.46286856697529,39.43431390544876],[-77.46288811676908,39.43430680024578],[-77.4629075479217,39.434299492843564],[-77.46292685118821,39.43429199048439],[-77.46294602773585,39.43428429406442],[-77.46296507291257,39.43427640270122],[-77.46298398207813,39.43426831731392],[-77.46300275292711,39.43426004061374],[-77.46302137964598,39.43425157172295],[-77.46303986343736,39.43424291694192],[-77.46305820195464,39.434234072677015],[-77.46307638593514,39.43422504346835],[-77.46309441770761,39.434215830207634],[-77.46311228800364,39.434206436534225],[-77.46313000145139,39.43419685972788],[-77.46314755111126,39.434187104319484],[-77.4631649323313,39.434177169426746],[-77.46318214629649,39.434167058647944],[-77.46319918606723,39.43415677651407],[-77.46321605163172,39.434146321223814],[-77.46323273834979,39.43413569369626],[-77.46324924391604,39.434124896642665],[-77.46326556719258,39.43411393367045],[-77.46328170237769,39.4341028057033],[-77.46329764833936,39.434091517249364],[-77.46331339922882,39.43408006202661],[-77.46332895745742,39.43406845353653],[-77.46334431948766,39.43405668368656],[-77.46335947957094,39.434044761506684],[-77.46337444000672,39.43403268338498],[-77.46338803863448,39.434021417668816],[-77.46390572539357,39.43358748787358],[-77.46398673327445,39.433519582019684],[-77.46387853342411,39.43342235393032],[-77.4639181470017,39.43332468382926],[-77.46396177158532,39.43328963413271],[-77.46400519302328,39.43325443209734],[-77.46404841132154,39.433219078624106],[-77.46409142298971,39.4331835728262],[-77.46413422574031,39.43314792011719],[-77.46417682187274,39.433112116885376],[-77.46421920790257,39.43307616314473],[-77.4642613908224,39.43304006247074],[-77.46430335668856,39.43300381401797],[-77.46434511364927,39.43296742045656],[-77.46438665936971,39.432930879994586],[-77.4644279892396,39.43289419805477],[-77.46446910902492,39.43285736830948],[-77.46451001179244,39.43282039619067],[-77.46455070103262,39.43278328258553],[-77.4645911732551,39.43274602660724],[-77.46463142498152,39.43270862917059],[-77.46467146317492,39.432671089347515],[-77.46471128206937,39.43263341346604],[-77.46475087930668,39.43259559613139],[-77.46479025607782,39.4325576418427],[-77.46482941584982,39.432519547884304],[-77.46486834937224,39.43248132059801],[-77.46490706127342,39.4324429572636],[-77.46494555385868,39.43240445516999],[-77.46498381790151,39.4323658242618],[-77.46502185800058,39.432327057315305],[-77.46505967070125,39.43228815884802],[-77.46506475950893,39.43228289563717],[-77.46464238936801,39.43202303239211],[-77.46469020485226,39.431962181774],[-77.46491714628094,39.4317338775117],[-77.46497247887127,39.43167821046632],[-77.46525301869748,39.431395982793994],[-77.46564237950668,39.43161090500329],[-77.46565604832051,39.43159736801243],[-77.46566991889712,39.43158395722374],[-77.46568399588817,39.43157067351936],[-77.46569827235452,39.43155752143037],[-77.46569933572485,39.43155655435077],[-77.46571441921031,39.43154301716055],[-77.46572971734062,39.43152962233405],[-77.4657452278225,39.431516374383826],[-77.465760946016,39.43150327422896],[-77.46577686613156,39.43149032459441],[-77.46579299631125,39.43147752724932],[-77.46580932496417,39.43146488584236],[-77.46581252044727,39.4314624493521],[-77.46581572177297,39.43146001824299],[-77.46581893125833,39.43145759160508],[-77.46582215125582,39.431455173932775],[-77.46583347028144,39.4314467506159],[-77.46585028347357,39.431434494596495],[-77.46586728937908,39.431422401743546],[-77.4658844868306,39.431410471160795],[-77.46590187002684,39.431398703771926],[-77.46591943783596,39.431387104084955],[-77.46593718794105,39.431375673009626],[-77.46595511570227,39.43136441146499],[-77.46597322577134,39.43135332033326],[-77.46599150539606,39.431342403267735],[-77.46600996155708,39.4313316620422],[-77.46602858030505,39.43132109491027],[-77.46604736749487,39.43131070905448],[-77.46605954872285,39.43130411527307],[-77.46607860266634,39.43129402469402],[-77.46609781343133,39.43128411453618],[-77.4661171822031,39.431274388397696],[-77.46613669969604,39.431264847216035],[-77.46615637171156,39.43125549006737],[-77.46617618553898,39.43124632690999],[-77.46619615041665,39.431237349600636],[-77.46621624313934,39.431228561834125],[-77.46623648232013,39.431219968040196],[-77.46625685400979,39.43121156647264],[-77.46627735823803,39.43120336163486],[-77.46629799148506,39.43119534813644],[-77.46631874568027,39.43118753501648],[-77.46633962544571,39.43117991865375],[-77.4663051948217,39.430923238171715],[-77.46638909238146,39.430892448745325],[-77.46646932155939,39.430619055889906],[-77.46651881330442,39.43045040648931],[-77.46656751525585,39.430284437137544],[-77.46664999558367,39.430003359208804],[-77.46700846678276,39.43003210731455],[-77.46763255042411,39.4300821491021],[-77.46806930491755,39.43011716905377],[-77.46808050256327,39.43006323243926],[-77.46815780118936,39.42969100366927],[-77.46819882747204,39.42949343970046],[-77.46833091446635,39.42941010441876],[-77.468612384767,39.429232515326575],[-77.46889385479301,39.42905492194315],[-77.46917532694485,39.428877335968345],[-77.46956949588555,39.42862863889448],[-77.46985922121996,39.428389436715186],[-77.4700065550793,39.428267794798074],[-77.47000588092442,39.428126710756715],[-77.4700005625711,39.42795803985555],[-77.47000042243586,39.4276601654855],[-77.4700004196942,39.42765555378784],[-77.47000358584847,39.427222229653125],[-77.47000624107085,39.42685907754366],[-77.47000784285173,39.4266397266876],[-77.47001137372777,39.42615673858378],[-77.47001309661796,39.42592099670096],[-77.47010815064519,39.42594277583614],[-77.47033727271341,39.42599526990611],[-77.47069067648938,39.42607623572687],[-77.47072601715091,39.42608433333038],[-77.4708702904763,39.426122505457016],[-77.47086379425596,39.426303516786476],[-77.47086317033322,39.42632094200215],[-77.47088875422291,39.42632782387653],[-77.47111162940011,39.42638776790603],[-77.47125192863359,39.42642550240544],[-77.47158608423125,39.42651537510602],[-77.47157856796828,39.42659807734062],[-77.47153405066712,39.42708782926715],[-77.47094800560487,39.42707334633339],[-77.4708622638019,39.42700223937496],[-77.47085742685601,39.427125404886255],[-77.47085424467005,39.42720644769576],[-77.47152177082003,39.427222947513336],[-77.47137052562131,39.428886828954695],[-77.47186219129327,39.42858290753315],[-77.47199387023531,39.42880318491967],[-77.47210348024842,39.42898655341904],[-77.47225993570916,39.429248282408686],[-77.47250664980403,39.42966098762785],[-77.4726093977622,39.42963533416201],[-77.47310568904052,39.42951141134579],[-77.47351570608053,39.429409071678066],[-77.47376845538851,39.42934596147541],[-77.47406900751615,39.42927091097476],[-77.47407808751699,39.42926862079446],[-77.47408715214131,39.42926628924206],[-77.47409619558194,39.429263916340986],[-77.47410522017991,39.429261504783994],[-77.47412546060883,39.42925592434024],[-77.47414559398194,39.42925014076062],[-77.47416563304454,39.42924414949017],[-77.47418556505096,39.429237955083856],[-77.47420539233002,39.42923155843319],[-77.47422510906841,39.429224958660775],[-77.47424471178172,39.4292181557808],[-77.47426419935061,39.42921115610292],[-77.47428356130408,39.4292039569671],[-77.4743028011142,39.42919655655804],[-77.47432191304623,39.42918896570758],[-77.47434089589021,39.4291811772149],[-77.47435974386318,39.42917319470616],[-77.47437845465423,39.42916501999226],[-77.47439702712593,39.429156656680725],[-77.47441545196881,39.429148102107014],[-77.47443373153571,39.429139360765284],[-77.47445186117491,39.429130431773565],[-77.47446983630091,39.429121324157784],[-77.47447608763477,39.42911809238209],[-77.47449384967997,39.429108732517946],[-77.47451145141684,39.42909919585468],[-77.4745288916356,39.42908947519139],[-77.47454616458937,39.42907957955854],[-77.47456326677585,39.42906950626821],[-77.47458019358548,39.42905926074338],[-77.47459695082534,39.4290488429607],[-77.47461352455828,39.429038252976405],[-77.47462991830483,39.42902749618079],[-77.47464612509647,39.42901657260199],[-77.47466215190764,39.42900548311266],[-77.47467798482546,39.42899423137196],[-77.47469362386208,39.428982819181186],[-77.47470906902342,39.428971247441304],[-77.47472431569409,39.42895952067454],[-77.47473935921029,39.42894763619758],[-77.47475419959613,39.42893559761336],[-77.47476149483532,39.42892956396256],[-77.47478586647316,39.428909275930046],[-77.47500302050054,39.42872847387427],[-77.47522017808252,39.42854767409017],[-77.47545928606438,39.428348591497084],[-77.47555635389136,39.42826777189342],[-77.47556892705083,39.428257142988755],[-77.47558128783868,39.42824636722188],[-77.47559343512364,39.42823544910111],[-77.47560536888768,39.42822438592443],[-77.47561708104327,39.42821318402956],[-77.47562857739757,39.42820184339321],[-77.47563984638487,39.428190371267895],[-77.47565088799323,39.4281787658523],[-77.47566118572641,39.428167596689995],[-77.47567177848697,39.428155739982536],[-77.47568213815852,39.42814376441963],[-77.47569225888564,39.42813166281921],[-77.47570214306997,39.42811944688106],[-77.47571178720916,39.42810711391723],[-77.47572118435305,39.42809466665801],[-77.47573033918364,39.42808211048891],[-77.47573924593033,39.428069450837626],[-77.47574790109688,39.42805668591695],[-77.47575630703045,39.42804381932029],[-77.47576445679294,39.42803085557941],[-77.47577235271945,39.42801779648634],[-77.47577999252958,39.42800464835543],[-77.47578737271505,39.42799140759799],[-77.47579242104823,39.4279820142529],[-77.47579931648332,39.427968709701105],[-77.47580594890074,39.4279553260475],[-77.47581231951035,39.42794187049308],[-77.4758184270965,39.42792833493626],[-77.47611728288413,39.42720418774831],[-77.4761224528246,39.42719130448635],[-77.47612735053828,39.42717835387011],[-77.47613197377517,39.4271653467175],[-77.47613632485822,39.42715228301915],[-77.47614040378753,39.427139162775006],[-77.47614420597232,39.427125994110305],[-77.47614773141262,39.427112777024995],[-77.47615097669713,39.427099522341614],[-77.47615140342198,39.427097694846246],[-77.47617524885398,39.42699448880883],[-77.47617610814338,39.426990148342426],[-77.47617668386111,39.42698578019999],[-77.47617697954594,39.42698139247374],[-77.47617699297209,39.42697699958426],[-77.4761767195728,39.42697261325944],[-77.47617617334534,39.42696824244988],[-77.47617533693567,39.42696389713382],[-77.47617422437123,39.4269595907653],[-77.47617283689839,39.426955335949486],[-77.47617117568448,39.426951133582335],[-77.47616924783733,39.426947004351774],[-77.47616705340532,39.42694295546336],[-77.47616460173414,39.42693899498585],[-77.4761618963928,39.42693513551492],[-77.47615894789428,39.42693138601525],[-77.47615576210616,39.42692775547033],[-77.47615234373457,39.42692425286841],[-77.47614870678272,39.42692088806073],[-77.4761448547711,39.426917666437404],[-77.4761408017151,39.426914599651184],[-77.47613655578076,39.426911693073315],[-77.47613212631357,39.426908954772536],[-77.47612752846611,39.42690639279401],[-77.47612276806338,39.42690400981634],[-77.47611786143746,39.42690181658216],[-77.47611282136343,39.426899813039846],[-77.47610765489448,39.42689801177089],[-77.47610238407856,39.42689640998399],[-77.4760970112869,39.4268950148753],[-77.47609389162588,39.426894308714914],[-77.4754121520559,39.42674832836989],[-77.47542973529079,39.426695672130606],[-77.47483156039337,39.42656342650147],[-77.47482844160533,39.426562846405595],[-77.47480666039955,39.426558667534145],[-77.47478495209293,39.42655427489285],[-77.47476331321356,39.42654967029712],[-77.4747417541959,39.426544851002795],[-77.47472027510057,39.426539826016956],[-77.4746988805068,39.426534585413116],[-77.47467757166673,39.42652914269722],[-77.47465635081265,39.426523484349374],[-77.4746352273384,39.426517625644074],[-77.4746141977057,39.426511558489246],[-77.47459327006854,39.42650528645478],[-77.4745724432656,39.42649880954553],[-77.47455172889275,39.42649212501258],[-77.47453112586113,39.426485243669084],[-77.474510631812,39.42647816012023],[-77.47449025605457,39.42647087703079],[-77.47446999973224,39.42646339169394],[-77.47444986986774,39.42645571218808],[-77.47442986177947,39.426447833127746],[-77.47440998713564,39.42643976257244],[-77.47439024244017,39.42643149873496],[-77.47437063811535,39.42642303706963],[-77.4743511707435,39.42641438749838],[-77.47433184377883,39.42640554550371],[-77.47431266422579,39.42639651646176],[-77.47429363441924,39.42638730216462],[-77.47427475319202,39.426377901716435],[-77.4742560298592,39.42636831868255],[-77.47423746090668,39.42635854857372],[-77.47421905335094,39.42634859856734],[-77.47420081184971,39.426338470446346],[-77.4741827317696,39.426328166030835],[-77.47416482353886,39.42631768167597],[-77.47405571190144,39.42624864554466],[-77.47386343316947,39.42611499017149],[-77.47385233153916,39.426107038227144],[-77.47381799135452,39.42608223989315],[-77.47378384057352,39.42605727865611],[-77.47374989433004,39.426032159859695],[-77.4737161340483,39.426006884479506],[-77.4736825794475,39.42598144883348],[-77.4736492201114,39.42595585836806],[-77.47361605950606,39.42593011036723],[-77.47358310346247,39.425904208410685],[-77.47357883584031,39.42590081273375],[-77.47356678356509,39.42589102170345],[-77.47355494399649,39.42588108209722],[-77.47354331127943,39.42587098673289],[-77.4735318901619,39.425860750903745],[-77.47352068761194,39.42585037458177],[-77.47350970014551,39.42583985778111],[-77.47349893822685,39.42582920226116],[-77.47348839840802,39.4258184134402],[-77.47347808418513,39.42580749310565],[-77.47346800255033,39.42579644483234],[-77.47345815120505,39.4257852722325],[-77.47344853478855,39.425773974386814],[-77.47344678312479,39.42577184851545],[-77.47344221250616,39.425766038307536],[-77.47343790013763,39.425760117172175],[-77.4734338251568,39.42575409149848],[-77.47343000616948,39.42574796481454],[-77.47342644324188,39.42574174702805],[-77.47342314107358,39.42573544622664],[-77.47342010314269,39.425729061495645],[-77.47341733419086,39.42572260722763],[-77.47341483421809,39.42571608342257],[-77.47341260563134,39.42570950268102],[-77.47341065310613,39.42570286948771],[-77.47340897669052,39.425696191048374],[-77.4734075833948,39.42568947363985],[-77.47338400277222,39.42568309496591],[-77.47336044160195,39.42567667207353],[-77.47333690338621,39.42567020765074],[-77.47331338343143,39.42566369451063],[-77.47327858812656,39.425653972383],[-77.47322762256366,39.42563953060547],[-77.47317675089285,39.42562488486453],[-77.473125984734,39.4256100360144],[-77.4730753159339,39.42559498048498],[-77.4730247456604,39.42557971917253],[-77.47297428321666,39.42556425384114],[-77.47296224372228,39.42556052727938],[-77.47291191084902,39.42554480829688],[-77.47286168583652,39.425528889799324],[-77.47281156282415,39.42551276370379],[-77.47276155113322,39.425496434476656],[-77.4727116519616,39.42547990751761],[-77.47266186408208,39.425463172923685],[-77.47261219221258,39.42544624148482],[-77.4725626328393,39.425429108711654],[-77.47251323369252,39.42541179152647],[-77.47246395517216,39.42539427297463],[-77.4724147938124,39.425376555772445],[-77.4723657531098,39.42535864170734],[-77.47234688524365,39.42535168636396],[-77.47229796573252,39.42533347994936],[-77.4722491691779,39.425315073060105],[-77.47220049911235,39.425296472888],[-77.47215195086062,39.42527767494828],[-77.47210353257056,39.425258681910634],[-77.4720552407284,39.42523948928565],[-77.47200708582265,39.4252201024358],[-77.47195905277995,39.425200525024614],[-77.47191115316623,39.425180749799985],[-77.47186339050172,39.42516078215238],[-77.47181576478074,39.42514062118124],[-77.47176827252557,39.425120267801404],[-77.47175864830535,39.425116110797276],[-77.47171132063824,39.425095528851266],[-77.4716641333816,39.42507475086622],[-77.47161708660165,39.4250537867499],[-77.47157018721283,39.42503262836833],[-77.4715234201718,39.42501128388848],[-77.47147680519168,39.424989748727874],[-77.47145664260935,39.42498035746233],[-77.47143651928435,39.42497093090785],[-77.47141642127458,39.42496146821952],[-77.47139634279722,39.42495197302335],[-77.46935035728013,39.42387890233454],[-77.46977812353852,39.42339510046316],[-77.46979037227393,39.423380910182345],[-77.4698023879386,39.42336660013322],[-77.46981416471999,39.42335216943832],[-77.46982569918205,39.423337625317274],[-77.46983699363548,39.423322965959436],[-77.46984804230377,39.42330819589154],[-77.46985884633627,39.423293313307695],[-77.46986940115364,39.42327832813422],[-77.46987970442727,39.423263239479624],[-77.46988976312532,39.423248047316285],[-77.46989956565255,39.42323275439271],[-77.46990911321225,39.42321736700919],[-77.46991840581649,39.423201886967256],[-77.46992743882016,39.42318631428545],[-77.46993621573122,39.42317065255278],[-77.4699447307552,39.42315490359383],[-77.46995298625673,39.423139073704334],[-77.46995830163446,39.423128556324436],[-77.4699787940292,39.423072622299365],[-77.46999927823846,39.42301668469936],[-77.47001974263708,39.42296074176931],[-77.47004019190622,39.422904798894976],[-77.47042676740973,39.421777219079466],[-77.47047951527782,39.42178809618181],[-77.47056468254625,39.421534200384684],[-77.47066921039023,39.42140218902693],[-77.47063154855748,39.42138679759556],[-77.4706423665034,39.4213709321802],[-77.47065337662642,39.42135515156433],[-77.47066457772327,39.4213394494475],[-77.47067597448086,39.42132383211608],[-77.47069886193394,39.421290658710895],[-77.47116577346641,39.42061386447877],[-77.47116800909733,39.420610390434035],[-77.47116998862917,39.420606824639655],[-77.47117170516619,39.42060317793189],[-77.47117314948414,39.42059946025579],[-77.4711743251628,39.42059568600855],[-77.47117521950011,39.42059186604985],[-77.4711758383983,39.42058801476762],[-77.4711761737945,39.420584142102165],[-77.4711762257666,39.4205802597626],[-77.47117599440459,39.420576381259465],[-77.47117547982234,39.42057252370612],[-77.4711746866771,39.4205686888854],[-77.47117361741732,39.4205648957027],[-77.47117226864306,39.42056115678183],[-77.47117065086587,39.42055748108792],[-77.47116877231657,39.42055388390042],[-77.47116662842204,39.42055037604634],[-77.4711642343269,39.42054696467081],[-77.47116159711273,39.4205436668593],[-77.47115872260387,39.42054048529065],[-77.47115561907918,39.42053744244993],[-77.47115230046803,39.42053453738049],[-77.47114877497121,39.42053178085832],[-77.47114505542885,39.420529182739955],[-77.4711411523702,39.42052675469267],[-77.47113707743213,39.420524500272805],[-77.47113284460985,39.42052242843158],[-77.47112846672536,39.42052054632344],[-77.47112395657071,39.42051885659931],[-77.47111933163684,39.42051736999799],[-77.4711146116596,39.42051608553969],[-77.47110980134391,39.420515012212775],[-77.47110492161076,39.42051415263568],[-77.47109998640738,39.420513508554116],[-77.47109978767898,39.42051348683141],[-77.47097796173203,39.42050056887935],[-77.47085611225727,39.42048777339428],[-77.47073424498265,39.420475088643734],[-77.47061235416712,39.4204625245586],[-77.47036899718033,39.4204388904197],[-77.47012561277747,39.42041547476424],[-77.469882191636,39.42039227312553],[-77.46963873613619,39.42036929450108],[-77.46963074134935,39.42036854096831],[-77.46961776845538,39.420367324508554],[-77.4694018883357,39.42034714741321],[-77.46918597698728,39.42032714568845],[-77.46897004244789,39.42030730579111],[-77.46875408133963,39.42028764394762],[-77.46797041793612,39.42021425383788],[-77.4676297442728,39.42018234675699],[-77.4662601305988,39.420054067652686],[-77.46570403808128,39.420001981637334],[-77.46500533466764,39.419936528589496],[-77.46452765617714,39.41989189595566],[-77.46415956973635,39.41985750464698],[-77.4631328566776,39.419761563186505],[-77.46254135869141,39.41970628508149],[-77.46043501162414,39.41950941719008],[-77.46049381449681,39.41898565790768],[-77.45985859712857,39.41804977355764],[-77.45928532677975,39.41821232522131],[-77.45893994919868,39.41827260255188],[-77.45785407432454,39.418363804208695],[-77.45756838785863,39.41838779549908],[-77.45747965005263,39.41789366045827],[-77.45743778290964,39.41766051425071],[-77.4572937201298,39.41685368413372],[-77.46110523761375,39.41643965353554],[-77.45881012408398,39.416010260942244],[-77.45816786174409,39.41476675786569],[-77.4582332489026,39.41474743488488],[-77.45856387824914,39.414648530702515],[-77.45879503279464,39.41457938345184],[-77.45905825885109,39.41450064219734],[-77.4591060601885,39.41448615757749],[-77.45938083690515,39.41440288761326],[-77.45970951466877,39.414303285238475],[-77.4600903465047,39.41418787564714],[-77.46043646168697,39.41408298603846],[-77.46072291021721,39.41399617783138],[-77.46089921137481,39.41394274807999],[-77.46184685657047,39.41365555399927],[-77.46214635666271,39.41356478372201],[-77.46222153430315,39.41361826645828],[-77.4624041061781,39.413748171053996],[-77.46258667875821,39.413878080764995],[-77.4626610999625,39.41393103025749],[-77.46195168305444,39.41416472680783],[-77.4627162946916,39.41567774258579],[-77.46240722693305,39.41628238262596],[-77.46211363540311,39.41689036209039],[-77.46186417550467,39.41740694186331],[-77.46152921896392,39.41779283747072],[-77.46129240313812,39.41806566471833],[-77.46097773581725,39.41842817011651],[-77.4606617028727,39.41879224722576],[-77.46085003802479,39.41909965297776],[-77.46085096345648,39.41909999253093],[-77.4608812505572,39.41911117444845],[-77.46091141123095,39.419122556814564],[-77.4609414500761,39.41913413240553],[-77.46097136129822,39.4191459030456],[-77.46100114028764,39.41915787415731],[-77.46103078932019,39.419170038525984],[-77.46106030839017,39.41918239525104],[-77.46108968822526,39.419194947071084],[-77.46111892994004,39.41920768677604],[-77.4614099658994,39.41927808366348],[-77.46141784766117,39.41927952455081],[-77.46142631567866,39.4192812919044],[-77.46143470611042,39.4192832712322],[-77.4614430073087,39.41928545717568],[-77.46145121696276,39.41928785154528],[-77.46145932459794,39.419290450779236],[-77.46146731856642,39.419293249518844],[-77.46147519189488,39.41929624689074],[-77.46148293644856,39.419299442026144],[-77.46149053708437,39.4193028277786],[-77.4614980042477,39.419306403206534],[-77.46150531235564,39.41931016300585],[-77.46151246021772,39.41931410267765],[-77.46151943853201,39.419318220456944],[-77.46152624495265,39.41932251275015],[-77.46153286896373,39.41932696969044],[-77.46153930476474,39.419331592201345],[-77.46154554185162,39.419336372217586],[-77.46155158020674,39.41934130703704],[-77.46155740817636,39.419346390400385],[-77.46157529095032,39.41935566620727],[-77.46159333047419,39.41936475944989],[-77.46161152209106,39.419373668345045],[-77.46162986460445,39.41938238749295],[-77.46164835107597,39.41939092142438],[-77.46166698147618,39.41939926563583],[-77.46168575230364,39.419407417438734],[-77.46170466009205,39.419415379548795],[-77.46172370362129,39.41942314296346],[-77.4617428748212,39.41943071672161],[-77.46176217131035,39.41943809182529],[-77.46178159425578,39.419445269170545],[-77.46180113552268,39.41945224788855],[-77.461820796278,39.41945902887532],[-77.46184056486797,39.4194656058715],[-77.46186044710453,39.41947197975495],[-77.46188043601414,39.41947814965222],[-77.46190052697507,39.41948411918439],[-77.46192071876722,39.41948987934878],[-77.4619410056076,39.41949543377106],[-77.46196138284516,39.41950078156869],[-77.46198185396345,39.41950592272794],[-77.46200240614145,39.419510850093296],[-77.4620230405638,39.419515567262906],[-77.4620437549254,39.419520076948025],[-77.46205626049762,39.419522687698795],[-77.46566019994175,39.41985945028934],[-77.46584156841176,39.4197815015788],[-77.46636725820159,39.418912972881664],[-77.46748540373575,39.41907884903825],[-77.46726926858702,39.419469642756326],[-77.4662797925307,39.41925822212699],[-77.46596044187663,39.419771038357304],[-77.46609190916061,39.41986618577109],[-77.4660947431298,39.419857955418635],[-77.46975829065624,39.42019798378476],[-77.47000490216439,39.4195743836016],[-77.47185873289148,39.41984444836302],[-77.4721315372089,39.41948311762658],[-77.4731188264707,39.41927706769828],[-77.47273354077426,39.418280375940824],[-77.47355451191393,39.41797638298562],[-77.47464156632745,39.41801830414873],[-77.47467363976577,39.418134939706135],[-77.47743788119286,39.41783408195149],[-77.47783488218543,39.417758416557334],[-77.47817223952352,39.417571271284366],[-77.47807736901771,39.417504349806926],[-77.47791681188829,39.41721958554632],[-77.4776167941454,39.41699278778165],[-77.47732267316,39.41676138872793],[-77.47703456801247,39.416525482522076],[-77.47675259195945,39.41628516152344],[-77.47647685944393,39.41604052259022],[-77.47620747793025,39.41579166170826],[-77.47594455607491,39.41553868026296],[-77.47568819902745,39.41528167695157],[-77.47543850848496,39.41502075588942],[-77.47519558264966,39.41475602030518],[-77.47517473194856,39.41475533887444],[-77.47505134311959,39.41464362784338],[-77.47389358346709,39.41460594955465],[-77.47373068502867,39.41459812412786],[-77.47356839259696,39.41458471512334],[-77.47340702339285,39.41456574828947],[-77.47324689586374,39.4145412592794],[-77.47308832158491,39.414511298187264],[-77.47293161217807,39.414475922314395],[-77.47277707586379,39.41443520158751],[-77.47056214330956,39.41381311744238],[-77.47065568403642,39.413719002758924],[-77.4704611280673,39.41360265442893],[-77.47068094415582,39.41328357775585],[-77.4706889225218,39.41327569059063],[-77.47070527898009,39.41325978405403],[-77.4707218581285,39.41324401443582],[-77.47073865072552,39.41322838897873],[-77.47075566368424,39.4132128995484],[-77.47077289009754,39.413197555179714],[-77.47079032995936,39.41318235497183],[-77.47080797981012,39.41316730254143],[-77.47082583964992,39.41315239788842],[-77.47084390486394,39.41313764553481],[-77.47086217311796,39.4131230436884],[-77.47088064444786,39.41310859775336],[-77.47089931071955,39.41309430686131],[-77.47091818121031,39.41308016917368],[-77.47093239548984,39.41306972148624],[-77.47094671835166,39.41305936343541],[-77.47096114629443,39.41304909233291],[-77.47097567818089,39.41303891178627],[-77.47126223778925,39.412839961855326],[-77.47178002272324,39.41264084019339],[-77.471851127831,39.412567688844916],[-77.47190439398591,39.412512887480226],[-77.47130426213678,39.412248525314],[-77.47099650639983,39.41211295469016],[-77.47076282956651,39.41201001400304],[-77.47061375182177,39.411944343615176],[-77.47100579526315,39.41147411133899],[-77.47075913400626,39.411350368012016],[-77.47056001542931,39.41125047634093],[-77.4706185519084,39.41118027450577],[-77.47068610006893,39.41109925306345],[-77.47083968379884,39.410915033087036],[-77.4710079715256,39.410713182612895],[-77.47117598755267,39.410511651826766],[-77.47135809323508,39.41029322340601],[-77.47146721138766,39.41016223002164],[-77.47138752158553,39.41003808552179],[-77.47123602973647,39.409802085845946],[-77.47109884947625,39.409588375777155],[-77.4709638735357,39.40937810831174],[-77.47081978666195,39.40915363388859],[-77.4706743561701,39.40892706955174],[-77.47062598364667,39.408924926523035],[-77.47034371042119,39.408912427027886],[-77.4699893176494,39.408896738996916],[-77.4699276567442,39.40871060888164],[-77.46986599151884,39.408524478741036],[-77.46980433360204,39.40833835123084],[-77.46974266670277,39.408152221011704],[-77.46967024415022,39.40793360020013],[-77.46962544138626,39.40779836320955],[-77.46960111326572,39.407778990109136],[-77.46957673203605,39.40775966045062],[-77.46955229420203,39.407740372446476],[-77.46952780094267,39.40772112879411],[-77.46948049778325,39.4076847019341],[-77.46943299255445,39.40764843709174],[-77.46938528751869,39.40761232525035],[-77.4693373896842,39.4075763726869],[-77.46932552492328,39.407567510883254],[-77.46927768258813,39.40753151393805],[-77.4692296404758,39.407495674496914],[-77.46918140324858,39.40745999524313],[-77.46913297436559,39.40742447255974],[-77.46908434689038,39.4073891109779],[-77.46903553009939,39.407353908658834],[-77.46898651705015,39.40731886923302],[-77.46893731586403,39.40728399176704],[-77.46888792189073,39.407249275378504],[-77.4688383421026,39.40721472094005],[-77.46878857187913,39.40718033207286],[-77.46873861120234,39.407146106074556],[-77.46868846475222,39.40711204833065],[-77.46863813481505,39.40707815342739],[-77.46861046899853,39.407059644602235],[-77.46857130031184,39.40703359201916],[-77.46853202201505,39.40700763984047],[-77.46849263177404,39.40698178627388],[-77.46845314006214,39.406956034880494],[-77.46838430078239,39.4069123793744],[-77.46831528623294,39.40686889476333],[-77.46824609176352,39.406825580164835],[-77.46817671852898,39.40678243467323],[-77.46810717586526,39.406739465456845],[-77.46810380777255,39.40673738916005],[-77.46805138284718,39.406705459625194],[-77.46799878496017,39.40667370459571],[-77.46794601179525,39.406642124981296],[-77.46789307028878,39.40661071625053],[-77.46783995233109,39.40657948113761],[-77.46778666956824,39.40654842500041],[-77.467733214998,39.40651754246216],[-77.46767958748306,39.40648683713],[-77.46762579862171,39.406456307156205],[-77.46760879398303,39.406446713493004],[-77.46755478380777,39.406416418556056],[-77.46750060882039,39.40638630169285],[-77.46744626903259,39.40635636470468],[-77.46739176677816,39.40632660938346],[-77.46733709968129,39.40629702763188],[-77.46728227127839,39.40626762754217],[-77.46724899060398,39.40624991171667],[-77.46719390528061,39.40622080354182],[-77.46713866330076,39.40619187791056],[-77.46708326233022,39.40616313303051],[-77.46702770355952,39.40613457340037],[-77.46697198928675,39.40610619540788],[-77.46691611836836,39.40607800175956],[-77.4668891655762,39.4060644914555],[-77.46685858690645,39.406049240907215],[-77.46682796331366,39.40603404277155],[-77.4667972971555,39.40601890244354],[-77.46676658259099,39.40600381454189],[-77.46671015666585,39.405976298545035],[-77.46665357643973,39.405948970484985],[-77.46659685233205,39.40592182581645],[-77.46653997740606,39.40589486907052],[-77.46648295515634,39.405868102034454],[-77.46646220931432,39.40585842665773],[-77.46640498676378,39.40583191258242],[-77.46634762502202,39.40580558908509],[-77.4662901147946,39.405779455301605],[-77.46623246421441,39.40575351210023],[-77.46618000187561,39.40573012260517],[-77.4661220809335,39.40570454521666],[-77.46606402424031,39.405679152086364],[-77.4660058237574,39.405653956756865],[-77.46594748985076,39.40562894657668],[-77.46589973650892,39.40560866294534],[-77.46580091400732,39.405567051292046],[-77.46570170979575,39.40552599411501],[-77.46560213078536,39.40548548327943],[-77.46549029285914,39.405440827051486],[-77.4653780010422,39.40539686877715],[-77.46526526113126,39.40535360753156],[-77.46512786640392,39.40530205873127],[-77.46512108110632,39.40529957341332],[-77.46498983547974,39.405251549926454],[-77.46498457866093,39.4052496737599],[-77.46485117536163,39.40520208739236],[-77.46471885410021,39.405156055765474],[-77.46471250873662,39.4051539037584],[-77.4645859912166,39.405110972796386],[-77.46458128455028,39.40510941870284],[-77.46445259257673,39.40506684836817],[-77.46421900334666,39.40499227626024],[-77.46398389769486,39.40492062803641],[-77.46374733611158,39.404851925066694],[-77.4636357670008,39.404820685105655],[-77.46352389693173,39.40479010195658],[-77.46341173402293,39.4047601746859],[-77.46327970728184,39.40472588220986],[-77.46327317723849,39.404724238864596],[-77.46314729420529,39.404692502646164],[-77.46314278444545,39.40469139988701],[-77.46301450407678,39.404660035956965],[-77.46295079674132,39.40464484628754],[-77.4628870060624,39.404629868583235],[-77.46282313551659,39.40461510192959],[-77.46275918509154,39.40460054452503],[-77.46269515132147,39.40458619908531],[-77.46263104347629,39.404572062871544],[-77.46256685694074,39.404558140405456],[-77.46250259632315,39.40454442626444],[-77.46243826050906,39.404530927658584],[-77.46237385061181,39.40451763737758],[-77.46230937245952,39.40450455900125],[-77.4622448202818,39.404491697956615],[-77.46218019635904,39.40447904792945],[-77.46211550534062,39.404466609802135],[-77.46205074608258,39.40445438628121],[-77.46198592671152,39.40444237733465],[-77.46192103211013,39.40443057941878],[-77.46185607855557,39.40441899607254],[-77.46179106256436,39.40440762730951],[-77.46172598412988,39.404396472228875],[-77.46166084441862,39.40438553172663],[-77.46159564807394,39.40437480578453],[-77.4615303904513,39.40436429442064],[-77.46146507736697,39.404353999413544],[-77.46139970533136,39.40434391987611],[-77.46133428476375,39.40433405126373],[-77.46126880993478,39.404324405308266],[-77.46120327962416,39.404314973007104],[-77.46113770080326,39.4043057552336],[-77.46107207117296,39.404296755599574],[-77.46105546178256,39.40429451120556],[-77.46132562102474,39.405594365242635],[-77.46128299548337,39.40572761168653],[-77.46139677523149,39.40574970008502],[-77.46130813547423,39.40598170108999],[-77.46122739050136,39.40619303172728],[-77.46122098016731,39.40619070684718],[-77.46121445501393,39.406188579676666],[-77.46120782438818,39.40618665918645],[-77.46120109641738,39.4061849453447],[-77.46119429549503,39.40618343985719],[-77.46118741467839,39.40618214635407],[-77.4611804749013,39.40618107015765],[-77.46117348658966,39.40618020762412],[-77.46116645791174,39.40617956502664],[-77.46115940164488,39.406179143215795],[-77.461152329329,39.40617893133761],[-77.46114525151901,39.406178945563845],[-77.4611381786233,39.40617917954865],[-77.46113112455068,39.40617962963457],[-77.46112410095273,39.40618030208102],[-77.46111711706486,39.40618118874532],[-77.46111018101433,39.40618228959559],[-77.46110801818965,39.40618268538481],[-77.46110116757548,39.406184068729125],[-77.46109439846289,39.406185665226765],[-77.46108771430569,39.40618747036058],[-77.46108112671428,39.40618948408508],[-77.4610746507059,39.40619169463199],[-77.46106829328785,39.406194108278946],[-77.4610620671729,39.40619671596881],[-77.46105597699344,39.40619951588207],[-77.46105379299946,39.40620058369818],[-77.46104790998359,39.406203637706035],[-77.46104218719132,39.40620686943046],[-77.46103663972205,39.406210279713065],[-77.46103126981575,39.40621385593482],[-77.46102609139314,39.406217596239806],[-77.46102110558016,39.40622149521925],[-77.46101632975143,39.406225546499954],[-77.46101176384241,39.4062297401742],[-77.46100741712395,39.40623407350343],[-77.46100329883743,39.40623853924571],[-77.46099941126394,39.40624313108697],[-77.46099576476502,39.40624783547572],[-77.46099236745621,39.406252650578665],[-77.460989213462,39.406257565610126],[-77.46098632365776,39.406262576885396],[-77.46098368869072,39.4062676745331],[-77.46098132242312,39.40627284769023],[-77.4609792224977,39.4062780909616],[-77.46097739581627,39.406283394412156],[-77.4609758411769,39.40628875174156],[-77.46097456663067,39.40629415120876],[-77.46097356866517,39.406299588323805],[-77.46097285417642,39.406305052251035],[-77.46097242308247,39.40631053038046],[-77.46097227419875,39.40631601911385],[-77.46097240630576,39.40632150944873],[-77.46097282397731,39.406326990558256],[-77.46097352135557,39.40633245435898],[-77.46097450186504,39.406337891830084],[-77.46097576080886,39.40634329488338],[-77.46097729696156,39.406348653615694],[-77.46097910796006,39.40635396173108],[-77.4609794530069,39.40635488542946],[-77.46098155732251,39.406360126642426],[-77.46098393055564,39.40636529834635],[-77.46098656802114,39.40637039425451],[-77.4609894638494,39.40637540448174],[-77.46099261796414,39.40638031731895],[-77.46099602223812,39.406385132797915],[-77.46099967657165,39.406389835606525],[-77.46100356350223,39.4063944186074],[-77.4610076865423,39.40639888629039],[-77.46101203626867,39.406403217975544],[-77.46101660800193,39.406407408276856],[-77.46102139011997,39.40641145543838],[-77.4610263779258,39.406415351371834],[-77.46103156208997,39.40641908980869],[-77.46103693212206,39.40642266448492],[-77.46104248565885,39.40642606910463],[-77.46104820758327,39.406429300124096],[-77.4610540920373,39.40643234945972],[-77.46106013089363,39.40643521714322],[-77.4610663124478,39.406437888808846],[-77.46107262512461,39.406440369906306],[-77.46107451174565,39.406441063282266],[-77.46091122623109,39.40657455167634],[-77.46079354402481,39.40667076199107],[-77.46076330124784,39.40673356403264],[-77.46066810364134,39.406931261515794],[-77.46061915170222,39.40703292489671],[-77.46056200339208,39.40714171358263],[-77.46045014000119,39.40735466419407],[-77.46035037804795,39.40754457440691],[-77.46033202187938,39.407579521579],[-77.46026444250089,39.40768919668699],[-77.46018605790319,39.40781641068493],[-77.46003347823793,39.40806403873047],[-77.46000342289787,39.408112812744946],[-77.45991573982836,39.408240478125336],[-77.45979538857532,39.408415702606476],[-77.45966874718357,39.408600081317985],[-77.45953183916671,39.408799407045066],[-77.45941862107155,39.40896424755846],[-77.45977907641476,39.40910838054787],[-77.45965270611119,39.40929876509962],[-77.45964835627372,39.409305343003034],[-77.45964403205548,39.40931193251568],[-77.45963973573787,39.40931852732356],[-77.45963546503367,39.409325132839975],[-77.4599978120819,39.409374568585136],[-77.46011509519597,39.40906507069916],[-77.46061000988693,39.409206072232806],[-77.46107845952439,39.409339529990625],[-77.46137373130466,39.40942364837146],[-77.46147037247249,39.409451182143165],[-77.46182474495023,39.40955213644109],[-77.46210626142347,39.409632336550764],[-77.46233901319987,39.40969864197804],[-77.4624885967056,39.40974125588274],[-77.46208666115368,39.41032714694476],[-77.46188182948737,39.41062525383954],[-77.4618649721199,39.41065002339813],[-77.46133998135595,39.41049276261016],[-77.46130228944348,39.41048135221067],[-77.46126449204662,39.41047014577732],[-77.4612265938213,39.41045914509332],[-77.46118860176898,39.41044835553541],[-77.46115051116885,39.41043776541253],[-77.46111232323437,39.41042738282649],[-77.46107404843298,39.410417210438276],[-77.46103567860717,39.41040724377614],[-77.46099721960334,39.41039748912217],[-77.4609586748634,39.410387940157726],[-77.46092004441051,39.41037860048555],[-77.46088133058424,39.4103694727986],[-77.46084253684413,39.41036055348031],[-77.46080366205213,39.41035184613792],[-77.46076471085249,39.41034335075327],[-77.46072568440587,39.41033506732166],[-77.4606865804016,39.41032699765355],[-77.46064740808121,39.410319134506835],[-77.46060816518671,39.4103114877983],[-77.46056885285536,39.41030405392061],[-77.4605294757372,39.410296833756064],[-77.46049003149209,39.41028982461168],[-77.46045053293875,39.41028303364304],[-77.46041096843645,39.410276456392026],[-77.46037134495734,39.41027009373192],[-77.46033166714557,39.41026394564459],[-77.46029193269611,39.41025801484117],[-77.46025214739072,39.41025229769604],[-77.46021231009136,39.41024679781652],[-77.46019026641821,39.41024384766289],[-77.45969501174494,39.410173627715324],[-77.45733758541263,39.409839343341645],[-77.45747101545949,39.40898102690857],[-77.45819135880154,39.4043467646277],[-77.45986109011248,39.40409203123613],[-77.45767029902792,39.40385540266382],[-77.45666842621246,39.40378651339011],[-77.45625853905678,39.40375832977034],[-77.45118912745836,39.403210551824294],[-77.4511875055551,39.403210376996455],[-77.45111138560921,39.403202034441144],[-77.45103530029535,39.40319347552848],[-77.45095925887352,39.40318469571942],[-77.45088325906836,39.40317570222856],[-77.45080730315665,39.40316648784151],[-77.45073139351265,39.403157060655694],[-77.45065552661961,39.403147415280415],[-77.45057970596699,39.40313755260308],[-77.45050393156117,39.40312747352447],[-77.45042820688012,39.40311717713064],[-77.45035252961962,39.403106666132715],[-77.45027690440723,39.40309593781086],[-77.44955510399568,39.40301033870478],[-77.44950402054258,39.4030012383185],[-77.44942908127629,39.402987692948855],[-77.44935420919425,39.402973935603264],[-77.44927940196355,39.40295996448926],[-77.44920466190122,39.40294577869735],[-77.44912999018597,39.40293138092542],[-77.44905538796799,39.402916769367735],[-77.44898085525932,39.40290194582586],[-77.44890639206068,39.40288691029986],[-77.4488320029823,39.40287165736797],[-77.44875768924292,39.4028561960329],[-77.44868344153247,39.40284052272743],[-77.44860927030034,39.402824637411875],[-77.44810667514042,39.40269380638801],[-77.44764366834937,39.40373388147733],[-77.44629407917672,39.40337654137213],[-77.44577868674025,39.402186986856705],[-77.44560787061799,39.402216958062795],[-77.44583558922551,39.40274255188798],[-77.44538992909268,39.40287702804439],[-77.44473410923214,39.40307537966726],[-77.44437646808089,39.40317194617623],[-77.44418632011056,39.40274798677653],[-77.44414701519923,39.4026611795087],[-77.44406609385155,39.40268583888193],[-77.44376728958137,39.40286099091832],[-77.44345471682205,39.40294256403384],[-77.44345310562103,39.40294298173984],[-77.44313736242495,39.4030161837578],[-77.44313550284113,39.4030166141043],[-77.4428148465046,39.40308179833892],[-77.44269343102599,39.40406483576154],[-77.44347689475475,39.40448687892555],[-77.44388005326864,39.404046890574726],[-77.44416938014697,39.40420644763858],[-77.44370758095518,39.404658021705266],[-77.4434455504538,39.40448879941285],[-77.44271613395024,39.40409325215124],[-77.44246016332914,39.403959064871465],[-77.44143916413474,39.4034238080671],[-77.44139712005928,39.40328822303051],[-77.44100122148369,39.403336386906126],[-77.44086834626032,39.403245661562444],[-77.43886578994308,39.40373892299149],[-77.43924326948881,39.403593879587454],[-77.43959042899847,39.403462769038356],[-77.43972575242437,39.40341331700098],[-77.43986415296118,39.40336928810248],[-77.44000526979869,39.40333079712474],[-77.44014873504739,39.40329794441229],[-77.44029417469717,39.40327081561073],[-77.44044120959225,39.40324948144365],[-77.44057093492212,39.402875382756534],[-77.4405007503027,39.40275742195024],[-77.44060174980763,39.40250125706251],[-77.44117864497711,39.402467347424384],[-77.44122165246188,39.402907737955736],[-77.44123110037681,39.40290710624465],[-77.44124054816257,39.40290645381655],[-77.4412499935139,39.40290578338216],[-77.44125943410887,39.40290509495028],[-77.44131038561105,39.40290121627816],[-77.44136130789664,39.402897121518194],[-77.4414122009597,39.40289280976981],[-77.44146305665586,39.40288827836132],[-77.44151389007762,39.40288352723613],[-77.44156468383204,39.402878560062526],[-77.44161544023505,39.402873375931115],[-77.44166615926942,39.402867972139795],[-77.44171683862382,39.40286235049874],[-77.44176747831474,39.40285651371017],[-77.44181807368085,39.40285045908941],[-77.44186862819912,39.40284418572272],[-77.44191913609211,39.40283769813553],[-77.4419695961648,39.40283099092795],[-77.44202000496738,39.402824069517486],[-77.44207036713222,39.402816932085216],[-77.44212068148659,39.40280957683424],[-77.44217093527043,39.40280200561395],[-77.44222113662144,39.40279422019532],[-77.44226122385159,39.402787842781436],[-77.44236489016721,39.40276094099629],[-77.44291513846063,39.40261815083943],[-77.44360413857848,39.40254196653829],[-77.44365258704846,39.402528899826365],[-77.4437009471176,39.40251562445818],[-77.44374920139327,39.40250214410241],[-77.44379736378431,39.4024884551037],[-77.4438454285194,39.402474562888436],[-77.44389207909724,39.402460851630714],[-77.44405257867783,39.40241329905956],[-77.44456107149128,39.4022920321774],[-77.44522223949582,39.40209613911616],[-77.44543881888951,39.40191795020191],[-77.44472955172978,39.40164000585466],[-77.44469854370116,39.401628526137436],[-77.4446674173468,39.40161724502004],[-77.44463617151685,39.40160616430814],[-77.44460480736079,39.401595282195906],[-77.44457332953357,39.401584600467025],[-77.44454174154049,39.40157412271113],[-77.44451004103682,39.40156384533414],[-77.44447823501069,39.40155377191235],[-77.44444632461726,39.40154390154066],[-77.4444143017521,39.40153423785255],[-77.44438218146799,39.40152477448593],[-77.44434996382118,39.40151552044779],[-77.44431764879454,39.40150647303594],[-77.44428523870413,39.401497631340824],[-77.44425273355525,39.401488996263126],[-77.4442201426524,39.40148057046979],[-77.44418746018482,39.40147235308195],[-77.44415469196274,39.40146434497828],[-77.44412183798028,39.40145654525812],[-77.44408890520857,39.40144895479571],[-77.44405588903746,39.40144157901286],[-77.44402279988137,39.40143441246572],[-77.44398963310755,39.40142745697322],[-77.4439563945431,39.401420716116256],[-77.44392308648706,39.401414186283134],[-77.44388970778955,39.40140786927958],[-77.44385626426073,39.4014017659844],[-77.44382275822791,39.401395877289474],[-77.44378918968512,39.401390202293996],[-77.44375556328157,39.40138474188114],[-77.44372187670074,39.40137949696033],[-77.44368813924693,39.40137447019867],[-77.44365434972508,39.40136965619616],[-77.44362050815738,39.401365058555605],[-77.44360776158118,39.401363385315086],[-77.44221614341107,39.401182356952646],[-77.44218251735155,39.40131712549083],[-77.44183175261139,39.40127842816306],[-77.44186538278603,39.401143657008184],[-77.44026999197304,39.4008286303516],[-77.43979144598079,39.40096886953497],[-77.43982175933132,39.40129566119676],[-77.43987173707961,39.4015987621455],[-77.43988573287272,39.40160343145449],[-77.43989968477734,39.40160832430708],[-77.43991351716822,39.401613414864876],[-77.43992722774031,39.401618705838786],[-77.43994080483921,39.401624190066464],[-77.43995425544203,39.401629869323415],[-77.43996756560605,39.401635741860325],[-77.43998073528653,39.40164180047156],[-77.43999375406835,39.401648050600485],[-77.44000662538426,39.40165448412779],[-77.44001933879102,39.401661101993234],[-77.44003189427757,39.40166790239548],[-77.44004428369476,39.40167488176219],[-77.44005650817006,39.401682034684704],[-77.44006855727154,39.40168936390433],[-77.44008043096564,39.40169686401686],[-77.44009212809141,39.40170453502674],[-77.44010363119516,39.401712370694106],[-77.44011494491518,39.40172037010098],[-77.4401260785168,39.40172852960984],[-77.44013700529223,39.401736848419844],[-77.44014773449553,39.4017453210921],[-77.44015825917207,39.401753949454154],[-77.44016857927714,39.401762726300376],[-77.44017868433393,39.40177164716632],[-77.44018857899755,39.40178071383611],[-77.44019825395212,39.401789921841],[-77.44020771148047,39.40179926486741],[-77.44021693879496,39.40180874026096],[-77.44022594056194,39.40181835160725],[-77.44023471322002,39.401828086309386],[-77.44024325445837,39.40183794617752],[-77.44025155727195,39.40184792493283],[-77.44025961820022,39.40185802619121],[-77.44026743832559,39.401868237338455],[-77.44027501533171,39.40187855928398],[-77.44028234571876,39.401888989338694],[-77.44028942480358,39.40189952121512],[-77.44029625258051,39.40191015401261],[-77.44030282786048,39.401920883231924],[-77.44030914132193,39.40193170350366],[-77.44031519643661,39.40194261301336],[-77.44032099318763,39.401953609058985],[-77.44032652689165,39.40196468535299],[-77.44033179406573,39.401975841908374],[-77.44033679347038,39.40198706611963],[-77.44034152745542,39.40199836248158],[-77.44034598671614,39.402009728327016],[-77.44035018045624,39.40202115011049],[-77.44035133686974,39.40202395966531],[-77.44035569089701,39.40203501875496],[-77.44035977713189,39.40204614189771],[-77.44036358973025,39.40205732281043],[-77.4403671286695,39.40206855789029],[-77.4403703904387,39.40207984264673],[-77.44037337735395,39.402091176170465],[-77.44037608701478,39.40210254586021],[-77.44037851481646,39.402113958038335],[-77.44038066765178,39.40212540096958],[-77.44038253275552,39.4021368756025],[-77.44038412169813,39.402148375588645],[-77.44038542864097,39.40215989554544],[-77.4403864524117,39.40217143367594],[-77.44038719300463,39.40218298907936],[-77.44038765031873,39.402194545542955],[-77.44038782554853,39.40220610846665],[-77.44038771636065,39.40221767605769],[-77.44038732848149,39.40222923568446],[-77.4403866538065,39.40224079098013],[-77.44038569575117,39.40225233112324],[-77.44038445779277,39.40226385519997],[-77.44038294108088,39.402275361404605],[-77.44038113627722,39.40228684166546],[-77.44037905266383,39.40229829504705],[-77.44037668902916,39.40230971344737],[-77.44037405232784,39.402321095038864],[-77.44037112978329,39.402332438968585],[-77.44036793292678,39.4023437325832],[-77.4403644606197,39.402354979489814],[-77.44036071166163,39.4023661733878],[-77.44035669066838,39.40237730975618],[-77.44035239995071,39.402388386784864],[-77.4403478359806,39.40239939728115],[-77.44034300337402,39.40241033672406],[-77.44033790677466,39.40242120509624],[-77.44033254266037,39.40243199610569],[-77.44032691564692,39.402442705231415],[-77.44020813714572,39.40259323387832],[-77.4399118024434,39.403252101383174],[-77.43858959656212,39.40373702270051],[-77.43860514237596,39.40380332243885],[-77.43583707019988,39.40448318773212],[-77.43602380774831,39.40379617133466],[-77.43619361426894,39.40297253323493],[-77.4364309130239,39.40182144047787],[-77.43646465002897,39.40182569198965],[-77.43764251960717,39.39626939133434],[-77.4379785960446,39.39465053687333],[-77.43806729303363,39.39422328542302],[-77.43824524989057,39.39370156307843],[-77.43798393916936,39.393656212352816],[-77.43607465417269,39.393320047838706],[-77.43309484558331,39.392802755048756],[-77.43118979718744,39.392471997419634],[-77.4310643937871,39.39430177050889],[-77.43099208747878,39.39528393007447],[-77.4309474194191,39.395948813287546],[-77.42620161944534,39.39510945568519],[-77.42117746298726,39.39422063196678],[-77.41867851532679,39.39788003559034],[-77.41842315128277,39.39825396275574],[-77.41814437189839,39.39826845217506],[-77.41786600838175,39.398287135060166],[-77.4175881639629,39.39831000384153],[-77.41731094303319,39.39833705094654],[-77.41703445112417,39.39836826519644],[-77.41675879145156,39.398403636322485],[-77.41648406836605,39.3984431495491],[-77.41621038506348,39.398486791006526],[-77.41593784355847,39.39853454322718],[-77.41566654703281,39.39858638964098],[-77.41539659864283,39.39864230917517],[-77.41512809922938,39.398702281666814],[-77.41486114961855,39.39876628425165],[-77.4145958494769,39.39883429407036],[-77.41433230076754,39.39890628375279],[-77.41209614610582,39.39947410016923],[-77.40922243885093,39.4001912784959],[-77.40862520186205,39.40034271132192],[-77.40644227731183,39.400896180748745],[-77.40498932331398,39.40126454305464],[-77.40443527121849,39.401405005208176],[-77.40283674996957,39.40182473763997],[-77.40091459399753,39.402287397425795],[-77.39868544959036,39.40233040702815],[-77.39297958313662,39.40247705559634],[-77.39290840920982,39.40247715276489],[-77.39245139044537,39.40183132078478],[-77.39226542585067,39.40154550468923],[-77.39223259792941,39.401495040913176],[-77.39062414220699,39.3990228240663],[-77.39047537094513,39.39908137618779],[-77.38958046024779,39.399431811571596],[-77.38957745875356,39.39942793666467],[-77.3895670689728,39.39941436194785],[-77.38956046095304,39.399405735925505],[-77.38954371098434,39.39938342177209],[-77.38952720305743,39.399360996925914],[-77.38951094416763,39.399338466768256],[-77.3894949273193,39.39931582591806],[-77.38947916533219,39.39929308334023],[-77.38946365006964,39.399270237260396],[-77.38944838618512,39.399247289464604],[-77.38937372732302,39.39913386272561],[-77.38937596975998,39.399128487859215],[-77.38941228215867,39.39904151036352],[-77.38949106684396,39.39901029512872],[-77.38945083695315,39.39894916879453],[-77.38941060017116,39.398888043369034],[-77.3893318155864,39.39891925855123],[-77.38921678303399,39.39889034831331],[-77.3892127791984,39.3988893428329],[-77.38899873909789,39.398564155079875],[-77.38981054803826,39.39824250202593],[-77.38991079587802,39.39820278365912],[-77.39015211466284,39.3981071648094],[-77.38993777876246,39.39778068890909],[-77.38957915528763,39.39723442686925],[-77.38946499901317,39.397238777917046],[-77.38928658426485,39.39724393055591],[-77.38797239928667,39.397230824223755],[-77.3868658598749,39.39726174638175],[-77.38672326549911,39.39726568296178],[-77.38642705851339,39.39696355251692],[-77.38551221335423,39.39603037823365],[-77.38456813105249,39.39510768662359],[-77.384404576041,39.394940854619264],[-77.38087111733121,39.39799127302694],[-77.38005805548039,39.39974429588006],[-77.38634871685926,39.40193318220497],[-77.38486399915644,39.40429773680704],[-77.38492251516159,39.40430579786953],[-77.38498108341172,39.40431364255742],[-77.38503969576946,39.40432126909575],[-77.38509835340507,39.404328679282145],[-77.38513680838794,39.40433341825384],[-77.38519553845302,39.40434047957325],[-77.38525431378967,39.40434732363981],[-77.38531312975336,39.40435395046863],[-77.38537198402635,39.40436036096805],[-77.38543087658364,39.404366550634435],[-77.38548980861022,39.40437252396743],[-77.38554877661758,39.404378280077715],[-77.38560777828316,39.404383818972846],[-77.38566681359667,39.40438913885134],[-77.38572588024522,39.40439424152221],[-77.38578497819404,39.40439912068039],[-77.3858441051892,39.40440378894347],[-77.38590326116639,39.40440823460205],[-77.3859624426763,39.404412463972584],[-77.38602165201601,39.40441647254385],[-77.3860808810675,39.404420262143844],[-77.3861401379673,39.40442383454739],[-77.38619941108985,39.40442718709031],[-77.38625691192449,39.404430226563434],[-77.3862649438287,39.404430620837935],[-77.38627297919642,39.4044310114976],[-77.38628101454954,39.40443139945458],[-77.38628904987321,39.40443178200674],[-77.38635312680819,39.40443481425627],[-77.38652661497129,39.404441783595516],[-77.38670055087199,39.40444718033889],[-77.38687497839145,39.404451175478286],[-77.38704978873372,39.404454045892734],[-77.38722505112946,39.404455926461786],[-77.387400676347,39.40445706157438],[-77.38757676632117,39.40445762113062],[-77.38775324707079,39.40445787739192],[-77.38793004850149,39.404457963895275],[-77.3881066347146,39.40445797247956],[-77.38828283263406,39.40445767673344],[-77.38875776333315,39.404409032994984],[-77.39071129692007,39.40444042210809],[-77.39028401763181,39.40503283896547],[-77.39027314340838,39.40501432995311],[-77.39025268737268,39.40498576637104],[-77.39022666368864,39.40496007385305],[-77.39019572842473,39.404937897843176],[-77.39016066140454,39.40491979780593],[-77.3901223452091,39.40490622928193],[-77.3900817442194,39.40489753314897],[-77.39003988136659,39.404893930295316],[-77.38999781136516,39.40489550999882],[-77.38936122652349,39.404916691916526],[-77.38863888543416,39.404868537325875],[-77.38850123372887,39.40486976379852],[-77.38842224776398,39.40487020469632],[-77.38823162441777,39.405133421039025],[-77.38810702949331,39.4051456847183],[-77.38775898778661,39.405160082722254],[-77.38773178616371,39.40516105326693],[-77.38770460436903,39.40516225252479],[-77.38767743651333,39.405163665202764],[-77.38765028843605,39.40516529758685],[-77.38762316478098,39.40516714966164],[-77.38759606899659,39.40516921511076],[-77.38756899765367,39.40517150385353],[-77.38754196467453,39.405174014042636],[-77.38751496653637,39.40517673848389],[-77.38748799860961,39.405179679894765],[-77.38746107832432,39.40518284092004],[-77.38743419753324,39.40518621798365],[-77.38740736667562,39.40518980924986],[-77.38738058462462,39.40519362102742],[-77.38735385597987,39.405197645194725],[-77.3873271819021,39.40520188174801],[-77.38730056476244,39.40520633968676],[-77.38727401031164,39.40521100908403],[-77.38724751974003,39.40521589534037],[-77.38722109417883,39.40522099304775],[-77.38719474058918,39.40522630128251],[-77.38716846015151,39.40523182364375],[-77.38714225401189,39.4052375574256],[-77.387116126829,39.405243505314935],[-77.38709007855344,39.40524965830469],[-77.38706411619542,39.40525602447841],[-77.3870382408961,39.40526260022949],[-77.38701247582186,39.40526937557377],[-77.387012379589,39.40526940020991],[-77.38698668651897,39.405276392387],[-77.38696108745357,39.405283590515864],[-77.38693558702687,39.40529099277986],[-77.38691018759032,39.40529860457571],[-77.38688488792849,39.40530641599943],[-77.38685969621771,39.4053144360315],[-77.38683461471587,39.40532265295509],[-77.38680964463306,39.40533107577362],[-77.38678478825666,39.40533969817451],[-77.38676005023565,39.40534852104325],[-77.38673542940879,39.405357544383804],[-77.38671093040037,39.40536676457808],[-77.38668656017644,39.405376181603266],[-77.38666231409768,39.405385796375356],[-77.3866381967736,39.40539560257433],[-77.38661421519981,39.4054056055815],[-77.38660127158742,39.405411106514414],[-77.38629365858493,39.405791190478574],[-77.3859394372846,39.40622885320134],[-77.38592526664108,39.406246362970954],[-77.38583633902869,39.40635950486338],[-77.38529549022991,39.406086644446845],[-77.38513287480482,39.40599786069536],[-77.38394793024858,39.40539709199157],[-77.3839227174782,39.40542699462764],[-77.3839115502565,39.40544024022505],[-77.3839034386823,39.4054360909183],[-77.38276314152527,39.404852788194134],[-77.38265267333297,39.40480028559469],[-77.38253794782547,39.40475360011713],[-77.38241947348381,39.40471293996621],[-77.38229777487344,39.40467848267125],[-77.38217339152271,39.404650382295884],[-77.38173135825885,39.4045627874237],[-77.38166358216633,39.40458686844077],[-77.37924072347064,39.40356609661689],[-77.37899317871282,39.403570622290864],[-77.37878600013315,39.40357399968685],[-77.37858200005351,39.40358100002622],[-77.37843899949274,39.403571999681304],[-77.37831400018813,39.403543999891156],[-77.37818200024869,39.40349799981241],[-77.37806499953065,39.40344499957988],[-77.37795399994937,39.403367999887],[-77.37789858945824,39.4033097728809],[-77.37788734006507,39.40329405798636],[-77.37786100804512,39.403251612896305],[-77.37784638351039,39.40322587383049],[-77.37784027844634,39.40321513154181],[-77.37782572183178,39.40318275209167],[-77.37783081536999,39.40312837322578],[-77.37783400865192,39.403094296554855],[-77.37783497967956,39.40308392876467],[-77.37783792637174,39.40307653513811],[-77.37785345492529,39.403037572041086],[-77.37786155996596,39.40302059522151],[-77.37787784901741,39.40299187005046],[-77.37724248151308,39.40272415884085],[-77.37630358139339,39.40242232113877],[-77.37627064932107,39.402476275557056],[-77.37626720463103,39.40248130542698],[-77.37626349832105,39.40248626137298],[-77.37625954989817,39.40249110009775],[-77.3762553639824,39.40249581708276],[-77.37625094635466,39.402500407805945],[-77.37624630625979,39.40250486413121],[-77.37624144946928,39.402509179734864],[-77.37623638638892,39.402513346477136],[-77.37623111698522,39.402517358053004],[-77.37622565634624,39.40252121351342],[-77.37622000673652,39.40252490204248],[-77.37621417974202,39.40252841909939],[-77.37620818462686,39.402531760150936],[-77.3762020260253,39.40253492338075],[-77.37619571780712,39.402537897035046],[-77.37618926462588,39.40254068290043],[-77.37618268155047,39.40254327642493],[-77.37617597434293,39.40254566948365],[-77.37616915577892,39.40254786293648],[-77.37616223046894,39.40254985046347],[-77.37615521234966,39.40255163292087],[-77.37614811415858,39.40255320396282],[-77.37614094169115,39.402554561769286],[-77.37613370772303,39.40255570720017],[-77.3761264226698,39.402556633917115],[-77.3761190946823,39.40255734639763],[-77.37611173998573,39.402557839185576],[-77.37610436671191,39.40255811315555],[-77.37609698181724,39.402558166483956],[-77.37608960504818,39.40255800090908],[-77.37608223525338,39.40255761823612],[-77.37607489330203,39.40255701299394],[-77.37606758502785,39.40255619056832],[-77.37606032437712,39.40255515361688],[-77.37605312062817,39.402553900308476],[-77.37604598540067,39.40255243240748],[-77.37603892336722,39.402550755303295],[-77.37603195310847,39.402548869837325],[-77.37602508043909,39.40254677779247],[-77.37602252137206,39.40254608340279],[-77.37601682916333,39.402544374897985],[-77.37601125311973,39.402542459755075],[-77.37600578864507,39.40254034699601],[-77.37600046130507,39.40253804104278],[-77.37599527692386,39.40253554547968],[-77.3759902448037,39.40253286297917],[-77.37598538244558,39.40253000969847],[-77.37598069444552,39.40252697661567],[-77.37597619020156,39.40252378441746],[-77.37597188362632,39.40252042945645],[-77.37596777827937,39.40251692613304],[-77.37596389390703,39.402513276185545],[-77.37596022942003,39.40250949312839],[-77.37595679413013,39.402505581435456],[-77.37595359735876,39.40250154738213],[-77.37595064615309,39.40249740625827],[-77.37594794401512,39.4024931616556],[-77.37594549681675,39.40248882616554],[-77.37594331502117,39.402484402456906],[-77.37594139873829,39.40247991124605],[-77.37593974913382,39.40247535343002],[-77.37593838020177,39.402470740673564],[-77.3759372838773,39.40246608471198],[-77.3759364694865,39.402461392721186],[-77.37593593477912,39.402456678219366],[-77.37593568327618,39.402451948401094],[-77.37593571501124,39.40244720957136],[-77.3759360289523,39.402442486053076],[-77.37593662741165,39.40243777603741],[-77.37593750463695,39.40243308945074],[-77.37593865839698,39.40242844341403],[-77.37594009568629,39.402423843309265],[-77.37594180145032,39.402419296390356],[-77.37594377693122,39.402414817965756],[-77.37595803054552,39.40237390730961],[-77.3758276016945,39.40233184655274],[-77.37346242647132,39.40157976011699],[-77.37306320561599,39.401450904691195],[-77.37304030213306,39.40144351297359],[-77.37159807753179,39.40092608576164],[-77.37129678688227,39.40083536890023],[-77.37043057412664,39.40056932726951],[-77.37009406911692,39.40046676101939],[-77.36983363883819,39.4009733557396],[-77.36903302999808,39.40072806206745],[-77.36810674944059,39.40044109757992],[-77.36823077885695,39.40019998452641],[-77.36767068336347,39.40001177338241],[-77.36736811581639,39.399779020939306],[-77.36747540347679,39.39952452924446],[-77.36789757823097,39.39968571665855],[-77.36803459590027,39.39973059298926],[-77.36828552004975,39.39944584968065],[-77.36686400289373,39.398797850628256],[-77.36638086156884,39.39954553648498],[-77.36601266815936,39.401084876203576],[-77.36620355537978,39.40220181312364],[-77.36628827829708,39.40264537559299],[-77.36624464683965,39.40342383962108],[-77.36624741603161,39.403724261274206],[-77.36804545084384,39.403756683422465],[-77.37104994319283,39.403644496284365],[-77.37210352407554,39.403495194724655],[-77.3722793467069,39.40351033286166],[-77.37302474247439,39.403574171175954],[-77.37336612587262,39.40355503427784],[-77.37386215439588,39.40342708188003],[-77.37480898181201,39.403424069770445],[-77.37547403303057,39.40347746223911],[-77.37517773388909,39.40430611891151],[-77.37516673116687,39.40433688409817],[-77.37253052334758,39.40439665053293],[-77.37164893586208,39.40450059346691],[-77.3716603807091,39.404690726882684],[-77.3716920000375,39.4048530001326],[-77.37156860312408,39.404923861808435],[-77.37145600056176,39.404996999642165],[-77.37127528264321,39.404914481540104],[-77.37089336064885,39.404745746737824],[-77.37060247926055,39.40513596632007],[-77.37093214130563,39.40529272950595],[-77.37086580828705,39.40541783063562],[-77.37065887403604,39.40526422780991],[-77.37051856737936,39.405160077305744],[-77.37018225932238,39.40449921511118],[-77.36822523126561,39.40457260194787],[-77.36808293692424,39.404606670369475],[-77.36644566278694,39.40476499409414],[-77.36621886045485,39.40478355347462],[-77.36632857768952,39.405468757599344],[-77.36644265361367,39.40576738681561],[-77.36629117423202,39.406234905706576],[-77.36616058228168,39.40696436070219],[-77.36580372223908,39.40834414297846],[-77.36487854362221,39.409959689055796],[-77.36465052210664,39.41090155961575],[-77.36445167407804,39.411328047210375],[-77.36415635222784,39.41163486097634],[-77.36358633489154,39.411561911962465],[-77.36358452956512,39.412313241433964],[-77.36326094599352,39.41276307154125],[-77.36318656545008,39.4134560262964],[-77.3632661762133,39.41364792929913],[-77.3637244108864,39.41353354517308],[-77.36368580797867,39.41411791354341],[-77.36342014797486,39.416756260012356],[-77.3632336640863,39.41796368160223],[-77.36322206104926,39.41803391341719],[-77.36313111206053,39.41839029917693],[-77.36283748961696,39.42016982280857],[-77.36278305434617,39.42180203862615],[-77.3628812267462,39.4223256657176],[-77.36317886787052,39.42391316093244],[-77.3631461779393,39.42404267283467],[-77.36404537634263,39.42540122154296],[-77.36518638289454,39.42654819580832],[-77.36532317036858,39.4266856958912],[-77.36726466265819,39.42416918798104],[-77.36981861608862,39.42215995281424],[-77.37512348117335,39.42419090216078],[-77.37508938789259,39.42450366639073],[-77.3756413130357,39.42444254515915],[-77.37579977422004,39.42486408205369],[-77.3740638676242,39.425242624303856],[-77.37175741823448,39.425930373598305],[-77.3711948009942,39.42723186859008],[-77.37020242560604,39.4282491223651],[-77.36890279610066,39.42897376009911],[-77.36820978642763,39.42908619056172],[-77.36747432368793,39.42920554629771],[-77.36651873994157,39.42893300364528],[-77.3662010490166,39.42867418172509],[-77.36412203574307,39.42670689520798],[-77.36274451842623,39.42533300713285],[-77.3626542219027,39.42524294493384],[-77.36249812403452,39.4249652608274],[-77.36238811915564,39.42476957038279],[-77.3614828205709,39.42477331248267],[-77.36107675675271,39.42473634577958],[-77.36066461247363,39.42485145230938],[-77.36049696613797,39.424906933236535],[-77.36041617069787,39.42493367084453],[-77.36040255059139,39.424924643196476],[-77.36031869833356,39.42486694216774],[-77.35989060619056,39.42457235983762],[-77.36217939951794,39.42303187509659],[-77.3622513848857,39.422983422666434],[-77.36229959295598,39.42317715355987],[-77.36230684548795,39.42321004627826],[-77.36230708203284,39.42320725061329],[-77.36236847876125,39.42248178126286],[-77.36193544662355,39.42115879757548],[-77.36197411711066,39.420798282856104],[-77.36221683721176,39.4200573194333],[-77.36221632201493,39.42005740118308],[-77.36221992498311,39.42004640128854],[-77.35283397148127,39.42152760598233],[-77.35263400930572,39.42168000195391],[-77.35215459290043,39.42158035121904],[-77.3521482845035,39.42159060318434],[-77.35192393529742,39.421955160945316],[-77.35332952823207,39.42195392851494],[-77.35504899752353,39.42276559542145],[-77.35502490458498,39.422817283895846],[-77.3529693195083,39.427226975247386],[-77.35238979556951,39.4270780852283],[-77.34880574992961,39.42613204962979],[-77.34841208430642,39.427026357977546],[-77.34746116334894,39.42772988136647],[-77.34731946997684,39.4299019626329],[-77.34775118117619,39.430040593020514],[-77.34720170090844,39.431703038001736],[-77.3477389970026,39.43180752776128],[-77.34740507531468,39.432697942523056],[-77.34769923962152,39.43282163063581],[-77.34895379826222,39.43314792686072],[-77.34833025353026,39.43467824084866],[-77.34591450206882,39.434734687326994],[-77.34563318513929,39.435253043755736],[-77.34534720019322,39.43650133733082],[-77.34540360877082,39.437773640263494],[-77.34545450802484,39.4389446427184],[-77.34518257811355,39.440214614657584],[-77.35365011818739,39.4400773537087],[-77.35368806575366,39.44102951363995],[-77.35416545449098,39.441198393825644],[-77.35460786949076,39.441618611130984],[-77.35531293753283,39.44183421970655],[-77.35728771895242,39.44170086969904],[-77.35784492006236,39.44546403756233],[-77.3617080864266,39.444417964548585],[-77.36173208644301,39.44439920819897],[-77.36441555913319,39.443672671808415],[-77.36597351623277,39.44328599846888],[-77.36648073568715,39.44306121457866],[-77.36747603834854,39.44243066876196],[-77.36837614309206,39.44210519899484],[-77.36895519175121,39.442044080005424],[-77.3702941811645,39.441641375450644],[-77.37034862885797,39.441624948076765],[-77.37215210813176,39.441753293939584],[-77.37398536005509,39.4416287525012],[-77.37635686084303,39.442972120157606],[-77.37730373490896,39.442662223020825],[-77.37876220893172,39.4426935083296],[-77.37952488614287,39.443064551073995],[-77.38127611848425,39.44321251534913],[-77.38198752487973,39.44315364986224],[-77.3819360912579,39.44249544405598],[-77.38196137299555,39.4424931570866],[-77.38228833213215,39.44246358464294],[-77.38233997742836,39.443124460247276],[-77.38317422164569,39.44305542215218],[-77.38761270528133,39.44263036420874],[-77.39090700750384,39.44236419425301],[-77.39270070791855,39.44209958532606],[-77.39301563160511,39.44193982016228],[-77.3934722133115,39.441002765931444],[-77.39341958679239,39.4404644618116],[-77.39309307086711,39.44000639582343],[-77.39140490237277,39.43881693995966],[-77.39053518203045,39.43846884214517],[-77.38971407481279,39.43834080417331],[-77.38725371094868,39.43754431217753],[-77.38645602846854,39.43733580612102],[-77.38592155320048,39.43685133496293],[-77.38372823683588,39.43571173056971],[-77.38153673058241,39.434941808694305],[-77.38086602282536,39.43481991924155],[-77.37886230986767,39.43384909753909],[-77.37871076736552,39.43394139986743],[-77.37835338714302,39.434053705758686],[-77.37826405545081,39.43408176197685],[-77.37817834435938,39.434115942187596],[-77.3780969504456,39.434155968541596],[-77.37750287870018,39.434474751300904],[-77.37743792736678,39.434511425133515],[-77.37743059237886,39.434510353377576],[-77.37709494068284,39.4343679662802],[-77.37682204657845,39.43425220434131],[-77.37681542500134,39.434095804133506],[-77.37672727811794,39.434097802119666],[-77.3767243459798,39.43402852916699],[-77.37672260537586,39.43398737552189],[-77.37706792162045,39.43402918287014],[-77.37709808696476,39.43402623096816],[-77.37712821279649,39.434023057608314],[-77.37715830147197,39.434019669088165],[-77.37718834716415,39.434016061823506],[-77.37721835221504,39.43401223940979],[-77.37724831079758,39.43400819826279],[-77.37727821016378,39.43400394382775],[-77.37730806422748,39.43399947155649],[-77.37733785905985,39.43399478329513],[-77.37736760396236,39.43398988081536],[-77.37739727918918,39.43398476418052],[-77.37742689401762,39.433979430658695],[-77.37745644731955,39.43397388655866],[-77.37748592978353,39.43396812830741],[-77.37751534257077,39.43396215590129],[-77.3775446833772,39.43395597295054],[-77.37757394871335,39.43394957856576],[-77.37760313277138,39.43394297276566],[-77.37763224019707,39.433936155535285],[-77.37766126171738,39.433929130507344],[-77.37769019731292,39.433921894079205],[-77.37771904584109,39.43391444985733],[-77.3777478061306,39.433906796044134],[-77.37777646889874,39.43389893447098],[-77.3778050388203,39.433890870527115],[-77.3778335088922,39.43388259793017],[-77.37786188145179,39.43387411937483],[-77.37789014721164,39.43386543579167],[-77.37791830965118,39.43385654626889],[-77.37794636417232,39.433847459828485],[-77.37797431072676,39.43383816746354],[-77.37800213657142,39.433828675520104],[-77.37802985214046,39.433818980361806],[-77.37805744933193,39.43380908741907],[-77.37808492813618,39.43379899489059],[-77.37811228274535,39.43378870279512],[-77.37813951899098,39.43377821561758],[-77.37816661595613,39.43376753162374],[-77.37819359223437,39.43375665255551],[-77.3782029035066,39.4337528369225],[-77.37834983553478,39.433659759230146],[-77.37843663660824,39.43357146833303],[-77.37849025872973,39.43349620755634],[-77.37821776337675,39.433142693907286],[-77.37793954083429,39.43278174363412],[-77.37820772413333,39.431481651348875],[-77.37872673810314,39.42983084412017],[-77.37902732167426,39.42748854814349],[-77.37994200122536,39.42751282357454],[-77.38177808441529,39.42782323104215],[-77.38174174342295,39.42798541368911],[-77.38180526282174,39.42799615142523],[-77.38181124846355,39.42799716333468],[-77.38180415923486,39.428002138488985],[-77.3817972494407,39.428006789702266],[-77.38179052753549,39.4280116078397],[-77.38178399928258,39.42801658477609],[-77.38177767510057,39.42802171417269],[-77.38177155496524,39.42802699152594],[-77.38176565164721,39.4280324158938],[-77.38176327720085,39.42803469431026],[-77.38175511882523,39.42804278401642],[-77.38174718067732,39.4280510072151],[-77.3817394732001,39.42805936207097],[-77.38173199984384,39.4280678422679],[-77.3817247605794,39.42807644240169],[-77.38171775889117,39.42808516246108],[-77.38171099938103,39.42809399432473],[-77.38170448437181,39.428102937985074],[-77.38169822080305,39.42811198801542],[-77.3816922028385,39.42812113903038],[-77.38168644324888,39.42813039008783],[-77.38168093965812,39.428139731287615],[-77.3816756909048,39.428149162633545],[-77.38167070511399,39.42815868319857],[-77.38166598452133,39.42816827676252],[-77.38166153032216,39.42817794962659],[-77.38165734130675,39.428187692787525],[-77.3816534232724,39.42819750442516],[-77.38165093074234,39.42820416432467],[-77.38154885946273,39.4284791121608],[-77.38158609469782,39.4284807712836],[-77.38171174330932,39.428486371702775],[-77.38216909265581,39.42850675361204],[-77.38230855884734,39.42793485865781],[-77.38235968391449,39.42792824434291],[-77.38293033414577,39.42785440735176],[-77.38295793815308,39.42782936759668],[-77.3830134193061,39.427862417354646],[-77.38315811023638,39.4279485993533],[-77.38334397971711,39.42778721831624],[-77.38334882260094,39.427785241676304],[-77.3833536397435,39.42778322999194],[-77.38335843695171,39.42778118324419],[-77.38336320028385,39.42777910057776],[-77.3833794033501,39.42777181862462],[-77.38339545555806,39.42776434620787],[-77.38341136505696,39.42775668690392],[-77.38342712139415,39.427748840746865],[-77.38344272227106,39.42774081224783],[-77.38345816536977,39.427732602315196],[-77.3834734483576,39.427724209155166],[-77.38348856314867,39.42771564090063],[-77.38350351088965,39.42770689484569],[-77.38351828462667,39.42769797371537],[-77.38353288438903,39.427688882913806],[-77.3835473055164,39.42767961975412],[-77.38356154571527,39.42767018964825],[-77.38357559803184,39.42766059532105],[-77.38358946011401,39.4276508313759],[-77.38360313085889,39.42764090862508],[-77.38361661026646,39.42763082706869],[-77.38362989022653,39.42762059033614],[-77.38364296724988,39.427610197538115],[-77.38365583787196,39.427599652288826],[-77.38366850675781,39.42758895817609],[-77.38368096114188,39.427578117042955],[-77.38369320683114,39.42756712887056],[-77.38370523225072,39.42755600090247],[-77.38371704087506,39.42754473132604],[-77.38372862924437,39.42753332465613],[-77.38373999389411,39.42752178450703],[-77.38375113133517,39.427510109989434],[-77.38376204162137,39.42749831101121],[-77.38377271658385,39.427486380393255],[-77.38378024217972,39.42747773776406],[-77.38379687110286,39.427462907227444],[-77.38382225229878,39.42744054875134],[-77.38384784562439,39.427418331891644],[-77.38387364998178,39.427396268361086],[-77.3838996629993,39.42737434916017],[-77.38392019152082,39.42735730542705],[-77.38427633817642,39.42721964449573],[-77.38437280253176,39.4271823576607],[-77.38507999957142,39.42690899957596],[-77.38515894994676,39.42686739458484],[-77.385223637229,39.42683330499529],[-77.38546899945864,39.42670400042503],[-77.385481679919,39.42669743137546],[-77.38550923730676,39.42668263415669],[-77.38815856437802,39.42997314178744],[-77.38904197991039,39.43106822527262],[-77.38884137365976,39.43122333626583],[-77.38675993205129,39.432829669657515],[-77.38635309512142,39.433143846868255],[-77.3859968740255,39.43341893121317],[-77.38567577658006,39.43366688862897],[-77.38545000075565,39.4338412389013],[-77.38531202614391,39.43394778351946],[-77.38499531001241,39.434192355090524],[-77.38473990601257,39.434389576414624],[-77.38430128500387,39.434728269552146],[-77.38590216041035,39.43523171594514],[-77.38744612523979,39.43618657496027],[-77.38873141022366,39.43698171416881],[-77.38923379931302,39.43729226817074],[-77.39004167913644,39.43766586461351],[-77.3902709956107,39.437770530025844],[-77.39041029148454,39.43780792713],[-77.3905017335368,39.43783247825096],[-77.39146816717236,39.438091936762255],[-77.39172969320097,39.43829540901092],[-77.39260883319284,39.43897837222791],[-77.39259031117341,39.43899153222472],[-77.3926109262877,39.4390066234498],[-77.39290685531294,39.43913724269176],[-77.39322556934988,39.43938789752163],[-77.39350733680625,39.439678654200364],[-77.39363016412061,39.43980024031343],[-77.39378387857201,39.43998452728189],[-77.39389913114289,39.44017631870165],[-77.3939956001192,39.44041244309387],[-77.39405779960519,39.44092511747162],[-77.39403925355688,39.44132839255493],[-77.3938799415468,39.44180782850086],[-77.39381756264015,39.441934695012876],[-77.39339528960495,39.44243640510309],[-77.3934604647392,39.4424646130142],[-77.39341286359087,39.442508780175864],[-77.39318740736202,39.44263650818035],[-77.39296426385165,39.442702626250416],[-77.39271306480268,39.44281843000453],[-77.39248699139492,39.44287359792333],[-77.39203725073125,39.4429833434781],[-77.39126574804132,39.44313364802652],[-77.3909846512219,39.443145134629965],[-77.39047500085657,39.443165961707834],[-77.38991165395251,39.4431808665732],[-77.38861940681356,39.443282432575806],[-77.38764347061685,39.44341810910403],[-77.38574491634454,39.44342233521052],[-77.38468419189081,39.44351842449356],[-77.3824312585607,39.443878952493066],[-77.38235996238225,39.44389035742654],[-77.3821490057725,39.443899391061755],[-77.38127801789824,39.44394661832414],[-77.38099979437595,39.44388568758729],[-77.38063073086435,39.44380486307264],[-77.37911239598739,39.44368968662732],[-77.37798306509069,39.44370816773163],[-77.37681248953281,39.4435621760275],[-77.37622839217659,39.443489325131736],[-77.37577807503907,39.44332042270743],[-77.37519307590526,39.44296597624901],[-77.37466981353107,39.4425173749866],[-77.37396137863135,39.442278858876705],[-77.37229133346467,39.44228251859969],[-77.37071080424737,39.44215546363962],[-77.37017470393053,39.4422114896911],[-77.36917173304977,39.442533719070894],[-77.36761190793305,39.443225000416255],[-77.36670536938813,39.443675341276375],[-77.36614009143054,39.44386271351267],[-77.36516003697301,39.44403308024905],[-77.36479016931209,39.444263455037635],[-77.36418000799794,39.444935189868126],[-77.36373350981955,39.44556818955483],[-77.36337433050555,39.446124260882755],[-77.36321066139759,39.4465734465343],[-77.36318146691828,39.44697458923712],[-77.3631419193111,39.447248157030415],[-77.36316938937043,39.44751431959186],[-77.36325424746923,39.44790310833856],[-77.36339641692784,39.44822034219303],[-77.36379141033828,39.448778496826726],[-77.36422527794615,39.449069282881204],[-77.36513602914265,39.4495471942273],[-77.36571603984912,39.449817551759516],[-77.36697379046838,39.45026838320696],[-77.36768190789391,39.450464937135074],[-77.36941189803066,39.45093710813356],[-77.37058011890306,39.45184475387918],[-77.37069660419823,39.45202381992519],[-77.37086309462268,39.45227975727322],[-77.37092932385158,39.452251718457916],[-77.37203544267742,39.45183196468519],[-77.37330526784598,39.451505934797744],[-77.37513083827638,39.451218660325125],[-77.3751273187325,39.45120520858483],[-77.37682545684937,39.45093012921808],[-77.37796569038856,39.45074541157461],[-77.37800787234215,39.45073854423766],[-77.37802193169183,39.45073622930568],[-77.37805003877551,39.45073160037476],[-77.3780781340067,39.450726928240925],[-77.37809218045192,39.45072459082417],[-77.37813431013647,39.450717512842786],[-77.380547023619,39.45030989727094],[-77.38116936948208,39.450196707451894],[-77.38122688043794,39.45036688036892],[-77.38330791633254,39.45002193440261],[-77.3833424664697,39.450016092487644],[-77.38337695620443,39.45001003909152],[-77.38341138552671,39.45000377241287],[-77.38344574511775,39.44999728797857],[-77.38348003619262,39.44999059569256],[-77.38351425986404,39.44998368654406],[-77.38354841035708,39.4499765668571],[-77.38358248649983,39.44996923483393],[-77.38361648248326,39.449961690493716],[-77.38365040413059,39.44995393651958],[-77.38368424214245,39.4499459720412],[-77.38371799419994,39.44993779796688],[-77.38375166378812,39.449929414285464],[-77.38378524742139,39.449920821008234],[-77.3838187381387,39.44991201995944],[-77.38385213826325,39.44990301113157],[-77.38388544198114,39.449893793643014],[-77.38391865280667,39.44988437288656],[-77.38395176373976,39.449874743480876],[-77.38398477363786,39.44986490903262],[-77.3840176801723,39.44985486864878],[-77.38405048221537,39.449844628638076],[-77.3840831808797,39.449834179989864],[-77.38411576575797,39.44982353174529],[-77.38414823915402,39.44981268029409],[-77.3841806022489,39.449801629235324],[-77.38421285039044,39.4497903776836],[-77.38424498008337,39.449778923848896],[-77.38427698902838,39.449767272242475],[-77.38430887953415,39.44975542015468],[-77.3843406446641,39.44974337391333],[-77.38437228555044,39.449731128110486],[-77.38440379757041,39.4497186872649],[-77.38443518187579,39.449706049571496],[-77.38446643384373,39.44969321954904],[-77.38447343289052,39.449690311710114],[-77.38584347995302,39.44907803939924],[-77.38593127144333,39.44903880481648],[-77.38657437837327,39.44977048055059],[-77.38690301608739,39.45014437362025],[-77.38719697202387,39.45047879973542],[-77.38722856506,39.450514745096555],[-77.38662559755036,39.45093414765356],[-77.38494334140621,39.45210421632821],[-77.38405714810222,39.45272004234986],[-77.38176239687046,39.45431597717241],[-77.38140435325823,39.45455988648122],[-77.3813817097674,39.454575633108],[-77.37876495719495,39.456400011632375],[-77.37927064766791,39.456936370695],[-77.37911947047107,39.45810798341327],[-77.37896001473136,39.45947281993727],[-77.37873992418629,39.46190975813674],[-77.3805716206221,39.46233474091915],[-77.38195348145614,39.462181303475155],[-77.38549506195129,39.46228353803849],[-77.39237059039972,39.4649210708322],[-77.39269584810171,39.46504544473289],[-77.39293777429472,39.46459864717878],[-77.39308169180859,39.46433284949506],[-77.39320505626851,39.46410501937881],[-77.39335582236126,39.463826561487465],[-77.3934106456851,39.46372530524746],[-77.39352726354986,39.46350998020899],[-77.39453427988295,39.461675559572186],[-77.39538364536065,39.46010671053813],[-77.39549328491194,39.45990419225826],[-77.39791239374692,39.45543547063481],[-77.39823952392273,39.45529941644737],[-77.39857699484041,39.455159058764515],[-77.39892014762161,39.454041999382376],[-77.39828305179226,39.45521899684298],[-77.39795591976849,39.455355054765796],[-77.39844523754688,39.45445107801675],[-77.3984511022987,39.454454941144554],[-77.39918301755019,39.45310854277052],[-77.39919546041769,39.45298920653734],[-77.39920112334957,39.4528695609198],[-77.3991999960778,39.45274983923855],[-77.39919208109427,39.45263027116689],[-77.39924416477359,39.45253634564542],[-77.39929575142132,39.45254050495979],[-77.39919446259324,39.451459873326435],[-77.39913858394506,39.45089643032932],[-77.39912589610488,39.45074216574451],[-77.3991236606821,39.450698058157904],[-77.39911359307837,39.45043301217724],[-77.39909622325064,39.449975871313015],[-77.39908327600376,39.449766491954435],[-77.3990826480772,39.44975011549626],[-77.39908173786816,39.4497337444983],[-77.3990805489028,39.44971738615431],[-77.39907907189733,39.44970104229717],[-77.39907731500469,39.4496847165021],[-77.39907527589128,39.44966840697558],[-77.39907295227954,39.44965212183171],[-77.39907034997852,39.44963586105087],[-77.39906746089657,39.44961963186608],[-77.39906430012165,39.449603431524096],[-77.39906085838518,39.44958726455986],[-77.39905713456123,39.44957113728219],[-77.39905313096834,39.449555048782464],[-77.39904885577458,39.449539005337975],[-77.39904429618558,39.44952300428993],[-77.39903946504175,39.44950705640331],[-77.3990343576658,39.449491156289696],[-77.39902897409854,39.44947531115459],[-77.3990233178508,39.44945952548971],[-77.39902144796726,39.44945447701795],[-77.39901543910732,39.44943879162607],[-77.39900916107278,39.44942316929521],[-77.3990026115658,39.44940761453672],[-77.39899579524365,39.44939212913624],[-77.39898871212175,39.44937671579577],[-77.39898135873023,39.44936137722915],[-77.39897374436828,39.44934611430557],[-77.39896586444497,39.4493309369484],[-77.39895772359218,39.44931584243972],[-77.39894932065845,39.44930083258479],[-77.3989406603062,39.449285910069996],[-77.39893174139914,39.449271079402585],[-77.39892256859974,39.44925634326894],[-77.3989131372762,39.4492417043868],[-77.39890345557117,39.44922716452996],[-77.39889352699029,39.4492127272893],[-77.3988833434268,39.44919839719585],[-77.39887291530103,39.44918416790921],[-77.39886224500765,39.44917005203124],[-77.39885132324768,39.4491560486926],[-77.39884016513408,39.44914215964352],[-77.39882876604037,39.44912838850242],[-77.39881713178544,39.44911473705099],[-77.39880526006614,39.449101208899805],[-77.39879315784802,39.44908780312451],[-77.39878082052478,39.44907452694626],[-77.39876825738028,39.44906137853225],[-77.39875546845524,39.449048365087855],[-77.39874245255237,39.44903548031218],[-77.39872921904183,39.44902273768406],[-77.3987157620744,39.449010130017506],[-77.39870209098972,39.44899766538731],[-77.39868820462614,39.44898534379727],[-77.39867887943898,39.44897550714506],[-77.39894347086879,39.44901141775652],[-77.40012741886964,39.44917209152469],[-77.40040687182075,39.4492100136849],[-77.39986835520456,39.451609908271095],[-77.40001661705466,39.45166546511261],[-77.39994295321323,39.45186734187171],[-77.39923276058119,39.45381353514406],[-77.3992222239437,39.453842815213186],[-77.39921195948574,39.453872151103226],[-77.39920196953636,39.45390154370706],[-77.39919225177735,39.453930993933284],[-77.39918280965377,39.45396049456463],[-77.39917364551009,39.45399004919608],[-77.39916475352207,39.454019655145245],[-77.39915613832224,39.454049309694405],[-77.39914780338114,39.454079010129696],[-77.39913974058149,39.454108759180805],[-77.39913195802097,39.454138550515374],[-77.39912445222453,39.454168385946666],[-77.39911722316708,39.454198260971275],[-77.39911027781999,39.454228175565554],[-77.39910360457546,39.45425813157038],[-77.39909721501145,39.45428812174085],[-77.39909110564798,39.454318146989515],[-77.39908527648026,39.45434820641567],[-77.39907972283598,39.45437829553171],[-77.39907445285836,39.45440841611145],[-77.39906946305221,39.454438566365376],[-77.39906475688296,39.4544687426789],[-77.39906033087067,39.4544989459646],[-77.39905618383345,39.454529172623644],[-77.39905232157076,39.45455942083497],[-77.39904874176936,39.454589692407815],[-77.39904544206532,39.454619980144706],[-77.39904242594965,39.45465028493435],[-77.399039692271,39.45468060858216],[-77.39903724333816,39.45471094837825],[-77.3990350733016,39.4547412971367],[-77.39903318683461,39.454771659345234],[-77.39903158391708,39.45480203140117],[-77.39903026453419,39.45483241060236],[-77.39902923103033,39.45486280054374],[-77.39902847868738,39.4548931886313],[-77.39902800870307,39.454923581166085],[-77.39902782224475,39.45495397904468],[-77.39902791578653,39.45498437507355],[-77.39902829631009,39.455014771030264],[-77.39902896379544,39.455045163312164],[-77.39902990313385,39.45507555106966],[-77.3990311375525,39.455105932422676],[-77.3990326507859,39.45513630742627],[-77.39903444747158,39.4551666742633],[-77.39903652758461,39.455197028430305],[-77.39903889110998,39.455227367225184],[-77.39904153342619,39.455257695167084],[-77.3990444626411,39.455288007725045],[-77.39904767642119,39.45531830310544],[-77.39904902212545,39.45533029873677],[-77.3990515719987,39.45536236356421],[-77.39905440529573,39.455394414820795],[-77.39905751850597,39.45542644801487],[-77.39906091862126,39.45545846672554],[-77.39906459747847,39.45549046557616],[-77.39906855972538,39.45552244455101],[-77.39907280534214,39.45555440004722],[-77.39907733085882,39.45558633477874],[-77.39908213972565,39.455618242428734],[-77.39908722731093,39.45565012571515],[-77.39909259590827,39.45568197922578],[-77.3990982467002,39.45571380655951],[-77.39910417383209,39.455745599629715],[-77.39911039128216,39.45577736469396],[-77.39911688041025,39.45580909280825],[-77.3991236540175,39.455840787532],[-77.39913070276876,39.45587244169111],[-77.39913803135752,39.455904063376046],[-77.3991456397232,39.45593564177844],[-77.39915352673479,39.455967182306274],[-77.39916169003847,39.455998679563216],[-77.39916641909251,39.456016425577985],[-77.39846986011477,39.456222661746686],[-77.39838835457063,39.456246794677384],[-77.3978793761055,39.45677884031077],[-77.39750743116329,39.45665184315987],[-77.39571017022747,39.4599717627864],[-77.39560451797956,39.460175549582175],[-77.39515749333292,39.46098630915425],[-77.39491050224893,39.46144757179752],[-77.39465507229795,39.4619141060518],[-77.39405357748264,39.463029870567254],[-77.39353944521918,39.4639636340998],[-77.39293856367932,39.46508711172931],[-77.39437610961875,39.46555321365936],[-77.39971075083496,39.46469760664786],[-77.39982017313879,39.46415032527049],[-77.40013821629957,39.46417710768109],[-77.40027959938617,39.46418901469852],[-77.40037470851293,39.4641970229713],[-77.40119180896018,39.46402639598723],[-77.4011710372913,39.46405129841186],[-77.40121637114085,39.464279186569364],[-77.40133724529169,39.46470664692366],[-77.40134555247529,39.46474882046018],[-77.40141594057029,39.46514729583772],[-77.40143668507845,39.46554974313637],[-77.40146986870896,39.46635182142616],[-77.40139430086266,39.4670189260586],[-77.40147497288082,39.46755389186125],[-77.40138755499518,39.46872141431875],[-77.40135875420206,39.4688886875222],[-77.40130784408099,39.4691536556935],[-77.40130288943944,39.46942503250747],[-77.40122785899831,39.469733019520355],[-77.40114421485275,39.470039671214316],[-77.40105199674703,39.47034484242175],[-77.40090814889598,39.47087167237086],[-77.40056648397258,39.47149228737692],[-77.40006155004745,39.47234444853837],[-77.39987908252174,39.47257374595527],[-77.3994706718785,39.47338986255408],[-77.3993248397252,39.4738714037405],[-77.3986854367052,39.47485136842512],[-77.39841158111913,39.475054812503934],[-77.39829227533976,39.475240993818794],[-77.39817364752273,39.475426117979836],[-77.3978485156187,39.476139103887526],[-77.39784674057137,39.47613904323057],[-77.39778011267964,39.476113154987196],[-77.39142190042465,39.473669753285115],[-77.39084695837074,39.4740935694604],[-77.39052934789868,39.4746869479154],[-77.3898744280031,39.47717794057074],[-77.38988449741211,39.47856431001066],[-77.38980453921033,39.478904626641224],[-77.38872686249347,39.48000090972999],[-77.3887618410374,39.480019046167385],[-77.3889010881265,39.48010911901466],[-77.38904849054217,39.48018700435589],[-77.38920519301222,39.48025099875066],[-77.38936501663444,39.48031037101526],[-77.38951926642832,39.48037801734668],[-77.38983201154872,39.48050697601266],[-77.38998904517382,39.48057048368745],[-77.39014656785977,39.48063325996245],[-77.39028207097907,39.4806896752524],[-77.39043385384929,39.4807501751649],[-77.39059014568411,39.48080333720794],[-77.39074655783432,39.48085635453165],[-77.39090229885353,39.48091134461479],[-77.39105043631919,39.480985038530605],[-77.39119692320874,39.48106853469688],[-77.39135438170871,39.481130868221086],[-77.39151779285885,39.48118085291595],[-77.39169181649754,39.48120509871132],[-77.39186367675923,39.48122905241254],[-77.39203556832068,39.48125192131161],[-77.3922081918613,39.48127660784555],[-77.39238256721067,39.481300892882594],[-77.39255709274498,39.481324362925],[-77.39273173742944,39.48134729098873],[-77.39290617556256,39.48137130573154],[-77.39308055138503,39.4813955897346],[-77.39325638984681,39.48141282599344],[-77.3934306100301,39.48143792513527],[-77.39360432319495,39.481465463018466],[-77.39377925625674,39.48148703570961],[-77.39395384280486,39.48151023236837],[-77.39412938129121,39.48152882028478],[-77.39430468647855,39.481548492267436],[-77.39448022515202,39.481567079660834],[-77.3946559845185,39.48158458250664],[-77.39483137683114,39.48160398590517],[-77.39500414748451,39.48162970726421],[-77.39517895265314,39.481643007143454],[-77.39535229613246,39.481664286501264],[-77.39552816654466,39.48167870006114],[-77.39570589684786,39.48168274631424],[-77.39589919518316,39.48170175471456],[-77.39588615351208,39.481787639226006],[-77.39593037990905,39.4817916725585],[-77.39593028119312,39.48177714994105],[-77.39634901594589,39.481757188239996],[-77.39641882014664,39.48152725764393],[-77.3963491181885,39.48175697352843],[-77.39715753802957,39.481727097278274],[-77.39726159188996,39.48181534687003],[-77.39726489191293,39.48198117244131],[-77.39716091181145,39.48205557891751],[-77.39716843127115,39.4822303864804],[-77.39718326472465,39.48236452511664],[-77.39718566059476,39.482499143421926],[-77.39720974719974,39.482767590790694],[-77.39724068123313,39.48303561602813],[-77.39727845056225,39.48330311468861],[-77.39734058492736,39.48356809203027],[-77.39737941987347,39.48369948534332],[-77.39740739403516,39.483839363873],[-77.39745463192541,39.484102135096244],[-77.39749677034776,39.48437493930208],[-77.39752133825175,39.48451090670389],[-77.39754240767518,39.484647309230475],[-77.39775063135002,39.48565282299491],[-77.40054525622914,39.48538678390989],[-77.40058695321468,39.486079197020125],[-77.40129240732001,39.48600734386985],[-77.40122070817438,39.484909302464864],[-77.40473089760324,39.48456258144964],[-77.40469678480812,39.484427884961946],[-77.4065977755855,39.484288547603995],[-77.40579581316517,39.48311597012699],[-77.40582906139369,39.48294046152304],[-77.40588717099459,39.48281224517223],[-77.40556921418191,39.47980125579012],[-77.41145456598342,39.48047822151017],[-77.41124706904915,39.481113762861604],[-77.41161775762048,39.481141475389656],[-77.41209585501056,39.48117721733735],[-77.41195966275724,39.48135332300862],[-77.41048000822244,39.48326654383781],[-77.41003563143724,39.48406088644374],[-77.40885585059941,39.48362295929974],[-77.40760252228668,39.485595574603494],[-77.40764288182919,39.48564916009894],[-77.40847291280097,39.486835240950555],[-77.40861153868313,39.48703907293845],[-77.40874387260163,39.4872454008113],[-77.40892642624294,39.487538724217444],[-77.41053827615082,39.486381334780035],[-77.41275048039127,39.48479422975736],[-77.41275962458538,39.4848037749011],[-77.41279951238207,39.48477513057193],[-77.41307957966501,39.48457708391586],[-77.41477820218208,39.483394265673304],[-77.4147575762353,39.48337320687244],[-77.41481389194118,39.48333938980328],[-77.41647263029583,39.48503369904627],[-77.41707597281297,39.48564832500075],[-77.41658203198496,39.485890493835505],[-77.41605042015053,39.485347380174964],[-77.41642125853345,39.48507182639101],[-77.41479967491682,39.48341621859023],[-77.4131032401899,39.48459751357645],[-77.41282356531603,39.48479528329687],[-77.41278084508798,39.484825961439476],[-77.41634252020371,39.48854315071231]]]
            }
          }
        ]
      }
        
        
        // Point-in-polygon algorithm for geofencing validation
        function isPointInFrederick(latitude, longitude) {
          try {
            // Check if the point is within any of the boundary polygons
            for (const feature of FREDERICK_BOUNDARY.features) {
              const coordinates = feature.geometry.coordinates[0]; // Get the outer ring
              if (pointInPolygon([longitude, latitude], coordinates)) {
                return true; // Point is within at least one polygon
              }
            }
            return false; // Point is not within any polygon
          } catch (error) {
            return true; // Allow if error occurs
          }
        }
        
        // Ray casting algorithm for point-in-polygon test
        function pointInPolygon(point, polygon) {
          const x = point[0];
          const y = point[1];
          let inside = false;
          
          for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {
            const xi = polygon[i][0];
            const yi = polygon[i][1];
            const xj = polygon[j][0];
            const yj = polygon[j][1];
            
            if (((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi)) {
              inside = !inside;
            }
          }
          
          return inside;
        }
        
        // Validate location and provide user feedback
        function validateLocationGeofencing(latitude, longitude) {
          // Check if location is within Frederick city limits
          isLocationValid = isPointInFrederick(latitude, longitude);
          
          // Show success or error message based on validation
          if (isLocationValid) {
            showCoordinateMessage(
              `Location confirmed: ${latitude.toFixed(6)}, ${longitude.toFixed(6)} (Within Frederick city limits)`,
              'success'
            );
            enableSubmitButton();
          } else {
            showCoordinateMessage(
              `Location outside service area: ${latitude.toFixed(6)}, ${longitude.toFixed(6)} (Not within Frederick city limits)`,
              'error'
            );
            disableSubmitButton();
            setTimeout(() => showLocationOutsideBoundariesModal(), 500);
          }

          
          return isLocationValid;
        }
        
        // Enhanced coordinate message display with type styling
        function showCoordinateMessage(message, type = 'info') {
          const messageContainer = document.getElementById('coordinateMessage');
          if (!messageContainer) return;
          
          let alertClass = 'alert-info';
          let icon = 'bi-info-circle';
          
          switch (type) {
            case 'success':
              alertClass = 'alert-success';
              icon = 'bi-check-circle';
              break;
            case 'error':
              alertClass = 'alert-danger';
              icon = 'bi-exclamation-triangle';
              break;
            case 'warning':
              alertClass = 'alert-warning';
              icon = 'bi-exclamation-triangle';
              break;
          }
          
          messageContainer.innerHTML = `
            <div class="alert ${alertClass} alert-dismissible fade show" role="alert">
              <i class="bi ${icon}"></i>
              ${message}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
          `;
          
          messageContainer.style.display = 'block';
        }
        
        // Enable/disable submit button based on location validation
        function enableSubmitButton() {
          const submitButton = document.getElementById('submitButton'); // Target specific Step 2 submit button
          if (submitButton) {
            submitButton.disabled = false;
            submitButton.classList.remove('btn-secondary');
            submitButton.classList.add('btn-success');
          }
        }
        
        function disableSubmitButton() {
          const submitButton = document.getElementById('submitButton'); // Target specific Step 2 submit button
          if (submitButton) {
            submitButton.disabled = true;
            submitButton.classList.remove('btn-success');
            submitButton.classList.add('btn-secondary');
          }
          // Update global validation state
          isLocationValid = false;
        }
        
        // Flag to prevent modal spam
        let isModalShowing = false;
        
        // Consolidated geofencing error modal (replaces both showGeofencingErrorModal and showLocationOutsideBoundariesModal)
        function showLocationOutsideBoundariesModal(lat = null, lng = null) {
          // Prevent multiple modals from showing simultaneously
          if (isModalShowing) return;
          const modalHtml = `
            <div class="modal fade" id="locationOutsideBoundariesModal" tabindex="-1" aria-labelledby="locationOutsideBoundariesModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <div class="modal-header" style="background: linear-gradient(135deg, var(--fred-primary), var(--fred-secondary)); color: white;">
                    <h5 class="modal-title" id="locationOutsideBoundariesModalLabel">
                      <i class="bi bi-geo-alt-fill me-2"></i>
                      Location Outside Service Area
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <div class="alert alert-warning" role="alert">
                      <strong>The selected location is outside Frederick city limits.</strong>
                    </div>
                    <p>${(lat !== null && lng !== null) 
                      ? `The location (${lat.toFixed(4)}, ${lng.toFixed(4)}) is outside the Frederick city service area.`
                      : `The selected location is outside Frederick city limits.`}</p>
                    <p><strong>What you can do:</strong></p>
                    <ul>
                      <li>Click directly on the map to select a location within Frederick</li>
                      <li>Use the address search to find a Frederick location</li>
                      <li>Enter coordinates manually if you know the exact location</li>
                    </ul>
                    <div class="alert alert-info" role="alert">
                      <i class="bi bi-info-circle-fill me-2"></i>
                      311 service requests can only be submitted for locations within Frederick city limits.
                    </div>
                  </div>
                  <div class="modal-footer" style="display: flex; justify-content: center; flex-direction: column; align-items: center;">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="centerMapOnFrederick()">
                      <i class="bi bi-geo-alt me-2"></i>
                      Show Frederick Area
                    </button>
                  </div>
                </div>
              </div>
            </div>
          `;
          
          // Set flag to prevent multiple modals
          isModalShowing = true;
          
          // Remove existing modal and backdrop if present
          const existingModal = document.getElementById('locationOutsideBoundariesModal');
          if (existingModal) {
            existingModal.remove();
          }
          
          // Remove any lingering backdrops
          const existingBackdrops = document.querySelectorAll('.modal-backdrop');
          existingBackdrops.forEach(backdrop => backdrop.remove());
          
          // Add modal to DOM
          document.body.insertAdjacentHTML('beforeend', modalHtml);
          
          // Show modal
          const modal = new bootstrap.Modal(document.getElementById('locationOutsideBoundariesModal'));
          
          // Reset flag when modal is hidden
          document.getElementById('locationOutsideBoundariesModal').addEventListener('hidden.bs.modal', function() {
            isModalShowing = false;
            // Clean up any remaining backdrops
            const backdrops = document.querySelectorAll('.modal-backdrop');
            backdrops.forEach(backdrop => backdrop.remove());
            document.body.classList.remove('modal-open');
            document.body.style.overflow = '';
            document.body.style.paddingRight = '';
          });
          
          modal.show();
        }
        
        // Center map on Frederick area
        function centerMapOnFrederick() {
          if (esriMapView) {
            esriMapView.goTo({
              center: FREDERICK_CENTER,
              zoom: FREDERICK_ZOOM
            });
          }
          
          // Close modal
          const modal = bootstrap.Modal.getInstance(document.getElementById('geofencingErrorModal'));
          if (modal) {
            modal.hide();
          }
        }

        // Step Management Functions
        function setupStepEventListeners() {
          requestTypeForm.addEventListener('submit', handleStep1Submit);
          backButton.addEventListener('click', handleBackClick);
          initializeServiceButtons();
        }

        function initializeServiceButtons() {
          const serviceButtons = document.querySelectorAll('.service-list-btn');
          const hiddenInput = document.getElementById('requestType');
          const continueButton = document.getElementById('continueButton');
          
          serviceButtons.forEach(button => {
            button.addEventListener('click', function() {
              serviceButtons.forEach(btn => btn.classList.remove('selected'));
              this.classList.add('selected');
              const value = this.getAttribute('data-value');
              hiddenInput.value = value;

              const additionalInfoSection = document.getElementById('additionalInfoSection');
              const toterFields = document.getElementById('toterFields');
              const bulkPickupFields = document.getElementById('bulkPickupFields');
              const parkConcernFields = document.getElementById('parkConcernFields');
              const pollutionFields = document.getElementById('pollutionFields');
              
              if (additionalInfoSection && toterFields && bulkPickupFields && parkConcernFields && pollutionFields) {
                if (value === 'Toter Repair or Replace') {
                  additionalInfoSection.style.display = 'block';
                  toterFields.style.display = 'block';
                  bulkPickupFields.style.display = 'none';
                  parkConcernFields.style.display = 'none';
                  pollutionFields.style.display = 'none';
                  clearBulkPickupFields();
                  clearParkConcernFields();
                  clearPollutionFields();
                  setToterFieldsRequired(true);
                  setPollutionFieldsRequired(false);
                } else if (value === 'Bulk Pick Up') {
                  additionalInfoSection.style.display = 'block';
                  toterFields.style.display = 'none';
                  bulkPickupFields.style.display = 'block';
                  parkConcernFields.style.display = 'none';
                  pollutionFields.style.display = 'none';
                  clearToterFields();
                  clearParkConcernFields();
                  clearPollutionFields();
                  setToterFieldsRequired(false);
                  setPollutionFieldsRequired(false);
                } else if (value === 'Park Concern') {
                  additionalInfoSection.style.display = 'block';
                  toterFields.style.display = 'none';
                  bulkPickupFields.style.display = 'none';
                  parkConcernFields.style.display = 'block';
                  pollutionFields.style.display = 'none';
                  clearToterFields();
                  clearBulkPickupFields();
                  clearPollutionFields();
                  setToterFieldsRequired(false);
                  setPollutionFieldsRequired(false);
                } else if (value === 'Suspected Pollution, Illicit Discharge, or Spill') {
                  additionalInfoSection.style.display = 'block';
                  toterFields.style.display = 'none';
                  bulkPickupFields.style.display = 'none';
                  parkConcernFields.style.display = 'none';
                  pollutionFields.style.display = 'block';
                  clearToterFields();
                  clearBulkPickupFields();
                  clearParkConcernFields();
                  setDateTimeMax();
                  setToterFieldsRequired(false);
                  setPollutionFieldsRequired(true);
                } else {
                  additionalInfoSection.style.display = 'none';
                  toterFields.style.display = 'none';
                  bulkPickupFields.style.display = 'none';
                  parkConcernFields.style.display = 'none';
                  pollutionFields.style.display = 'none';
                  clearAdditionalInfoFields();
                  setToterFieldsRequired(false);
                  setPollutionFieldsRequired(false);
                }
              }
              continueButton.disabled = false;
            });
          });
          
          // Update button state based on hidden input value
          const selectedValue = hiddenInput ? hiddenInput.value : '';
          
          if (continueButton) {
            continueButton.disabled = !selectedValue;
          }
        }

        async function handleStep1Submit(e) {
          e.preventDefault();
          
          const requestType = requestTypeInput.value;
          if (!requestType) {
            showError('Please select a service request type.');
            return;
          }
          continueButton.disabled = true;
          continueButton.innerHTML = '<i class="bi bi-hourglass-split"></i> Processing...';

          try {
            selectedRequestType = requestType;
            
            // Execute invisible reCAPTCHA for step transition (TEMPORARILY COMMENTED OUT FOR TESTING)
            /*
            if (recaptchaLoaded && invisibleRecaptchaId !== null) {
              console.log("Executing invisible reCAPTCHA for step transition...");
              grecaptcha.execute(invisibleRecaptchaId);
            } else {
              console.log("Invisible reCAPTCHA not ready, proceeding without token (will retry later)");
            }
            */
            console.log("Invisible reCAPTCHA temporarily disabled for testing");
            
            // Proceed to Step 2 (invisible reCAPTCHA will complete in background)
            showStep2();
          } catch (error) {
            showError('There was an error processing your request. Please try again.');
          } finally {
            continueButton.disabled = false;
            continueButton.innerHTML = '<i class="bi bi-arrow-right"></i> Continue to Details';
          }
        }

        function handleBackClick() {
          showStep1();
        }

        function showStep1() {
          hideError();
          step1Content.classList.remove('hidden');
          step2Content.classList.add('hidden');
          
          step1Indicator.className = 'step active';
          step2Indicator.className = 'step inactive';
          connector1.className = 'step-connector';
          
          if (selectedRequestType) {
            setTimeout(() => {
              restoreServiceButtonSelection(selectedRequestType);
            }, 100);
          } else {
            clearServiceButtonSelection();
          }
        }

        function showStep2() {
          hideError();
          selectedRequestTypeDisplay.textContent = selectedRequestType;
          let mainFormRequestType = form.querySelector('input[name="requestType"]');
          if (!mainFormRequestType) {
            mainFormRequestType = document.createElement('input');
            mainFormRequestType.type = 'hidden';
            mainFormRequestType.name = 'requestType';
            form.appendChild(mainFormRequestType);
          }
          mainFormRequestType.value = selectedRequestType;
          
          step1Content.classList.add('hidden');
          step2Content.classList.remove('hidden');
          
          step1Indicator.className = 'step completed';
          step2Indicator.className = 'step active';
          connector1.className = 'step-connector completed';
          
          // Initialize Step 2 submit button state based on current location validation
          if (isLocationValid && selectedCoordinates && 
              selectedCoordinates.latitude !== 0 && selectedCoordinates.longitude !== 0) {
            enableSubmitButton();
          } else {
            disableSubmitButton();
          }
          
          window.scrollTo({ top: 0, behavior: 'smooth' });

          const additionalSections = document.getElementById("additionalSections");
          if (additionalSections) {
            additionalSections.style.display = "block";
          }

          const additionalInfoSection = document.getElementById('additionalInfoSection');
          const toterFields = document.getElementById('toterFields');
          const bulkPickupFields = document.getElementById('bulkPickupFields');
          const parkConcernFields = document.getElementById('parkConcernFields');
          const pollutionFields = document.getElementById('pollutionFields');
          
          if (additionalInfoSection && toterFields && bulkPickupFields && parkConcernFields && pollutionFields) {
            if (selectedRequestType === 'Toter Repair or Replace') {
              additionalInfoSection.style.display = 'block';
              toterFields.style.display = 'block';
              bulkPickupFields.style.display = 'none';
              parkConcernFields.style.display = 'none';
              pollutionFields.style.display = 'none';
              setToterFieldsRequired(true);
              setPollutionFieldsRequired(false);
            } else if (selectedRequestType === 'Bulk Pick Up') {
              additionalInfoSection.style.display = 'block';
              toterFields.style.display = 'none';
              bulkPickupFields.style.display = 'block';
              parkConcernFields.style.display = 'none';
              pollutionFields.style.display = 'none';
              setToterFieldsRequired(false);
              setPollutionFieldsRequired(false);
            } else if (selectedRequestType === 'Park Concern') {
              additionalInfoSection.style.display = 'block';
              toterFields.style.display = 'none';
              bulkPickupFields.style.display = 'none';
              parkConcernFields.style.display = 'block';
              pollutionFields.style.display = 'none';
              setToterFieldsRequired(false);
              setPollutionFieldsRequired(false);
            } else if (selectedRequestType === 'Suspected Pollution, Illicit Discharge, or Spill') {
              additionalInfoSection.style.display = 'block';
              toterFields.style.display = 'none';
              bulkPickupFields.style.display = 'none';
              parkConcernFields.style.display = 'none';
              pollutionFields.style.display = 'block';
              setDateTimeMax();
              setToterFieldsRequired(false);
              setPollutionFieldsRequired(true);
            } else {
              additionalInfoSection.style.display = 'none';
              toterFields.style.display = 'none';
              bulkPickupFields.style.display = 'none';
              parkConcernFields.style.display = 'none';
              pollutionFields.style.display = 'none';
              setToterFieldsRequired(false);
              setPollutionFieldsRequired(false);
            }
          }

          setTimeout(() => {
            if (!esriMapView) {
              initializeESRIMap();
            }
          }, 100);
        }

        function restoreServiceButtonSelection(requestType) {
          const serviceButtons = document.querySelectorAll('.service-list-btn');
          const hiddenInput = document.getElementById('requestType');
          const continueButton = document.getElementById('continueButton');
          
          serviceButtons.forEach(btn => btn.classList.remove('selected'));
          
          serviceButtons.forEach(button => {
            if (button.getAttribute('data-value') === requestType) {
              button.classList.add('selected');
              hiddenInput.value = requestType;
              continueButton.disabled = false;
            }
          });
        }

        function clearAdditionalInfoFields() {
          clearToterFields();
          clearBulkPickupFields();
          clearParkConcernFields();
          clearPollutionFields();
        }

        function clearToterFields() {
          const lidDamageSelect = document.getElementById('lidDamage');
          if (lidDamageSelect) lidDamageSelect.value = '';
          
          const toterBodyDamageSelect = document.getElementById('toterBodyDamage');
          if (toterBodyDamageSelect) toterBodyDamageSelect.value = '';
          
          const toterSizeSelect = document.getElementById('toterSize');
          if (toterSizeSelect) toterSizeSelect.value = '';
          
          // Clear toter text inputs
          const otherDamageInput = document.getElementById('otherDamage');
          if (otherDamageInput) otherDamageInput.value = '';
          
          const toterSerialInput = document.getElementById('toterSerialNumber');
          if (toterSerialInput) toterSerialInput.value = '';
        }

        function clearBulkPickupFields() {
          const bulkPickupTypeSelect = document.getElementById('bulkPickupType');
          if (bulkPickupTypeSelect) bulkPickupTypeSelect.value = '';
          
          const bulkItemsInput = document.getElementById('bulkItems');
          if (bulkItemsInput) bulkItemsInput.value = '';
        }

        function clearParkConcernFields() {
          // Clear park text inputs
          const cityParkInput = document.getElementById('cityPark');
          if (cityParkInput) cityParkInput.value = '';
          
          const parkFeatureLocationInput = document.getElementById('parkFeatureLocation');
          if (parkFeatureLocationInput) parkFeatureLocationInput.value = '';
        }

        function clearPollutionFields() {
          // Clear pollution fields
          const dateTimeObservedInput = document.getElementById('dateTimeObserved');
          if (dateTimeObservedInput) dateTimeObservedInput.value = '';
          
          const areaOfConcernInput = document.getElementById('areaOfConcern');
          if (areaOfConcernInput) areaOfConcernInput.value = '';
          
          const estimatedQuantityInput = document.getElementById('estimatedQuantity');
          if (estimatedQuantityInput) estimatedQuantityInput.value = '';
          
          const hasEnteredDrainSelect = document.getElementById('hasEnteredDrain');
          if (hasEnteredDrainSelect) hasEnteredDrainSelect.value = '';
          
          const cleanupActionsInput = document.getElementById('cleanupActions');
          if (cleanupActionsInput) cleanupActionsInput.value = '';
        }

        function setDateTimeMax() {
          const dateTimeInput = document.getElementById('dateTimeObserved');
          if (dateTimeInput) {
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const maxDateTime = `${year}-${month}-${day}T${hours}:${minutes}`;
            dateTimeInput.setAttribute('max', maxDateTime);
          }
        }

        function setToterFieldsRequired(isRequired) {
          const toterSerialInput = document.getElementById('toterSerialNumber');
          const toterSerialAsterisk = document.getElementById('toterSerialAsterisk');
          
          if (toterSerialInput) {
            if (isRequired) {
              toterSerialInput.setAttribute('required', '');
            } else {
              toterSerialInput.removeAttribute('required');
            }
          }
          
          if (toterSerialAsterisk) {
            toterSerialAsterisk.style.display = isRequired ? 'inline' : 'none';
          }
        }

        function setPollutionFieldsRequired(isRequired) {
          // Set/unset required attribute for area of concern
          const areaOfConcernInput = document.getElementById('areaOfConcern');
          const areaOfConcernAsterisk = document.getElementById('areaOfConcernAsterisk');
          
          if (areaOfConcernInput) {
            if (isRequired) {
              areaOfConcernInput.setAttribute('required', '');
            } else {
              areaOfConcernInput.removeAttribute('required');
            }
          }
          
          if (areaOfConcernAsterisk) {
            areaOfConcernAsterisk.style.display = isRequired ? 'inline' : 'none';
          }
        }

        function clearServiceButtonSelection() {
          // Clear all selected service buttons
          const serviceButtons = document.querySelectorAll('.service-list-btn');
          serviceButtons.forEach(btn => btn.classList.remove('selected'));
          
          // Clear the hidden input and disable continue button
          const hiddenInput = document.getElementById('requestType');
          const continueButton = document.getElementById('continueButton');
          
          if (hiddenInput) hiddenInput.value = '';
          if (continueButton) continueButton.disabled = true;
        }

        function hideError() {
          errorMessage.style.display = 'none';
        }

        function showError(message, title = null) {
          if (errorMessage) {
            errorMessage.style.display = 'flex';
            errorMessage.innerHTML = `
              <i class="bi bi-exclamation-triangle me-2"></i>
              ${message}
            `;
            errorMessage.scrollIntoView({ behavior: 'smooth' });
          } else {
            alert(message); // Fallback to alert
          }
        }

        setupStepEventListeners();
        showStep1();

        // Initialize authentication for public forms
        async function initializePublicForm() {
          try {
            console.log("Initializing public form with early token generation...");
            
            // Try to generate public token immediately on page load
            const tokenGenerated = await generatePublicTokenOnLoad();
            if (tokenGenerated) {
              console.log("Public form initialized with access token - ready for viewing and submission");
            } else {
              console.log("Public form initialized - token will be generated when needed");
            }
          } catch (error) {
            console.error("Failed to initialize public form authentication:", error);
          }
        }

        // Auto-initialize authentication when page loads
        initializePublicForm();

        // Initialize ESRI ArcGIS Map
        function initializeESRIMap() {
          require([
            "esri/Map",
            "esri/views/MapView",
            "esri/Graphic",
            "esri/geometry/Point",
            "esri/geometry/Polygon",
            "esri/symbols/SimpleMarkerSymbol",
            "esri/symbols/SimpleFillSymbol",
            "esri/layers/GraphicsLayer",
            "esri/widgets/BasemapToggle",
            "esri/widgets/ScaleBar",
            "esri/widgets/Zoom"
          ], function(Map, MapView, Graphic, Point, Polygon, SimpleMarkerSymbol, SimpleFillSymbol, GraphicsLayer, BasemapToggle, ScaleBar, Zoom) {
            
            // Create city boundary layer
            cityBoundaryLayer = new GraphicsLayer({
              title: "Frederick City Limits",
              opacity: 0.8
            });
            
            // Create boundary symbol with Frederick colors
            const boundarySymbol = new SimpleFillSymbol({
              color: [0, 71, 133, 0.1], // Frederick primary blue with low opacity
              outline: {
                color: [0, 71, 133, 0.8], // Frederick primary blue border
                width: 2,
                style: "solid"
              }
            });
            
            // Create boundary polygons from all features in GeoJSON
            FREDERICK_BOUNDARY.features.forEach((feature, index) => {
              const boundaryCoords = feature.geometry.coordinates[0];
              const boundaryPolygon = new Polygon({
                rings: [boundaryCoords],
                spatialReference: { wkid: 4326 }
              });
              
              // Create boundary graphic for this polygon
              const boundaryGraphic = new Graphic({
                geometry: boundaryPolygon,
                symbol: boundarySymbol,
                attributes: {
                  name: `Frederick City Limits - Polygon ${index + 1}`,
                  description: "Official Frederick city boundary from Maryland Department of Planning.",
                  source: "Maryland Department of Planning GeoJSON"
                },
              });
              
              // Add boundary to layer
              cityBoundaryLayer.add(boundaryGraphic);
            });

              // Create the map with fallback basemaps
              let map;
              try {
                map = new Map({
                  basemap: "arcgis-streets", // Primary: ESRI streets basemap
                  layers: [cityBoundaryLayer]
                });
              } catch (error) {
                console.warn("Primary basemap failed, trying fallback:", error);
                try {
                  map = new Map({
                    basemap: "streets", // Fallback 1: Basic streets
                    layers: [cityBoundaryLayer]
                  });
                } catch (error2) {
                  console.warn("Fallback 1 failed, trying fallback 2:", error2);
                  try {
                    map = new Map({
                      basemap: "gray", // Fallback 2: Gray basemap
                      layers: [cityBoundaryLayer]
                    });
                  } catch (error3) {
                    console.warn("All basemaps failed, using minimal map:", error3);
                    map = new Map({
                      layers: [cityBoundaryLayer] // Minimal: No basemap
                    });
                  }
                }
              }
            

            // Create the MapView with zoom and extent constraints
            try {
              // Ensure the container exists before creating the map
              const mapContainer = document.getElementById("esriMapView");
              if (!mapContainer) {
                console.error("Map container 'esriMapView' not found");
                showMapError();
                return;
              }
              
              esriMapView = new MapView({
                container: mapContainer,
                map: map,
                center: FREDERICK_CENTER,
                zoom: FREDERICK_ZOOM,
                constraints: {
                  minZoom: 10, 
                  maxZoom: 16, 
                  geometry: {
                    type: "extent",
                    xmin: -77.5,  
                    ymin: 39.35,   
                    xmax: -77.32,  
                    ymax: 39.48,   
                    spatialReference: { wkid: 4326 }
                  }
                },
                ui: {
                  components: ["attribution"] // Minimal UI
                }
              });
            } catch (error) {
              showMapError();
              return;
            }

            // Add custom zoom widget
            const zoomWidget = new Zoom({
              view: esriMapView
            });
            esriMapView.ui.add(zoomWidget, "top-left");

            // Add scale bar (only on larger screens)
            if (window.innerWidth > 480) {
              const scaleBar = new ScaleBar({
                view: esriMapView,
                unit: "dual"
              });
              esriMapView.ui.add(scaleBar, "bottom-left");
            }

            // Handle map click events
            esriMapView.on("click", function(event) {
              const point = event.mapPoint;
              const lat = point.latitude;
              const lng = point.longitude;
              
              // Remove existing marker
              if (currentMarker) {
                esriMapView.graphics.remove(currentMarker);
              }

              // Create new marker
              const markerSymbol = new SimpleMarkerSymbol({
                color: [0, 71, 133], // Frederick primary blue
                outline: {
                  color: [255, 215, 0], // Frederick gold accent
                  width: 3
                },
                size: "16px",
                style: "circle"
              });

              const markerGraphic = new Graphic({
                geometry: point,
                symbol: markerSymbol
              });

              // Add marker to map
              esriMapView.graphics.add(markerGraphic);
              currentMarker = markerGraphic;

              // Update coordinates
              updateCoordinates(lat, lng);
              
              // Validate location with geofencing
              validateLocationGeofencing(lat, lng);
            });

            // Add boundary legend/info (only on larger screens)
            if (window.innerWidth > 480) {
              const boundaryInfo = document.createElement("div");
              boundaryInfo.className = "boundary-legend";
              boundaryInfo.innerHTML = `
                <div style="background: rgba(255,255,255,0.9); padding: 8px; border-radius: 5px; font-size: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                  <div style="display: flex; align-items: center; gap: 5px;">
                    <div style="width: 12px; height: 12px; background: rgba(0,71,133,0.1); border: 2px solid rgba(0,71,133,0.8);"></div>
                    <span style="font-weight: 500;">Frederick City Limits</span>
                  </div>
                </div>
              `;
              esriMapView.ui.add(boundaryInfo, "bottom-right");
            }
            
            // Add address display bar (initially hidden)
            const addressBar = document.createElement("div");
            addressBar.id = "addressBar";
            addressBar.className = "address-bar";
            addressBar.style.display = "none";
            addressBar.innerHTML = `
              <div style="background: rgba(255,255,255,0.95); padding: 12px 16px; border-radius: 8px; font-size: 14px; box-shadow: 0 2px 8px rgba(0,0,0,0.15); min-width: 300px; max-width: 400px;">
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                  <i class="bi bi-geo-alt-fill" style="color: #00a693;"></i>
                  <span style="font-weight: 600; color: #323a45;">Selected Location</span>
                </div>
                <div id="currentAddress" style="color: #6b7280; font-size: 13px; line-height: 1.4;">
                  Click on the map to select a location
                </div>
                <div id="currentCoords" style="color: #9ca3af; font-size: 11px; margin-top: 4px; font-family: monospace;">
                  No coordinates selected
                </div>
              </div>
            `;
            esriMapView.ui.add(addressBar, "top-right");

            // Map loaded successfully
            esriMapView.when(function() {
              hideMapLoading();
              loadExistingServiceRequests();
            }).catch(function(error) {
              showMapError();
            });
            map.basemap.load().then(function() {
            }).catch(function(error) {
            });
          });
        }

        // Function to load existing service requests and display them on the map
        async function loadExistingServiceRequests() {
          if (!esriMapView) {
            console.log("Cannot load existing requests: map view not ready");
            return;
          }

          console.log("Attempting to load existing service requests for map display...");
          
          // Try to get a token for viewing existing requests
          let viewingToken = userToken;
          
          if (!viewingToken) {
            console.log("No token available, attempting to get viewing token...");
            try {
              // Try to get a token from localStorage first
              const storedToken = localStorage.getItem("token");
              if (storedToken) {
                try {
                  viewingToken = CryptoJS.AES.decrypt(storedToken, aesKEY).toString(CryptoJS.enc.Utf8);
                  if (viewingToken && !isTokenExpired(viewingToken)) {
                    console.log("Using stored token for viewing existing requests");
                  } else {
                    console.log("Stored token expired, clearing...");
                    viewingToken = null;
                  }
                } catch (error) {
                  console.log("Stored token invalid, clearing...");
                  viewingToken = null;
                }
              }
              
              // If no valid stored token, try to generate one without reCAPTCHA
              if (!viewingToken) {
                console.log("No stored token available, attempting to generate public token for viewing...");
                const tokenGenerated = await generatePublicTokenOnLoad();
                if (tokenGenerated && userToken) {
                  viewingToken = userToken;
                  console.log("Generated new public token for viewing existing requests");
                }
              }
            } catch (error) {
              console.log("Could not retrieve or generate viewing token:", error);
            }
          }

          // Make API call to get existing service requests
          const ajaxConfig = {
            url: `${SERVER_URL_PAGE}/api/Report/queryreport`,
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify({
              ReportId: REQUEST_EAM_REPORT_REPORT_ID
            }),
            timeout: 15000,
            success: function (response) {
              console.log("Existing service requests loaded:", response?.length || 0, "requests");
              if (Array.isArray(response) && response.length > 0) {
                addExistingRequestsToMap(response);
              } else {
                console.log("No existing service requests found or empty response");
              }
            },
            error: function (xhr, status, error) {
              console.log("Could not load existing service requests:", error);
              console.log("This is normal for public forms - continuing without existing data");
            }
          };
          
          // Add authorization header if we have a token
          if (viewingToken) {
            ajaxConfig.beforeSend = function (xhr) {
              xhr.setRequestHeader("Authorization", `Bearer ${viewingToken}`);
            };
            console.log("Making authenticated request for existing service requests");
          } else {
            console.log("Making unauthenticated request for existing service requests");
          }
          
          $.ajax(ajaxConfig);
        }

        // Function to add existing service requests as markers on the map
        function addExistingRequestsToMap(requestsData) {
          require([
            "esri/Graphic",
            "esri/geometry/Point", 
            "esri/symbols/SimpleMarkerSymbol",
            "esri/PopupTemplate",
            "esri/layers/GraphicsLayer"
          ], function(Graphic, Point, SimpleMarkerSymbol, PopupTemplate, GraphicsLayer) {
            

            if (!existingRequestsLayer) {
              existingRequestsLayer = new GraphicsLayer({
                title: "Existing Service Requests",
                opacity: 0.8
              });
              esriMapView.map.add(existingRequestsLayer);
            }

            requestsData.forEach(function(request, index) {
              try {
                const lat = parseFloat(request.tbl7802_latitude);
                const lng = parseFloat(request.tbl7802_longitude);
                
                if (isNaN(lat) || isNaN(lng) || lat === 0 || lng === 0) {
                  return;
                }

                const requestType = request.tbl7802_request_category;
                const status = request.tbl7802_request_status;
                const description = request.tbl7802_description;
                const requestId = request.tbl7802_id || request.id;
                const isAnonymous = request.tbl7802_anonymous_request === "True";
                const requestAddress = request.tbl7802_request_address;
                
                let markerColor = [128, 128, 128];
                switch (status.toLowerCase()) {
                  case 'open':
                    markerColor = [249, 145, 0]; 
                    break;
                  case 'closed':
                    markerColor = [34, 139, 34];
                    break;
                }

                const point = new Point({
                  longitude: lng,
                  latitude: lat
                });

                const markerSymbol = new SimpleMarkerSymbol({
                  color: markerColor,
                  outline: {
                    color: [0, 55, 102],
                    width: 2
                  },
                  size: "10px",
                  style: "circle"
                });

                const popupTemplate = new PopupTemplate({
                  title: `${requestType} Request #${requestId}`,
                  content: [
                    {
                      type: "fields",
                      fieldInfos: [
                        {
                          fieldName: "requestId",
                          label: "Request ID"
                        },
                        {
                          fieldName: "status",
                          label: "Status"
                        },
                        {
                          fieldName: "requestType",
                          label: "Request Type"
                        },
                        {
                          fieldName: "requestAddress",
                          label: "Address"
                        },
                        {
                          fieldName: "description", 
                          label: "Description"
                        },
                        {
                          fieldName: "isAnonymous",
                          label: "Anonymous Request"
                        },
                        {
                          fieldName: "priority",
                          label: "Priority"
                        },
                        {
                          fieldName: "location",
                          label: "Coordinates"
                        }
                      ]
                    }
                  ]
                });

                const graphic = new Graphic({
                  geometry: point,
                  symbol: markerSymbol,
                  attributes: {
                    requestId: requestId,
                    status: status,
                    requestType: requestType,
                    requestAddress: requestAddress,
                    description: description.length > 150 ? description.substring(0, 150) + "..." : description,
                    isAnonymous: isAnonymous ? "Yes" : "No",
                    location: `${lat.toFixed(6)}, ${lng.toFixed(6)}`
                  },
                  popupTemplate: popupTemplate
                });

                existingRequestsLayer.add(graphic);

              } catch (error) {
              }
            });

            const loadedCount = existingRequestsLayer.graphics.length;
            if (loadedCount > 0) {
              showCoordinateMessage(`Loaded ${loadedCount} existing service requests on map (use "Zoom to All Requests" to view them)`);
            } else {
              showCoordinateMessage(`No existing service requests found with valid coordinates`);
            }
          });
        }

        function showMapLoading() {
          const mapContainer = document.querySelector('.map-container');
          const loadingDiv = document.createElement('div');
          loadingDiv.className = 'map-loading';
          loadingDiv.innerHTML = `
            <div class="loading-spinner"></div>
            <h5>Loading Interactive Map...</h5>
            <p>Initializing ESRI ArcGIS map for location selection</p>
          `;
          mapContainer.appendChild(loadingDiv);
        }

        function hideMapLoading() {
          const loadingDiv = document.querySelector('.map-loading');
          if (loadingDiv) {
            loadingDiv.remove();
          }
        }

        function showMapError() {
          hideMapLoading();
          const mapContainer = document.querySelector('#esriMapView');
          mapContainer.innerHTML = `
            <div style="display: flex; align-items: center; justify-content: center; height: 100%; background: var(--mist-gray); flex-direction: column;">
              <i class="bi bi-exclamation-triangle" style="font-size: 3rem; color: var(--coral-accent); margin-bottom: 1rem;"></i>
              <h5>Map Loading Error</h5>
              <p>Unable to load the interactive map. Please enter coordinates manually.</p>
              <button type="button" class="map-control-btn" onclick="location.reload()">
                <i class="bi bi-arrow-clockwise"></i> Retry
              </button>
            </div>
          `;
        }

        function getCurrentLocation() {
          if (navigator.geolocation) {
            const btn = event.target.closest('.map-control-btn');
            const originalContent = btn.innerHTML;
            btn.innerHTML = '<i class="bi bi-hourglass-split"></i> Getting Location...';
            btn.disabled = true;
            
            navigator.geolocation.getCurrentPosition(
              function(position) {
                const lat = position.coords.latitude;
                const lng = position.coords.longitude;
                
                if (!isPointInFrederick(lat, lng)) {
                  btn.innerHTML = originalContent;
                  btn.disabled = false;
                  showLocationOutsideBoundariesModal(lat, lng);
                  return;
                }
                
                updateCoordinates(lat, lng);
                
                if (esriMapView) {
                  require(["esri/geometry/Point", "esri/Graphic", "esri/symbols/SimpleMarkerSymbol"], 
                    function(Point, Graphic, SimpleMarkerSymbol) {
                      
                      if (currentMarker) {
                        esriMapView.graphics.remove(currentMarker);
                      }

                      const point = new Point({
                        longitude: lng,
                        latitude: lat
                      });

                      esriMapView.center = point;
                      esriMapView.zoom = 16;

                      const markerSymbol = new SimpleMarkerSymbol({
                        color: [255, 215, 0],
                        outline: {
                          color: [0, 71, 133],
                          width: 3
                        },
                        size: "18px",
                        style: "circle"
                      });

                      const markerGraphic = new Graphic({
                        geometry: point,
                        symbol: markerSymbol
                      });

                      esriMapView.graphics.add(markerGraphic);
                      currentMarker = markerGraphic;
                    });
                }
                
                btn.innerHTML = originalContent;
                btn.disabled = false;
                
                showCoordinateMessage(`Current location found: ${lat.toFixed(6)}, ${lng.toFixed(6)}`);
              },
              function(error) {
                showInfo('Unable to get your location. Please click on the map to select a location.', 'Location Access Unavailable');
                
                btn.innerHTML = originalContent;
                btn.disabled = false;
              },
              {
                enableHighAccuracy: true,
                timeout: 10000,
                maximumAge: 300000
              }
            );
          } else {
            showInfo('Geolocation is not supported by this browser. Please click on the map to select a location.', 'Geolocation Not Supported');
          }
        }

        // Function to clear selected location
        function clearLocation() {
          selectedCoordinates = null;
          document.getElementById('latitude').value = '';
          document.getElementById('longitude').value = '';
          const addressInput = document.getElementById('addressSearch');
          if (addressInput) {
            addressInput.value = '';
            addressInput.placeholder = 'Start typing an address in Frederick, MD...';
          }

          if (esriMapView && currentMarker) {
            esriMapView.graphics.remove(currentMarker);
            currentMarker = null;
          }
          hideAddressDisplay();
          hideCoordinateMessage();
        }



        // Function to toggle visibility of existing service requests
        function toggleExistingRequests() {
          if (!existingRequestsLayer) {
            loadExistingServiceRequests();
            return;
          }

          const toggleBtn = document.getElementById('toggleExistingRequests');
          const isVisible = existingRequestsLayer.visible;

          if (isVisible) {
            // Hide existing requests
            existingRequestsLayer.visible = false;
            toggleBtn.innerHTML = '<i class="bi bi-eye"></i> Show Existing Requests';
            showCoordinateMessage('Existing service requests hidden');
          } else {
            // Show existing requests
            existingRequestsLayer.visible = true;
            toggleBtn.innerHTML = '<i class="bi bi-eye-slash"></i> Hide Existing Requests';
            showCoordinateMessage('Existing service requests shown');
          }
        }

        // Function to zoom map to show all existing requests or return to Frederick
        function zoomToAllRequests() {
          const zoomBtn = document.querySelector('button[onclick="zoomToAllRequests()"]');
          
          if (!esriMapView) {
            showCoordinateMessage('Map not available');
            return;
          }

          if (!isShowingAllRequests) {
            // Currently showing Frederick, zoom out to show all requests
            if (!existingRequestsLayer || existingRequestsLayer.graphics.length === 0) {
              showCoordinateMessage('No existing requests to zoom to');
              return;
            }

            // Make sure layer is visible
            existingRequestsLayer.visible = true;
            const toggleBtn = document.getElementById('toggleExistingRequests');
            if (toggleBtn) {
              toggleBtn.innerHTML = '<i class="bi bi-eye-slash"></i> Hide Existing Requests';
            }

            // Zoom to all graphics in the layer
            esriMapView.goTo(existingRequestsLayer.graphics.toArray())
              .then(() => {
                isShowingAllRequests = true;
                zoomBtn.innerHTML = '<i class="bi bi-geo-alt"></i> Focus on Frederick';
                showCoordinateMessage(`Zoomed to show all ${existingRequestsLayer.graphics.length} existing requests`);
              })
              .catch(error => {
                showCoordinateMessage('Error zooming to requests');
              });
          } else {
            // Currently showing all requests, return to Frederick center
            require(["esri/geometry/Point"], function(Point) {
              const frederickPoint = new Point({
                longitude: FREDERICK_CENTER[0],
                latitude: FREDERICK_CENTER[1]
              });

              esriMapView.goTo({
                center: frederickPoint,
                zoom: FREDERICK_ZOOM
              }).then(() => {
                isShowingAllRequests = false;
                zoomBtn.innerHTML = '<i class="bi bi-arrows-fullscreen"></i> Zoom to All Requests';
                showCoordinateMessage('Focused on Frederick area');
              }).catch(error => {
                showCoordinateMessage('Error focusing on Frederick');
              });
            });
          }
        }

        // Function to update coordinates in the form
        function updateCoordinates(lat, lng) {
          selectedCoordinates = { lat, lng };
          document.getElementById('latitude').value = lat.toFixed(6);
          document.getElementById('longitude').value = lng.toFixed(6);
          
          // Update coordinate display
          updateAddressDisplay(lat, lng);
        }
        
        
        // Helper function to parse address components from a street address string
        function parseAddressComponents(addressString) {
          const parts = addressString.split(',').map(part => part.trim());
          
          if (parts.length >= 3) {
            return [
              { long_name: parts[0] || '', types: ['street_address'] },
              { long_name: parts[parts.length - 3] || '', types: ['locality'] },
              { long_name: parts[parts.length - 2] || '', types: ['administrative_area_level_1'] },
              { long_name: parts[parts.length - 1] || '', types: ['postal_code'] }
            ];
          } else {
            return [{ long_name: addressString, types: ['street_address'] }];
          }
        }
        
        // Direct ESRI REST API call for getting street addresses
        function tryGetBetterAddress(lat, lng, resolve, reject, originalResult) {
          const apiKey = ESRI_API_KEY;
          const geocodeUrl = "https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/reverseGeocode";
          
          const params = new URLSearchParams({
            location: `${lng},${lat}`,
            distance: 100,
            outSR: 4326,
            returnIntersection: false,
            forStorage: false,
            featureTypes: 'StreetAddress',
            locationType: 'street',
            f: 'json',
            token: apiKey
          });
          
          fetch(`${geocodeUrl}?${params}`)
            .then(response => response.json())
            .then(data => {
              if (data && data.address) {
                const addr = data.address.Address || data.address.Match_addr || '';
                const city = data.address.City || '';
                const region = data.address.Region || '';
                const postal = data.address.Postal || '';
                
                let streetAddress = '';
                if (addr && city) {
                  streetAddress = `${addr}, ${city}`;
                  if (region) streetAddress += `, ${region}`;
                  if (postal) streetAddress += ` ${postal}`;
                }
                
                if (streetAddress && streetAddress !== originalResult) {
                  const looksLikeStreetAddress = streetAddress.match(/^\d+\s+/) || 
                                               streetAddress.match(/\b(st|street|ave|avenue|rd|road|blvd|boulevard|dr|drive|ln|lane|ct|court|pl|place|way|circle|cir)\b/i);
                  
                  if (looksLikeStreetAddress) {
                    resolve({
                      formatted_address: streetAddress,
                      address_components: parseAddressComponents(streetAddress)
                    });
                    return;
                  }
                }
              }
              
              const fallbackAddress = originalResult && !originalResult.match(/^[YX]:\d+\.\d+/) 
                ? originalResult
                : `Near ${lat.toFixed(4)}, ${lng.toFixed(4)} (Frederick, MD)`;
              
              resolve({
                formatted_address: fallbackAddress,
                address_components: [{ long_name: fallbackAddress, types: ['approximate'] }]
              });
            })
            .catch(error => {
              const fallbackAddress = originalResult || `${lat.toFixed(6)}, ${lng.toFixed(6)}`;
              resolve({
                formatted_address: fallbackAddress,
                address_components: [{ long_name: fallbackAddress, types: ['coordinates'] }]
              });
            });
        }

        // Function to lookup address from coordinates using direct ESRI REST API
        async function getAddressFromCoordinates(lat, lng) {
          return new Promise((resolve, reject) => {
            const apiKey = ESRI_API_KEY;
            const geocodeUrl = "https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/reverseGeocode";
            
            // Build URL parameters
            const params = new URLSearchParams({
              location: `${lng},${lat}`,
              distance: 100,
              outSR: 4326,
              forStorage: false,
              f: 'json',
              token: apiKey
            });
            
            fetch(`${geocodeUrl}?${params}`)
              .then(response => response.json())
              .then(data => {
                if (data && data.address) {
                  let formattedAddress;
                  let addressComponents = [];
                  
                  // Handle string addresses (most common)
                  if (typeof data.address === 'string') {
                    formattedAddress = data.address.trim();
                    const isCoordinateOnly = formattedAddress.match(/^[YX]:\d+\.\d+/);
                    const looksLikeStreetAddress = formattedAddress.match(/^\d+\s+/) ||
                                                 formattedAddress.match(/\b(st|street|ave|avenue|rd|road|blvd|boulevard|dr|drive|ln|lane|ct|court|pl|place|way|circle|cir)\b/i);
                    
                    if (isCoordinateOnly || !looksLikeStreetAddress) {
                      tryGetBetterAddress(lat, lng, resolve, reject, formattedAddress);
                      return;
                    }
                    
                    // Parse address components
                    const parts = formattedAddress.split(',').map(part => part.trim());
                    
                    if (parts.length >= 3) {
                      addressComponents = [
                        { long_name: parts[0] || '', types: ['street_address'] },
                        { long_name: parts[parts.length - 3] || '', types: ['locality'] },
                        { long_name: parts[parts.length - 2] || '', types: ['administrative_area_level_1'] },
                        { long_name: parts[parts.length - 1] || '', types: ['postal_code'] }
                      ];
                    } else {
                      addressComponents = [
                        { long_name: formattedAddress, types: ['street_address'] }
                      ];
                    }
                  }
                  // Handle object addresses
                  else if (typeof data.address === 'object' && data.address !== null) {
                    const addr = data.address;
                    const possibleStreet = addr.Address || addr.Street || addr.Match_addr || '';
                    const possibleCity = addr.City || '';
                    const possibleRegion = addr.Region || '';
                    const possiblePostal = addr.Postal || '';
                    
                    const addressParts = [];
                    if (possibleStreet && possibleStreet.trim()) addressParts.push(possibleStreet.trim());
                    if (possibleCity && possibleCity.trim()) addressParts.push(possibleCity.trim());
                    if (possibleRegion && possibleRegion.trim()) addressParts.push(possibleRegion.trim());
                    if (possiblePostal && possiblePostal.trim()) addressParts.push(possiblePostal.trim());
                    
                    formattedAddress = addressParts.length > 0 ? addressParts.join(', ') : 'Address found but formatting unavailable';
                    
                    addressComponents = [
                      { long_name: possibleStreet || '', types: ['street_address'] },
                      { long_name: possibleCity || '', types: ['locality'] },
                      { long_name: possibleRegion || '', types: ['administrative_area_level_1'] },
                      { long_name: possiblePostal || '', types: ['postal_code'] }
                    ];
                  }
                  
                  resolve({
                    formatted_address: formattedAddress,
                    address_components: addressComponents
                  });
                } else {
                  reject(new Error('No address found'));
                }
              })
              .catch(error => {
                resolve({
                  formatted_address: `Location: ${lat.toFixed(6)}, ${lng.toFixed(6)}`,
                  address_components: [
                    { long_name: `${lat.toFixed(6)}, ${lng.toFixed(6)}`, types: ['coordinates'] }
                  ]
                });
              });
          });
        }

        // Function to perform storage geocoding for final submission (forStorage: true)
        async function performStorageGeocoding(locationInfo) {
          return new Promise((resolve, reject) => {
            if (!locationInfo.latitude || !locationInfo.longitude || 
                locationInfo.latitude === "0" || locationInfo.longitude === "0" ||
                !locationInfo.address || locationInfo.address.trim() === "") {
              resolve();
              return;
            }

            // Use direct REST API for storage geocoding with forStorage=true
            const apiKey = ESRI_API_KEY;
            const geocodeUrl = "https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates";
            
            // Build URL parameters for forward geocoding with storage
            const params = new URLSearchParams({
              'Single Line Input': locationInfo.address.trim(),
              maxLocations: 1,
              outSR: 4326,
              forStorage: true, // Proper credit consumption
              countryCode: "USA",
              searchExtent: `${parseFloat(locationInfo.longitude) - 0.001},${parseFloat(locationInfo.latitude) - 0.001},${parseFloat(locationInfo.longitude) + 0.001},${parseFloat(locationInfo.latitude) + 0.001}`,
              f: 'json',
              token: apiKey
            });
            
            fetch(`${geocodeUrl}?${params}`)
              .then(response => response.json())
              .then(data => {
                resolve();
              })
              .catch(error => {
                resolve();
              });
          });
        }

        
        // Function to update the address display
        async function updateAddressDisplay(lat, lng) {
          const coordsDisplay = document.getElementById('currentCoords');
          const addressDisplay = document.getElementById('currentAddress');
          const addressBar = document.getElementById('addressBar');
          
          if (!coordsDisplay || !addressDisplay) return;

          if (lat === 0 && lng === 0) {
            if (addressBar) {
              addressBar.style.display = "none";
            }
            return;
          }
          
          if (addressBar) {
            addressBar.style.display = "block";
          }
          coordsDisplay.textContent = `${lat.toFixed(6)}, ${lng.toFixed(6)}`;
          addressDisplay.innerHTML = '<i class="bi bi-hourglass-split"></i> Looking up address...';
          
          try {
            const addressData = await getAddressFromCoordinates(lat, lng);
            
            let displayAddress = addressData.formatted_address;
            
            if (displayAddress.includes(',')) {
              const parts = displayAddress.split(',');
              if (parts.length > 3) {
                displayAddress = parts.slice(0, 3).join(',').trim();
              }
            }
            
            addressDisplay.textContent = displayAddress;
            updateAddressSearchField(displayAddress);
            
          } catch (error) {
            addressDisplay.textContent = 'Address lookup unavailable';
          }
        }

        // Function to hide the address display
        function hideAddressDisplay() {
          const addressBar = document.getElementById('addressBar');
          if (addressBar) {
            addressBar.style.display = "none";
          }
        }

        // Function to update address search field without triggering autocomplete
        function updateAddressSearchField(address) {
          const addressInput = document.getElementById('addressSearch');
          // Don't set invalid or generic addresses
          if (addressInput && address && 
              address.toLowerCase() !== 'earth' && 
              address !== 'Address lookup unavailable' &&
              !address.match(/^[XY]:\d+\.\d+/) &&
              address.trim() !== '') {
           
            const autocomplete = addressInput.autocompleteInstance;
            if (autocomplete) {
             
              addressInput.value = address;
              
              setTimeout(() => {
                addressInput.placeholder = "Address set from map location";
              }, 100);
            } else {
              addressInput.value = address;
              addressInput.placeholder = "Address set from map location";
            }
          }
        }



        // Function to hide coordinate message
        function hideCoordinateMessage() {
          const coordDisplay = document.querySelector('.coordinates-display');
          if (coordDisplay) {
            coordDisplay.classList.remove('show');
          }
        }

        // File upload variables
        let uploadedFiles = [];

        // Photo/File upload handling
        const photoUpload = document.getElementById("photoUpload");
        const photoInput = document.getElementById("photoInput");
        const photoPreview = document.getElementById("photoPreview");

        photoUpload.addEventListener("click", () => {
          if (uploadedFiles.length >= 3) {
            showWarning("Maximum 3 files allowed. Please remove files before adding new ones.", "File Limit Reached");
            return;
          }
          photoInput.click();
        });

        photoUpload.addEventListener("dragover", (e) => {
          e.preventDefault();
          
          // Provide visual feedback based on current state
          if (uploadedFiles.length >= 3) {
            photoUpload.style.borderColor = "#ef4444"; 
            photoUpload.style.backgroundColor = "#fee2e2";
          } else {
            photoUpload.classList.add("dragover");
          }
        });

        photoUpload.addEventListener("dragleave", () => {
          photoUpload.classList.remove("dragover");
          photoUpload.style.borderColor = "";
          photoUpload.style.backgroundColor = "";
        });

        photoUpload.addEventListener("drop", (e) => {
          e.preventDefault();
          photoUpload.classList.remove("dragover");
          photoUpload.style.borderColor = "";
          photoUpload.style.backgroundColor = "";
          handleFiles(e.dataTransfer.files);
        });

        photoInput.addEventListener("change", (e) => {
          handleFiles(e.target.files);
        });

        // File to Base64 conversion function with compression
        function fileToBase64(file, split = true) {
          let sanitizedName = file.name;
          const parts = sanitizedName.split('.');
          
          if (parts.length > 2) {
            const nameWithoutExt = parts.slice(0, -1).join('_');
            const extension = parts[parts.length - 1];
            sanitizedName = `${nameWithoutExt}.${extension}`;
          }
          
          sanitizedName = sanitizedName.replace(/[^a-zA-Z0-9._-]/g, '_');
          
          return new Promise((resolve, reject) => {
            if (file.type.startsWith('image/') && file.size > 2 * 1024 * 1024) {
              compressImage(file).then(compressedFile => {
                processFileToBase64(compressedFile, sanitizedName, split, resolve, reject);
              }).catch(error => {
                processFileToBase64(file, sanitizedName, split, resolve, reject);
              });
            } else {
              processFileToBase64(file, sanitizedName, split, resolve, reject);
            }
          });
        }

        // Helper function to process file to base64
        function processFileToBase64(file, sanitizedName, split, resolve, reject) {
          const reader = new FileReader();
          reader.readAsDataURL(file);
          reader.onload = () => {
            try {
              const result = reader.result.toString();
              resolve({
                name: sanitizedName,
                value: split 
                  ? result.split(',')[1]  // Just base64
                  : result                // Full data URL
              });
            } catch (error) {              
              reject(error);
            }
          };
          reader.onerror = () => {
            reject(reader.error);
          };
        }

        // Image compression function
        function compressImage(file, maxWidth = 1920, maxHeight = 1920, quality = 0.8) {
          return new Promise((resolve, reject) => {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const img = new Image();
            
            img.onload = () => {
              // Calculate new dimensions
              let { width, height } = img;
              
              if (width > maxWidth || height > maxHeight) {
                const ratio = Math.min(maxWidth / width, maxHeight / height);
                width = Math.round(width * ratio);
                height = Math.round(height * ratio);
              }
              
              // Set canvas size
              canvas.width = width;
              canvas.height = height;
              
              // Draw and compress
              ctx.drawImage(img, 0, 0, width, height);
              
              canvas.toBlob((blob) => {
                if (blob) {
                  // Create a new File object with compressed data
                  const compressedFile = new File([blob], file.name, {
                    type: file.type,
                    lastModified: Date.now()
                  });
                  resolve(compressedFile);
                } else {
                  reject(new Error('Failed to compress image'));
                }
              }, file.type, quality);
            };
            
            img.onerror = () => reject(new Error('Failed to load image for compression'));
            img.src = URL.createObjectURL(file);
          });
        }

        function handleFiles(files) {
          const remainingSlots = 3 - uploadedFiles.length;
          
          if (remainingSlots <= 0) {
            showWarning("Maximum 3 files allowed. Please remove files before adding new ones.", "File Limit Reached");
            return;
          }
          
          const filesToProcess = Array.from(files).slice(0, remainingSlots);
          
          if (files.length > remainingSlots) {
            showInfo(`Only ${remainingSlots} more file(s) can be uploaded. Processing the first ${remainingSlots} file(s) only.`, "File Limit Applied");
          }

          // Show processing indicator
          showFileProcessingIndicator(filesToProcess.length);
          
          // Validate files first
          const validationErrors = [];
          filesToProcess.forEach((file, index) => {
            if (file.size > 10 * 1024 * 1024) {
              validationErrors.push(`File "${file.name}" is too large (max 10MB)`);
            }

            const allowedTypes = [
              'image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp', 
              'image/heic', 'image/heif', 'application/pdf',
            ];
            if (!allowedTypes.includes(file.type)) {
              validationErrors.push(`File "${file.name}" has unsupported format`);
            }
          });

          if (validationErrors.length > 0) {
            hideFileProcessingIndicator();
            showError(validationErrors.join('\n'), "File Validation Error");
            return;
          }

          const filePromises = filesToProcess.map((file, index) => {
            const fileId = Date.now() + Math.random() + index;
            const fileObj = {
              id: fileId,
              file: file,
              name: file.name,
              type: file.type,
              url: null,
              base64: null,
              isProcessing: true
            };

           
            uploadedFiles.push(fileObj);

            return fileToBase64(file, false).then((result) => {
              fileObj.url = result.value;
              fileObj.base64 = result.value.split(',')[1];
              fileObj.name = result.name;
              fileObj.isProcessing = false;
              
             
              const finalSizeKB = (result.value.length * 0.75) / 1024;
              const originalSizeKB = file.size / 1024;
              fileObj.wasCompressed = originalSizeKB > 2048 && finalSizeKB < originalSizeKB * 0.9;
              
              return fileObj;
            }).catch((error) => {
             
              const index = uploadedFiles.findIndex(f => f.id === fileId);
              if (index > -1) {
                uploadedFiles.splice(index, 1);
              }
              throw new Error(`Failed to process "${file.name}": ${error.message}`);
            });
          });

          
          displayFiles();

          
          Promise.all(filePromises)
            .then((processedFiles) => {
              displayFiles();
              hideFileProcessingIndicator();
              updateSubmitButtonState();
            })
            .catch((error) => {
              hideFileProcessingIndicator();
              displayFiles();
              updateSubmitButtonState();
              showError(error.message, "File Processing Error");
            });
        }

        function displayFiles() {
          photoPreview.innerHTML = "";
          uploadedFiles.forEach((fileObj) => {
            const previewItem = document.createElement("div");
            previewItem.className = "preview-item";
            
            if (fileObj.isProcessing) {
              previewItem.innerHTML = `
                <div class="file-processing">
                  <div class="processing-spinner"></div>
                  <div class="file-name">${fileObj.name}</div>
                  <div class="processing-text">Processing...</div>
                </div>
              `;
            } else if (fileObj.url && fileObj.type.startsWith('image/')) {
              const compressionNote = fileObj.wasCompressed ? '<div class="compression-note"><i class="bi bi-info-circle"></i> Compressed</div>' : '';
              // Ensure fileObj.url is valid before using it
              const imageUrl = fileObj.url && fileObj.url !== 'undefined' ? fileObj.url : '';
              if (imageUrl) {
                previewItem.innerHTML = `
                  <img src="${imageUrl}" alt="Preview">
                  <div class="file-status success">
                    <i class="bi bi-check-circle-fill"></i>
                  </div>
                  ${compressionNote}
                  <button type="button" class="remove-photo" onclick="removeFile(${fileObj.id})">
                    <i class="bi bi-x"></i>
                  </button>
                `;
              } else {
                console.warn('Invalid file URL for preview:', fileObj);
              }
            } else if (fileObj.url && fileObj.url !== 'undefined') {
              let fileIcon = "bi-file-earmark";
              if (fileObj.type.includes('pdf')) {
                fileIcon = "bi-file-earmark-pdf";
              } else if (fileObj.type.includes('word') || fileObj.type.includes('document')) {
                fileIcon = "bi-file-earmark-word";
              }
              
              previewItem.innerHTML = `
                <div class="file-preview">
                  <i class="bi ${fileIcon} file-icon"></i>
                  <div class="file-name">${fileObj.name}</div>
                  <div class="file-status success">
                    <i class="bi bi-check-circle-fill"></i>
                  </div>
                </div>
                <button type="button" class="remove-photo" onclick="removeFile(${fileObj.id})">
                  <i class="bi bi-x"></i>
                </button>
              `;
            } else {
              previewItem.innerHTML = `
                <div class="file-preview">
                  <i class="bi bi-exclamation-triangle file-icon" style="color: var(--error-red);"></i>
                  <div class="file-name">${fileObj.name}</div>
                  <div class="processing-text" style="color: var(--error-red);">Failed to process</div>
                </div>
                <button type="button" class="remove-photo" onclick="removeFile(${fileObj.id})">
                  <i class="bi bi-x"></i>
                </button>
              `;
            }
            photoPreview.appendChild(previewItem);
          });
          
          updateSubmitButtonState();
        }

        window.removeFile = function (fileId) {
          uploadedFiles = uploadedFiles.filter((file) => file.id !== fileId);
          displayFiles();
          updateSubmitButtonState();
        };

        // New helper functions for file processing
        function showFileProcessingIndicator(fileCount) {
          const photoUpload = document.getElementById('photoUpload');
          const existingIndicator = document.getElementById('fileProcessingIndicator');
          
          if (existingIndicator) {
            existingIndicator.remove();
          }
          
          const indicator = document.createElement('div');
          indicator.id = 'fileProcessingIndicator';
          indicator.className = 'file-processing-indicator';
          indicator.innerHTML = `
            <div class="processing-spinner"></div>
            <span>Processing ${fileCount} file(s)...</span>
          `;
          photoUpload.appendChild(indicator);
        }

        function hideFileProcessingIndicator() {
          const indicator = document.getElementById('fileProcessingIndicator');
          if (indicator) {
            indicator.remove();
          }
        }

        function updateSubmitButtonState() {
          const submitButton = document.getElementById("submitButton");
          if (!submitButton) return;
          
          const hasProcessingFiles = uploadedFiles.some(file => file.isProcessing);
          
          if (hasProcessingFiles) {
            submitButton.disabled = true;
            submitButton.innerHTML = '<i class="bi bi-hourglass-split"></i> Processing Files...';
            submitButton.style.opacity = '0.7';
          } else if (!submitButton.classList.contains('submitting')) {
            submitButton.disabled = false;
            submitButton.innerHTML = '<i class="bi bi-send"></i> Submit Service Request';
            submitButton.style.opacity = '1';
          }
        }

        // Make functions globally available
        window.getCurrentLocation = getCurrentLocation;
        window.clearLocation = clearLocation;
        window.toggleExistingRequests = toggleExistingRequests;
        window.zoomToAllRequests = zoomToAllRequests;

        // Initialize ESRI Address Autocomplete
        function initializeAddressAutocomplete() {
          const addressInput = document.getElementById('addressSearch');
          if (!addressInput) return;

          let searchTimeout;
          
          addressInput.addEventListener('input', function(e) {
            const query = e.target.value.trim();
            
            if (query.length < 3) {
              hideAddressSuggestions();
              return;
            }
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
              searchAddresses(query);
            }, 300);
          });

          // Handle Enter key press for manual address entry
          addressInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
              e.preventDefault();
              const query = e.target.value.trim();
              if (query.length >= 3) {
                handleManualAddressEntry(query);
              }
            }
          });

          // Handle when user finishes typing and clicks away (blur event)
          addressInput.addEventListener('blur', function(e) {
            const query = e.target.value.trim();
            if (query.length >= 3) {
              setTimeout(() => {
                if (document.getElementById('addressSuggestions')) {
                  return;
                }
                handleManualAddressEntry(query);
              }, 200);
            }
          });
          
          // Handle manual address entry (Enter key or blur)
          function handleManualAddressEntry(query) {
            hideAddressSuggestions();
            const apiKey = ESRI_API_KEY;
            const geocodeUrl = "https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates";
            
            // Build URL parameters for single address geocoding
            const params = new URLSearchParams({
              'Single Line Input': query,
              maxLocations: 1,
              outSR: 4326,
              forStorage: false,
              countryCode: "USA",
              f: 'json',
              token: apiKey
            });
            
            fetch(`${geocodeUrl}?${params}`)
              .then(response => response.json())
              .then(data => {
                if (data && data.candidates && data.candidates.length > 0) {
                  const candidate = data.candidates[0];
                  const lat = candidate.location.y;
                  const lng = candidate.location.x;
                  const address = candidate.address;
                  
                  // Check if location is within Frederick city boundaries
                  if (!isPointInFrederick(lat, lng)) {
                    // Clear the address input since it's outside boundaries
                    const addressInput = document.getElementById('addressSearch');
                    if (addressInput) {
                      addressInput.value = '';
                      addressInput.placeholder = 'Start typing an address in Frederick, MD...';
                    }

                    updateCoordinates(0, 0);
                    selectedCoordinates = null;

                    hideAddressDisplay();
                    validateLocationGeofencing(lat, lng);
                    return;
                  }
                  const addressInput = document.getElementById('addressSearch');
                  if (addressInput) {
                    addressInput.value = address;
                  }
                  updateCoordinates(lat, lng);
                  updateMapLocation(lat, lng);
                  selectedCoordinates = { latitude: lat, longitude: lng };
                  validateLocationGeofencing(lat, lng);
                  updateAddressDisplay(lat, lng);
                  
                } else {
                  const addressInput = document.getElementById('addressSearch');
                  if (addressInput) {
                    addressInput.placeholder = 'Address not found. Try a different address...';
                    setTimeout(() => {
                      addressInput.placeholder = 'Start typing an address in Frederick, MD...';
                    }, 3000);
                  }
                }
              })
              .catch(error => {
                console.error('Address geocoding error:', error);
                const addressInput = document.getElementById('addressSearch');
                if (addressInput) {
                  addressInput.placeholder = 'Error finding address. Please try again...';
                  setTimeout(() => {
                    addressInput.placeholder = 'Start typing an address in Frederick, MD...';
                  }, 3000);
                }
              });
          }
          
          function searchAddresses(query) {
            // Use ESRI suggest endpoint for autocomplete
            const apiKey = ESRI_API_KEY;
            const suggestUrl = "https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/suggest";
            
            // Build URL parameters for suggest API
            const houseNumberMatch = query.match(/^\d+\s+/);
            const houseNumber = houseNumberMatch ? houseNumberMatch[0].trim() : '';
            const streetPart = houseNumber ? query.replace(/^\d+\s+/, '') : query;
            
            const params = new URLSearchParams({
              text: query,
              maxSuggestions: 8,
              countryCode: "USA",
              searchExtent: "-77.48,39.38,-77.35,39.45",
              category: "Address,Postal",
              f: 'json',
              token: apiKey
            });
            
            fetch(`${suggestUrl}?${params}`)
              .then(response => response.json())
              .then(data => {
                if (data && data.suggestions && data.suggestions.length > 0) {
                  const results = data.suggestions.map(suggestion => ({
                    address: formatSuggestionAddress(suggestion.text, houseNumber),
                    originalText: suggestion.text,
                    score: 100,
                    magicKey: suggestion.magicKey,
                    isCollection: suggestion.isCollection
                  }));
                  
                  const filteredResults = results
                    .filter(result => {
                      const address = result.address || '';
                      const score = result.score || 0;
                      return address.toLowerCase().includes('frederick') || 
                             address.toLowerCase().includes('md') || 
                             score >= 85;
                    })
                    .sort((a, b) => {
                      const aIsFrederick = (a.address || '').toLowerCase().includes('frederick');
                      const bIsFrederick = (b.address || '').toLowerCase().includes('frederick');
                      
                      if (aIsFrederick && !bIsFrederick) return -1;
                      if (!aIsFrederick && bIsFrederick) return 1;
                      
                      return (b.score || 0) - (a.score || 0);
                    })
                    .slice(0, 6);
                  
                  showAddressSuggestions(filteredResults, addressInput);
                } else {
                  hideAddressSuggestions();
                }
              })
              .catch(function(error) {
                hideAddressSuggestions();
              });
          }
          
          // Format suggestion address for better display
          function formatSuggestionAddress(rawAddress, houseNumber = '') {
            if (!rawAddress) return '';
            
            let formatted = rawAddress;
            formatted = formatted.replace(/, USA$/, '');
            formatted = formatted.replace(/, MD,/, ', Maryland,');
            formatted = formatted.replace(/, MD$/, ', Maryland');

            if (houseNumber && !formatted.match(/^\d+\s+/)) {
              if (formatted.match(/^[A-Za-z]/)) {
                formatted = `${houseNumber} ${formatted}`;
              }
            }
            
            formatted = formatted.replace(/,\s*,/g, ',');
            formatted = formatted.replace(/\s+/g, ' ');
            formatted = formatted.trim();
            
            return formatted;
          }
          
          function geocodeSuggestion(magicKey, originalAddress, inputElement, displayAddress) {
            const apiKey = ESRI_API_KEY;
            const geocodeUrl = "https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates";
            
            const params = new URLSearchParams({
              magicKey: magicKey,
              outSR: 4326,
              forStorage: false,
              f: 'json',
              token: apiKey
            });
            
            fetch(`${geocodeUrl}?${params}`)
              .then(response => response.json())
              .then(data => {
                if (data && data.candidates && data.candidates.length > 0) {
                  const candidate = data.candidates[0];
                  const lat = candidate.location.y;
                  const lng = candidate.location.x;
                  const fullAddress = candidate.address;
                  
                  if (!isPointInFrederick(lat, lng)) {
                    inputElement.value = '';
                    inputElement.placeholder = 'Start typing an address in Frederick, MD...';
                    updateCoordinates(0, 0);
                    selectedCoordinates = null;
                    hideAddressDisplay();
                    validateLocationGeofencing(lat, lng);
                    return;
                  }
                  
                  // Location is valid - proceed with normal flow
                  inputElement.value = displayAddress || formatSuggestionAddress(fullAddress);
                  
                  updateCoordinates(lat, lng);
                  updateMapLocation(lat, lng);
                  selectedCoordinates = { latitude: lat, longitude: lng };
                  validateLocationGeofencing(lat, lng);
                  updateAddressDisplay(lat, lng);
                  
                } else {
                  handleManualAddressEntry(originalAddress);
                }
              })
              .catch(error => {
                handleManualAddressEntry(originalAddress);
              });
          }
          
          function showAddressSuggestions(results, inputElement) {
            hideAddressSuggestions();
            
            if (!results || results.length === 0) {
              return;
            }
            
            const suggestionsDiv = document.createElement('div');
            suggestionsDiv.id = 'addressSuggestions';
            suggestionsDiv.className = 'address-suggestions';
            suggestionsDiv.style.cssText = `
              position: absolute;
              top: 100%;
              left: 0;
              right: 0;
              background: white;
              border: 1px solid var(--border-color);
              border-top: none;
              border-radius: 0 0 0.5rem 0.5rem;
              box-shadow: var(--shadow-md);
              z-index: 1000;
              max-height: 200px;
              overflow-y: auto;
            `;
            
            results.forEach(result => {
              const suggestion = document.createElement('div');
              suggestion.className = 'address-suggestion';
              suggestion.style.cssText = `
                padding: 0.75rem;
                cursor: pointer;
                border-bottom: 1px solid var(--border-light);
                transition: background-color 0.2s;
                display: flex;
                flex-direction: column;
                gap: 0.25rem;
              `;
              
              const addressLine = document.createElement('div');
              addressLine.style.cssText = `
                font-weight: 500;
                color: var(--text-primary);
              `;
              addressLine.textContent = result.address;
              suggestion.appendChild(addressLine);
              
              suggestion.addEventListener('mouseenter', () => {
                suggestion.style.backgroundColor = 'var(--mist-gray)';
              });
              
              suggestion.addEventListener('mouseleave', () => {
                suggestion.style.backgroundColor = 'white';
              });
              
              suggestion.addEventListener('click', () => {
                if (result.magicKey) {
                  geocodeSuggestion(result.magicKey, result.originalText || result.address, inputElement, result.address);
                  return;
                } else if (result.location) {
                  const lat = result.location.y;
                  const lng = result.location.x;
                } else {
                  handleManualAddressEntry(result.originalText || result.address);
                  return;
                }
                
                // Check if location is within Frederick city boundaries FIRST
                if (!isPointInFrederick(lat, lng)) {
                  inputElement.value = '';
                  inputElement.placeholder = 'Start typing an address in Frederick, MD...';
                  updateCoordinates(0, 0);
                  selectedCoordinates = null;
                  hideAddressDisplay();
                  validateLocationGeofencing(lat, lng);
                  hideAddressSuggestions();
                  return;
                }
                
                // Location is valid - proceed with normal flow
                inputElement.value = result.address;
                
                updateCoordinates(lat, lng);
                updateMapLocation(lat, lng);
                selectedCoordinates = { latitude: lat, longitude: lng };
                validateLocationGeofencing(lat, lng);
            
                const addressBar = document.getElementById('addressBar');
                const coordsDisplay = document.getElementById('currentCoords');
                const addressDisplay = document.getElementById('currentAddress');
                
                if (addressBar && coordsDisplay && addressDisplay) {
                  addressBar.style.display = "block";
                  coordsDisplay.textContent = `${lat.toFixed(6)}, ${lng.toFixed(6)}`;
                  addressDisplay.textContent = result.address;
                  updateAddressSearchField(result.address);
                }
                
                showCoordinateMessage(`Selected: ${result.address}`);
                setTimeout(() => {
                  if (inputElement.value) {
                    inputElement.placeholder = "Address selected from search";
                  }
                }, 100);
                
                hideAddressSuggestions();
              });
              
              suggestionsDiv.appendChild(suggestion);
            });
            inputElement.parentElement.style.position = 'relative';
            inputElement.parentElement.appendChild(suggestionsDiv);
          }
          
          function hideAddressSuggestions() {
            const existing = document.getElementById('addressSuggestions');
            if (existing) {
              existing.remove();
            }
          }
          
          document.addEventListener('click', function(e) {
            if (!e.target.closest('#addressSearch') && !e.target.closest('#addressSuggestions')) {
              hideAddressSuggestions();
            }
          });
        }

        function updateMapLocation(latitude, longitude) {
          
          if (esriMapView && esriMapView.ready) {
            require(["esri/geometry/Point", "esri/Graphic", "esri/symbols/SimpleMarkerSymbol"], 
              function(Point, Graphic, SimpleMarkerSymbol) {
                
                if (currentMarker) {
                  esriMapView.graphics.remove(currentMarker);
                }
                
                const point = new Point({
                  longitude: longitude,
                  latitude: latitude
                });
                const markerSymbol = new SimpleMarkerSymbol({
                  color: [0, 71, 133],
                  outline: {
                    color: [255, 215, 0],
                    width: 3
                  },
                  size: "16px",
                  style: "circle"
                });
                
                currentMarker = new Graphic({
                  geometry: point,
                  symbol: markerSymbol,
                  attributes: {
                    type: "selected-location"
                  }
                });
                
                esriMapView.graphics.add(currentMarker);
                
                esriMapView.goTo({
                  center: [longitude, latitude],
                  zoom: 17
                }).then(() => {
                }).catch((error) => {
                });
              }
            );
          } else {
            setTimeout(() => {
              updateMapLocation(latitude, longitude);
            }, 500);
          }
        }

        function centerMapOnLocation(lat, lng) {
          if (esriMapView) {
            esriMapView.goTo({
              center: [lng, lat],
              zoom: 17
            }).catch((error) => {
            });
          }
        }

        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', initializeAddressAutocomplete);
        } else {
          initializeAddressAutocomplete();
        }

        const phoneInput = document.getElementById("phone");
        
        function formatPhoneNumber(value) {
          const digits = value.replace(/\D/g, "");
          if (digits.length >= 10) {
            return `(${digits.slice(0, 3)}) ${digits.slice(3, 6)}-${digits.slice(6, 10)}`;
          } else if (digits.length >= 6) {
            return `(${digits.slice(0, 3)}) ${digits.slice(3, 6)}-${digits.slice(6)}`;
          } else if (digits.length >= 3) {
            return `(${digits.slice(0, 3)}) ${digits.slice(3)}`;
          }
          return digits;
        }
        
        function unformatPhoneNumber(value) {
          return value.replace(/\D/g, "");
        }
        
        phoneInput.addEventListener("focus", function (e) {
          const unformatted = unformatPhoneNumber(e.target.value);
          e.target.value = unformatted;
        });
        
        phoneInput.addEventListener("blur", function (e) {
          if (e.target.value.trim() !== "") {
            e.target.value = formatPhoneNumber(e.target.value);
          }
        });
        
        phoneInput.addEventListener("input", function (e) {
          if (document.activeElement === e.target) {
            e.target.value = e.target.value.replace(/\D/g, "");
          }
        });

        document.getElementById("followUp").addEventListener("change", function (e) {
          const preferredContactMethodSection = document.getElementById("preferredContactMethodSection");
          const contactMethodRadios = document.querySelectorAll('input[name="preferredContactMethod"]');
          const selectedValue = e.target.value;
          
          if (selectedValue === "Yes") {
            preferredContactMethodSection.style.display = "block";
            preferredContactMethodSection.style.opacity = "0";
            preferredContactMethodSection.style.transform = "translateY(20px)";
            
            setTimeout(() => {
              preferredContactMethodSection.style.transition = "all 0.4s ease";
              preferredContactMethodSection.style.opacity = "1";
              preferredContactMethodSection.style.transform = "translateY(0)";
            }, 10);
            
            contactMethodRadios.forEach(radio => {
              radio.setAttribute("required", "");
            });
            document.getElementById("contactEmail").checked = true;
            
          } else if (selectedValue === "No") {
            preferredContactMethodSection.style.transition = "all 0.3s ease";
            preferredContactMethodSection.style.opacity = "0";
            preferredContactMethodSection.style.transform = "translateY(-20px)";
            
            setTimeout(() => {
              preferredContactMethodSection.style.display = "none";
            }, 300);
            
            contactMethodRadios.forEach(radio => {
              radio.removeAttribute("required");
              radio.checked = false;
            });
          } else {
            preferredContactMethodSection.style.display = "none";
            contactMethodRadios.forEach(radio => {
              radio.removeAttribute("required");
              radio.checked = false;
            });
          }
        });

        document.getElementById("anonymousRequest").addEventListener("change", function (e) {
          const contactSection = document.getElementById("contactInformationSection");
          const isAnonymous = e.target.checked;
          
          if (isAnonymous) {
            
            contactSection.style.transition = "all 0.3s ease";
            contactSection.style.opacity = "0";
            contactSection.style.transform = "translateY(-20px)";
            
            setTimeout(() => {
              contactSection.style.display = "none";
            }, 300);
            
            
            document.getElementById("firstName").value = "";
            document.getElementById("lastName").value = "";
            document.getElementById("phone").value = "";
            document.getElementById("email").value = "";
            document.getElementById("followUp").value = "";
            
            const preferredContactMethodSection = document.getElementById("preferredContactMethodSection");
            preferredContactMethodSection.style.display = "none";
            
            const contactMethodRadios = document.querySelectorAll('input[name="preferredContactMethod"]');
            contactMethodRadios.forEach(radio => {
              radio.checked = false;
              radio.removeAttribute("required");
            });
            
            document.getElementById("firstName").removeAttribute("required");
            document.getElementById("lastName").removeAttribute("required");
            document.getElementById("phone").removeAttribute("required");
            document.getElementById("email").removeAttribute("required");
            document.getElementById("followUp").removeAttribute("required");
          } else {
            contactSection.style.display = "block";
            contactSection.style.opacity = "0";
            contactSection.style.transform = "translateY(20px)";
            
            setTimeout(() => {
              contactSection.style.transition = "all 0.4s ease";
              contactSection.style.opacity = "1";
              contactSection.style.transform = "translateY(0)";
            }, 10);
            
            document.getElementById("firstName").setAttribute("required", "");
            document.getElementById("lastName").setAttribute("required", "");
            document.getElementById("phone").setAttribute("required", "");
            document.getElementById("email").setAttribute("required", "");
            document.getElementById("followUp").setAttribute("required", "");
            
            // Reset follow-up dropdown (but don't show preferred contact method until user selects "Yes")
            document.getElementById("followUp").value = "";
            const preferredContactMethodSection = document.getElementById("preferredContactMethodSection");
            preferredContactMethodSection.style.display = "none";
            
            const contactMethodRadios = document.querySelectorAll('input[name="preferredContactMethod"]');
            contactMethodRadios.forEach(radio => {
              radio.removeAttribute("required");
              radio.checked = false;
            });
          }
        });

        // Form submission handler
        form.addEventListener("submit", function (e) {
          e.preventDefault();

          try {
            // Check if reCAPTCHA is completed
            if (typeof grecaptcha === 'undefined' || !grecaptcha.getResponse()) {
              errorMessage.style.display = "block";
              errorMessage.innerHTML = `
                <i class="bi bi-exclamation-triangle me-2"></i>
                Please complete the reCAPTCHA verification before submitting your request.
              `;
              errorMessage.scrollIntoView({ behavior: "smooth" });
              return false;
            }
            
            if (!isLocationValid || !selectedCoordinates || 
                selectedCoordinates.latitude === 0 || selectedCoordinates.longitude === 0 ||
                selectedCoordinates.latitude === "0" || selectedCoordinates.longitude === "0") {
              showLocationOutsideBoundariesModal();
              return false;
            }

            errorMessage.style.display = "none";
            submitButton.disabled = true;
            submitButton.innerHTML = '<i class="bi bi-hourglass-split"></i> Submitting Request...';
            submitButton.style.opacity = '0.7';
            form.classList.add('submitting');

          
          const formData = new FormData(form);
          
          
          if (!formData.get("requestType")) {
            formData.set("requestType", selectedRequestType);
          }
          
          
          const isAnonymous = formData.get("anonymousRequest") === "on";
          const followUpResponse = formData.get("followUp");
          let requiredFields = ['requestType', 'requestDescription'];
          
          if (!isAnonymous) {
            requiredFields = requiredFields.concat(['firstName', 'lastName', 'email', 'phone', 'followUp']);
            
            if (followUpResponse === "Yes") {
              requiredFields.push('preferredContactMethod');
            }
          }
          
          const missingFields = [];
          
          requiredFields.forEach(field => {
            const value = formData.get(field);
            if (!value || value.trim() === '') {
              missingFields.push(field);
            }
          });

          if (missingFields.length > 0) {
            errorMessage.style.display = "block";
            errorMessage.innerHTML = `
              <i class="bi bi-exclamation-triangle me-2"></i>
              Please fill in all required fields: ${missingFields.join(', ')}
            `;
            resetSubmitButton();
            return;
          }
          
          const phoneFormatted = formData.get("phone");
          const phoneUnformatted = phoneFormatted ? phoneFormatted.replace(/\D/g, "") : "";

          // Create 311 service request data structure
          const serviceRequestData = {
            
            requestInfo: {
              requestType: formData.get("requestType"),
              status: "Open",
              submissionTime: new Date().toISOString(),
              isAnonymous: isAnonymous
            },
            locationInfo: {
              latitude: formData.get("latitude") || "0",
              longitude: formData.get("longitude") || "0",
              address: formData.get("addressSearch") || ""
            },
            contactInfo: isAnonymous ? {} : {
              firstName: formData.get("firstName"),
              lastName: formData.get("lastName"),
              phone: phoneUnformatted,
              email: formData.get("email"),
              followUp: formData.get("followUp"),
              preferredContactMethod: formData.get("followUp") === "Yes" ? formData.get("preferredContactMethod") : ""
            },
            detailsInfo: {
              requestDescription: formData.get("requestDescription") || ""
            },
            additionalInfo: {
              lidDamage: formData.get("lidDamage") || "",
              toterBodyDamage: formData.get("toterBodyDamage") || "",
              otherDamage: formData.get("otherDamage") || "",
              toterSerialNumber: formData.get("toterSerialNumber") || "",
              toterSize: formData.get("toterSize") || "",
              bulkPickupType: formData.get("bulkPickupType") || "",
              bulkItems: formData.get("bulkItems") || "",
              cityPark: formData.get("cityPark") || "",
              parkFeatureLocation: formData.get("parkFeatureLocation") || "",
              dateTimeObserved: formData.get("dateTimeObserved") || "",
              areaOfConcern: formData.get("areaOfConcern") || "",
              estimatedQuantity: formData.get("estimatedQuantity") || "",
              hasEnteredDrain: formData.get("hasEnteredDrain") || "",
              cleanupActions: formData.get("cleanupActions") || ""
            },
            attachments: {
              files: uploadedFiles,
              fileCount: uploadedFiles.length
            }
          };

          
          if (serviceRequestData.attachments.fileCount > 0) {
            const unprocessedFiles = [];
            const invalidFiles = [];
            
            for (let i = 0; i < serviceRequestData.attachments.fileCount; i++) {
              const fileObj = serviceRequestData.attachments.files[i];
              
              if (!fileObj) {
                invalidFiles.push(`File ${i + 1}`);
                continue;
              }
              
              if (fileObj.isProcessing) {
                unprocessedFiles.push(fileObj.name || `File ${i + 1}`);
                continue;
              }
              
              if (!fileObj.base64 || !fileObj.name) {
                invalidFiles.push(fileObj.name || `File ${i + 1}`);
              }
            }
            
            if (unprocessedFiles.length > 0) {
              showError(`Please wait for file processing to complete: ${unprocessedFiles.join(', ')}`, "Files Still Processing");
              resetSubmitButton();
              return;
            }
            
            if (invalidFiles.length > 0) {
              showError(`Some files failed to process properly: ${invalidFiles.join(', ')}. Please remove and re-add these files.`, "File Processing Failed");
              resetSubmitButton();
              return;
            }
          }

          // Submit to API  
          const timeoutId = setTimeout(() => {
            resetSubmitButton();
            
            errorMessage.style.display = "block";
            errorMessage.innerHTML = `
              <i class="bi bi-exclamation-triangle me-2"></i>
              Request timed out. Please check your internet connection and try again.
            `;
            errorMessage.scrollIntoView({ behavior: "smooth" });
          }, 10000);
          
          // Perform storage geocoding before final submission
          performStorageGeocoding(serviceRequestData.locationInfo)
            .then(() => {
              return createServiceRequest(serviceRequestData);
            })
            .then(response => {
              showSuccessModal(serviceRequestData, phoneFormatted);
            })
            .catch(error => {
              errorMessage.style.display = "block";
              errorMessage.innerHTML = `
                <i class="bi bi-exclamation-triangle me-2"></i>
                Failed to submit request: ${error.message || 'An unknown error occurred'}. Please try again.
              `;
              errorMessage.scrollIntoView({ behavior: "smooth" });
            })
            .finally(() => {
              clearTimeout(timeoutId);
              
              resetSubmitButton();
            });
            
          } catch (error) {
            if (typeof timeoutId !== 'undefined') {
              clearTimeout(timeoutId);
            }
            
            errorMessage.style.display = "block";
            errorMessage.innerHTML = `
              <i class="bi bi-exclamation-triangle me-2"></i>
              An error occurred while preparing your request: ${error.message || 'An unknown error occurred'}. Please try again.
            `;
            errorMessage.scrollIntoView({ behavior: "smooth" });
            
            resetSubmitButton();
          }
        });

        function resetSubmitButton() {
          submitButton.disabled = false;
          submitButton.innerHTML = '<i class="bi bi-send"></i> Submit Service Request';
          submitButton.style.opacity = '1';
          form.classList.remove('submitting');
        }

        function showSuccessModal(serviceRequestData, formattedPhone) {
          document.getElementById("requestTypeValue").textContent = serviceRequestData.requestInfo.requestType;
          
          const anonymousIndicator = document.getElementById("anonymousIndicator");
          const locationRow = document.getElementById("locationRow");
          const descriptionRow = document.getElementById("descriptionRow");
          const contactNameRow = document.getElementById("contactNameRow");
          const emailRow = document.getElementById("emailRow");
          const phoneRow = document.getElementById("phoneRow");
          const regularNextSteps = document.getElementById("regularNextSteps");
          const anonymousNextSteps = document.getElementById("anonymousNextSteps");
          
          if (serviceRequestData.requestInfo.isAnonymous) {
            // === ANONYMOUS REQUEST DISPLAY ===
            
            // Update modal header for anonymous requests
            document.getElementById("modalTitle").textContent = "Anonymous Request Submitted!";
            document.getElementById("modalSubtitle").textContent = "Your anonymous 311 service request has been received";
            anonymousIndicator.style.display = 'flex';

            locationRow.style.display = 'flex';
            const lat = parseFloat(serviceRequestData.locationInfo.latitude);
            const lng = parseFloat(serviceRequestData.locationInfo.longitude);
            if (lat !== 0 && lng !== 0) {
              document.getElementById("locationValue").textContent = `${lat.toFixed(6)}, ${lng.toFixed(6)}`;
            } else {
              document.getElementById("locationValue").textContent = "Location not specified";
            }
            
            descriptionRow.style.display = 'flex';
            const description = serviceRequestData.detailsInfo.requestDescription;
            if (description.length > 150) {
              const truncateAt = description.lastIndexOf(' ', 150);
              const finalTruncate = truncateAt > 100 ? truncateAt : 150;
              document.getElementById("descriptionValue").textContent = description.substring(0, finalTruncate) + "...";
            } else {
              document.getElementById("descriptionValue").textContent = description;
            }
            

            contactNameRow.style.display = 'none';
            emailRow.style.display = 'none';
            phoneRow.style.display = 'none';
            

            regularNextSteps.style.display = 'none';
            anonymousNextSteps.style.display = 'block';
            
          } else {
            // === REGULAR REQUEST DISPLAY ===
            
            // Update modal header for regular requests
            document.getElementById("modalTitle").textContent = "Request Submitted Successfully!";
            document.getElementById("modalSubtitle").textContent = "Your 311 service request has been received";
            anonymousIndicator.style.display = 'none';
            locationRow.style.display = 'none';
            descriptionRow.style.display = 'none';
            contactNameRow.style.display = 'flex';
            emailRow.style.display = 'flex';
            phoneRow.style.display = 'flex';
            
            document.getElementById("contactNameValue").textContent = `${serviceRequestData.contactInfo.firstName} ${serviceRequestData.contactInfo.lastName}`;
            document.getElementById("emailValue").textContent = serviceRequestData.contactInfo.email;
            document.getElementById("phoneValue").textContent = formattedPhone;
            
            regularNextSteps.style.display = 'block';
            anonymousNextSteps.style.display = 'none';
          }

          const successModal = document.getElementById("successModal");
          successModal.classList.add("show");
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function closeSuccessModal() {
          const successModal = document.getElementById("successModal");
          successModal.classList.remove("show");
          setTimeout(() => {
            showCompletionMessage();
          }, 300);
        }

        function showCompletionMessage() {
          const completionOverlay = document.getElementById("completionOverlay");
          completionOverlay.classList.add("show");
          setTimeout(() => {
            completionOverlay.classList.remove("show");
            form.reset();
            const anonymousCheckbox = document.getElementById("anonymousRequest");
            const contactSection = document.getElementById("contactInformationSection");
            
            if (anonymousCheckbox && contactSection) {
              anonymousCheckbox.checked = false;
              contactSection.style.display = "block";
              contactSection.style.opacity = "1";
              contactSection.style.transform = "translateY(0)";
              document.getElementById("firstName").setAttribute("required", "");
              document.getElementById("lastName").setAttribute("required", "");
              document.getElementById("phone").setAttribute("required", "");
              document.getElementById("email").setAttribute("required", "");
              document.getElementById("followUp").setAttribute("required", "");
              const preferredContactMethodSection = document.getElementById("preferredContactMethodSection");
              if (preferredContactMethodSection) {
                preferredContactMethodSection.style.display = "none";
                const contactMethodRadios = document.querySelectorAll('input[name="preferredContactMethod"]');
                contactMethodRadios.forEach(radio => {
                  radio.checked = false;
                  radio.removeAttribute("required");
                });
              }
            }
            const uploadedPhotos = document.getElementById("uploadedPhotos");
            if (uploadedPhotos) {
              uploadedPhotos.innerHTML = "";
            }
            uploadedFiles = [];
            displayFiles();
            clearAdditionalInfoFields();
            const additionalInfoSection = document.getElementById('additionalInfoSection');
            if (additionalInfoSection) {
              additionalInfoSection.style.display = 'none';
            }
            setToterFieldsRequired(false);
            setPollutionFieldsRequired(false);
            clearLocation();
            if (typeof clearMapMarkers === 'function') {
              clearMapMarkers();
            }
            selectedRequestType = null;
            clearServiceButtonSelection();
            showStep1();
            window.scrollTo({ top: 0, behavior: 'smooth' });
          }, 3000);
        }

        window.closeSuccessModal = closeSuccessModal;

        window.addEventListener('click', function(event) {
          const successModal = document.getElementById("successModal");
          if (event.target === successModal) {
            closeSuccessModal();
          }
        });

        window.addEventListener('keydown', function(event) {
          if (event.key === 'Escape') {
            closeSuccessModal();
          }
        });


        // Form validation feedback
        const formInputs = form.querySelectorAll("input, select");
        formInputs.forEach((input) => {
          input.addEventListener("input", function() {
            if (this.classList.contains('is-invalid')) {
              this.classList.remove('is-invalid');
            }
          });

          input.addEventListener("blur", function() {
            if (this.hasAttribute('required') && !this.value.trim()) {
              this.classList.add('is-invalid');
            } else if (this.type === 'email' && this.value && !isValidEmail(this.value)) {
              this.classList.add('is-invalid');
            } else {
              this.classList.remove('is-invalid');
            }
          });
        });

        // Email validation helper
        function isValidEmail(email) {
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          return emailRegex.test(email);
        }

        // Add custom validation styles
        const style = document.createElement('style');
        style.textContent = `
          .form-control.is-invalid {
            border-color: var(--error-red);
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
          }
          
          .form-control.is-valid {
            border-color: var(--success-green);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
          }
        `;
        document.head.appendChild(style);
      });

      // Custom Modal Alert Functions
      function showCustomAlert(message, type = 'warning', title = null) {
        const overlay = document.getElementById('customModalOverlay');
        const icon = document.getElementById('customModalIcon');
        const iconSymbol = document.getElementById('customModalIconSymbol');
        const titleElement = document.getElementById('customModalTitle');
        const messageElement = document.getElementById('customModalMessage');
        const okButton = document.getElementById('customModalOkButton');

        // Set content
        messageElement.textContent = message;
        
        // Set type-specific styling
        icon.className = `custom-modal-icon ${type}`;
        
        switch(type) {
          case 'error':
            iconSymbol.className = 'bi bi-x-circle';
            titleElement.textContent = title || 'Error';
            break;
          case 'warning':
            iconSymbol.className = 'bi bi-exclamation-triangle';
            titleElement.textContent = title || 'Warning';
            break;
          case 'info':
            iconSymbol.className = 'bi bi-info-circle';
            titleElement.textContent = title || 'Information';
            break;
          default:
            iconSymbol.className = 'bi bi-exclamation-triangle';
            titleElement.textContent = title || 'Alert';
        }

        // Show modal
        overlay.classList.add('show');
        setTimeout(() => okButton.focus(), 100);

        // Return a promise that resolves when OK is clicked
        return new Promise((resolve) => {
          const closeModal = () => {
            overlay.classList.remove('show');
            okButton.removeEventListener('click', closeModal);
            overlay.removeEventListener('click', outsideClick);
            document.removeEventListener('keydown', escapeKey);
            resolve();
          };

          const outsideClick = (e) => {
            if (e.target === overlay) {
              closeModal();
            }
          };

          const escapeKey = (e) => {
            if (e.key === 'Escape') {
              closeModal();
            }
          };

          okButton.addEventListener('click', closeModal);
          overlay.addEventListener('click', outsideClick);
          document.addEventListener('keydown', escapeKey);
        });
      }

      // Convenience functions for different alert types
      function showWarning(message, title) {
        return showCustomAlert(message, 'warning', title);
      }

      function showError(message, title) {
        return showCustomAlert(message, 'error', title);
      }

      function showInfo(message, title) {
        return showCustomAlert(message, 'info', title);
      }
    </script>

    <!-- Custom Modal Alert -->
    <div id="customModalOverlay" class="custom-modal-overlay">
      <div class="custom-modal">
        <div class="custom-modal-header">
          <div id="customModalIcon" class="custom-modal-icon">
            <i id="customModalIconSymbol" class="bi bi-exclamation-triangle"></i>
          </div>
          <h3 id="customModalTitle" class="custom-modal-title">Alert</h3>
        </div>
        <div class="custom-modal-body">
          <p id="customModalMessage" class="custom-modal-message">
            This is a custom alert message.
          </p>
        </div>
        <div class="custom-modal-footer">
          <button id="customModalOkButton" class="custom-modal-button primary">
            OK
          </button>
        </div>
      </div>
    </div>
  </body>
</html>